(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1079:function(e,t){},1081:function(e,t){},11:function(e,t,n){"use strict";n.d(t,"l",(function(){return u})),n.d(t,"k",(function(){return l})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"j",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"n",(function(){return _})),n.d(t,"i",(function(){return g})),n.d(t,"m",(function(){return y})),n.d(t,"f",(function(){return E})),n.d(t,"e",(function(){return w})),n.d(t,"c",(function(){return A})),n.d(t,"b",(function(){return k}));var a=n(12),r=n(2),i=n(32),s=n(36),o=n(6),c=n(25);function u(){for(var e=0,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=0,i=n;r<i.length;r++){var s=i[r];e+=+s}return e}function l(e,t){e=new Date(e),t=new Date(t);var n=new Date(e.getFullYear(),11,31),a=new Date(e.getFullYear(),12,1);return e<=n&&t>n?[{start_date:e.toISOString(),end_date:n.toISOString()},{start_date:a.toISOString(),end_date:t.toISOString()}]:[{start_date:e.toISOString(),end_date:t.toISOString()}]}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=e.map((function(e){return+e[t]})).filter((function(e){return null!=e})),a=Math.max.apply(Math,[0].concat(Object(c.a)(n)));return isNaN(a)?"id-"+Math.round(1e4*Math.random()):a+1}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return t.find((function(t){return t[n]==e[n]}))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return e=e.map((function(e){return""+e})),t.filter((function(t){return e.includes(""+t[n])}))}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.splice(t.indexOf(e),1)}function h(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:{required:!0,unique:!0}},a=0,r=Object.entries(n);a<r.length;a++){var i=Object(o.a)(r[a],2),s=i[0],c=i[1];if(c.required&&(null==e[s]||""===e[s]))return"Property ".concat(s," cannot be empty");if(c.unique&&m(e,t,s))return"Duplicate entry exists for property ".concat(s," with value ").concat(e[s])}return!1}var v=function(){function e(t,n){Object(i.a)(this,e),this.data=t,this.ownData=n}return Object(s.a)(e,[{key:"findAll",value:function(){return Object(c.a)(this.ownData)}},{key:"find",value:function(e){return this.rawFind(e)}},{key:"rawFind",value:function(e){return null==e?null:null!=e.id?m(e,this.ownData):null!=e.utorid?m({utorid:e},this.ownData):m({id:e},this.ownData)}},{key:"delete",value:function(e){if(!(e=this.rawFind(e)))throw new Error("Cannot delete object ".concat(JSON.stringify(e)));return f(e,this.ownData),e}},{key:"unusedId",value:function(){if(!this.ownData)throw new Error("Cannot get unused ID when `ownData` hasn't been set");return d(this.ownData)}},{key:"create",value:function(e){var t=d(this.ownData),n=Object(r.a)(Object(r.a)({},e),{},{id:t});return this.ownData.push(n),n}},{key:"validateNew",value:function(e){throw new Error("Subclasses must implement `validateNew()`")}},{key:"validateProp",value:function(e,t,n){return!0}},{key:"updateIfFound",value:function(e){var t=this.rawFind(e);if(!t)return null;for(var n in e)null!=n&&(this.validateProp(n,e[n],e.id),t[n]=e[n]);return t}},{key:"upsert",value:function(e){return this.rawFind(e)?this.updateIfFound(e):(this.validateNew(e),this.create(e))}}]),e}();function _(e){var t=e.map((function(e){return e.start_date})),n=e.map((function(e){return e.end_date}));return t.sort(),n.sort(),{start_date:t[0],end_date:n[n.length-1]}}function b(e){return null==e||0===e.length?"":1===e.length?e[0]:2===e.length?"".concat(e[0]," and ").concat(e[1]):((e=Object(c.a)(e))[e.length-1]="and "+e[e.length-1],e.join(", "))}function g(e){return e?b(e.map((function(e){return"".concat(e.first_name," ").concat(e.last_name," <").concat(e.email,">")}))):[]}function y(e){var t,n={},r=Object(a.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,s=i.rate,o=i.start_date,c=i.end_date,u=i.hours;o=new Date(o),c=new Date(c),n[s]=n[s]||{hours:0,rate:s};var l=n[s];l.hours+=u,l.start_date=l.start_date||o,l.start_date=Math.min(l.start_date,o),l.end_date=l.end_date||c,l.end_date=Math.max(l.end_date,c)}}catch(d){r.e(d)}finally{r.f()}return b(Object.values(n).map((function(e){var t=e.hours,n=e.rate,a=e.start_date,r=e.end_date;return a=new Date(a),r=new Date(r),"".concat(t," hours at $").concat(n,"/hour from ").concat(a.toLocaleDateString("EN-ca",{month:"long",day:"numeric",year:"numeric"})," to ").concat(r.toLocaleDateString("EN-ca",{month:"long",day:"numeric",year:"numeric"}))})))}function E(e){var t={};for(var n in e)null!=e[n]&&(t[n]=e[n]);return t}function w(e){var t=e.role,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"admin";if(t!==n)throw new Error("Invalid route for user with role '".concat(t,"'"))}for(var O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),S=new Uint8Array(256),j=0;j<256;++j)S[j]=255;function C(e){if(e>=S.length)throw new Error("Unable to parse base64 string.");var t=S[e];if(255===t)throw new Error("Unable to parse base64 string.");return t}function A(e){var t,n="",a=e.length;for(t=2;t<a;t+=3)n+=O[e[t-2]>>2],n+=O[(3&e[t-2])<<4|e[t-1]>>4],n+=O[(15&e[t-1])<<2|e[t]>>6],n+=O[63&e[t]];return t===a+1&&(n+=O[e[t-2]>>2],n+=O[(3&e[t-2])<<4],n+="=="),t===a&&(n+=O[e[t-2]>>2],n+=O[(3&e[t-2])<<4|e[t-1]>>4],n+=O[(15&e[t-1])<<2],n+="="),n}function T(e){if(e.length%4!==0)throw new Error("Unable to parse base64 string.");var t=e.indexOf("=");if(-1!==t&&t<e.length-2)throw new Error("Unable to parse base64 string.");for(var n,a=e.endsWith("==")?2:e.endsWith("=")?1:0,r=e.length,i=new Uint8Array(r/4*3),s=0,o=0;s<r;s+=4,o+=3)n=C(e.charCodeAt(s))<<18|C(e.charCodeAt(s+1))<<12|C(e.charCodeAt(s+2))<<6|C(e.charCodeAt(s+3)),i[o]=n>>16,i[o+1]=n>>8&255,i[o+2]=255&n;return i.subarray(0,i.length-a)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TextDecoder;return t.decode(T(e))}O.forEach((function(e,t){S[e.charCodeAt(0)]=t})),S["=".charCodeAt(0)]=0},1108:function(e,t,n){},1109:function(e,t,n){},1111:function(e,t){},1112:function(e,t){},1205:function(e,t,n){},1206:function(e,t,n){},1208:function(e,t,n){},1211:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(74),s=n.n(i),o=n(8),c=n(146),u=n(503),l=n(2),d=n(48),m=(n(547),n(1229)),p=n(1230),f=n(1219),h=n(505),v=n(1),_=n.n(v),b=n(7),g=n(3),y=n.n(g),E=n(43),w=n(115),O=n.n(w),S={position:"tr",autoDismiss:10,title:"Error"},j=function(e){return Object(w.error)(Object(l.a)(Object(l.a)({},S),{},{title:"Error fetching data",message:e}))},C=function(e){return Object(w.error)(Object(l.a)(Object(l.a)({},S),{},{title:"Error updating/inserting data",message:e}))},A=function(e){return Object(w.error)(Object(l.a)(Object(l.a)({},S),{},{title:"Error deleting data",message:e}))},T=function(e){return Object(w.error)(Object(l.a)(Object(l.a)({},S),{},{title:"API Error",message:e}))},k=n(6),D=n(12),x=n(504),N=n.n(x),H=function(e,t){return{type:"API_INTERACTION_START",payload:{id:e,message:t}}},P=function(e){return{type:"API_INTERACTION_END",payload:{id:e}}};function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";if(!Array.isArray(e))return e;var n,a={},r=Object(D.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;a[i[t]]=i}}catch(s){r.e(s)}finally{r.f()}return a}function F(e){return function(t){return{type:e,payload:t}}}function U(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={},r={},i=Object(D.a)(n);try{for(i.s();!(t=i.n()).done;){var s=t.value;Object.hasOwnProperty.call(e,s)&&(r[s]=e[s])}}catch(c){i.e(c)}finally{i.f()}for(var o in e)Object.hasOwnProperty.call(r,o)||(a[o]=e[o]);return[a,r]}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a){if(null==a[e])return a;var r=U(a,[e]),i=Object(k.a)(r,2),s=i[0],o=i[1];return s[t]=n?o[e].map((function(e){return e.id})):o[e].id,s}}function L(e){var t=e.dispatcher,n=e.propTypes,a=e.name,r=e.description,i=e.onErrorDispatch;return function(){for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return function(){var e=Object(b.a)(_.a.mark((function e(o){var c,u,l,d;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){y.a.checkPropTypes(e,t||{},"api action argument",a,(function(){c=!0}))},c=!1,Array.isArray(n))if(n.length!==s.length)c=!0;else for(l=0;l<n.length;l++)u(n[l],s[l]);else n&&u(n,s[0]);if(!c){e.next=6;break}return o(T("Invalid arguments to ".concat(a,' while attempting action "').concat(r,'"'))),e.abrupt("return");case 6:return d=N()(),o(H(d,r)),e.prev=8,e.next=11,o(t.apply(void 0,s));case 11:return e.abrupt("return",e.sent);case 14:if(e.prev=14,e.t0=e.catch(8),console.warn("API Error",e.t0),!i){e.next=21;break}o(i instanceof Function?i(e.t0):T('Error encountered during "'.concat(r,'"'))),e.next=22;break;case 21:throw e.t0;case 22:return e.prev=22,o(P(d)),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[8,14,22,25]])})));return function(t){return e.apply(this,arguments)}}()}}var q=n(32),B=n(222),M=n(41),G=n(42),W=n(536),Z={credentials:"same-origin",headers:{"Content-Type":"application/json"}},Y=function(e){Object(M.a)(n,e);var t=Object(G.a)(n);function n(e){var a;Object(q.a)(this,n);var r=e.message;return a=t.call(this,r),Error.captureStackTrace&&Error.captureStackTrace(Object(B.a)(a),J),a.response=e,a.status=e.status,a}return n}(Object(W.a)(Error)),J=function(e){Object(M.a)(n,e);var t=Object(G.a)(n);function n(e,a){var r;Object(q.a)(this,n);var i="Got status ".concat(e.status," ").concat(e.statusText," when fetching ").concat("/api/v1"+a);return r=t.call(this,{message:i}),Error.captureStackTrace&&Error.captureStackTrace(Object(B.a)(r),n),r.response=e,r.status=e.status,r}return n}(Y);function z(e){return e.startsWith("/")?e:"/"+e}function K(e,t){return V.apply(this,arguments)}function V(){return(V=Object(b.a)(_.a.mark((function e(t,n){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=7;break}return e.next=3,t.json();case 3:if("success"===(a=e.sent).status){e.next=6;break}throw new Y(Object(l.a)({message:"Server response did not have `status === 'success`"},a));case 6:return e.abrupt("return",a.payload);case 7:throw new J(t,n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return X.apply(this,arguments)}function X(){return(X=Object(b.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z(t),e.next=3,fetch("/api/v1"+t,Object(l.a)(Object(l.a)({},Z),{},{method:"GET"}));case 3:return n=e.sent,e.next=6,K(n,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(b.a)(_.a.mark((function e(t){var n,a,r=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},t=z(t),e.next=4,fetch("/api/v1"+t,Object(l.a)(Object(l.a)({},Z),{},{method:"POST",body:JSON.stringify(n)}));case 4:return a=e.sent,e.next=7,K(a,t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=n(23),ne=n(85),ae=n(123);function re(e,t){var n=!1,a=e.map((function(e){return e.id===t.id?(n=!0,t):e}));return n||a.push(t),a}function ie(e,t,n,a){var r;return r={},Object(te.a)(r,e,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:t.payload})})),Object(te.a)(r,t,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:re(e._modelData,t.payload)})})),Object(te.a)(r,n,(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:re(e._modelData,t.payload)})})),Object(te.a)(r,a,(function(e,t){var n=t.payload;return Object(l.a)(Object(l.a)({},e),{},{_modelData:e._modelData.filter((function(e){return e.id!==n.id}))})})),r}function se(e,t){var n=[];var a={id:Math.random(),path:n,pushToPath:function(e){n.unshift(e)}};e._storePath=a;var r=Object(ae.createReducer)(e,t);return r._storePath=a,r._localStoreSelector=function(e){return function(t){return function(e,t){if(e._storePath&&e._storePath.id===t.id)return e;try{var n,a=e,r=Object(D.a)(t.path);try{for(r.s();!(n=r.n()).done;){var i=n.value;a=a[i]}}catch(s){r.e(s)}finally{r.f()}return a}catch(o){console.error("Searching",e,"for local state with path",t.join("."),"but encountered an error")}return e}(t,e)}}(a),r}function oe(e){var t=[];for(var n=0,a=Object.entries(e);n<a.length;n++){var r=Object(k.a)(a[n],2),i=r[0],s=r[1];s._storePath&&(s._storePath.pushToPath(i),t.push(s._storePath.pushToPath))}var o=Object(ne.combineReducers)(e);return o._storePath={pushToPath:function(e){var n,a=Object(D.a)(t);try{for(a.s();!(n=a.n()).done;){(0,n.value)(e)}}catch(r){a.e(r)}finally{a.f()}}},o}var ce,ue=ie("FETCH_SESSIONS_SUCCESS","FETCH_ONE_SESSION_SUCCESS","UPSERT_ONE_SESSION_SUCCESS","DELETE_ONE_SESSION_SUCCESS"),le=se({_modelData:[],activeSession:null},Object(l.a)(Object(l.a)({},ue),{},Object(te.a)({},"SET_ACTIVE_SESSION",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{activeSession:t.payload})})))),de=se({users:[],active_user:{},active_role:null},(ce={},Object(te.a)(ce,"FETCH_ACTIVE_USER_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{active_user:t.payload})})),Object(te.a)(ce,"FETCH_USERS_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{users:t.payload})})),Object(te.a)(ce,"SET_ACTIVE_USER_ROLE_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{active_role:t.payload})})),ce)),me=ie("FETCH_APPLICANTS_SUCCESS","FETCH_ONE_APPLICANT_SUCCESS","UPSERT_ONE_APPLICANT_SUCCESS","DELETE_ONE_APPLICANT_SUCCESS");function pe(e,t){var n,a=[],r=Object(D.a)(e);try{var i=function(){var e=n.value;t.some((function(t){return t.id===e.id}))||a.push(e)};for(r.s();!(n=r.n()).done;)i()}catch(s){r.e(s)}finally{r.f()}return a.length>0?e.concat(a):e}var fe=se({_modelData:[]},Object(l.a)(Object(l.a)({},me),{},Object(te.a)({},"ADD_APPLICANT_TO_SESSION_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{_modelData:pe(e._modelData,t.payload)})})))),he=F("FETCH_APPLICANTS_SUCCESS"),ve=F("FETCH_ONE_APPLICANT_SUCCESS"),_e=F("UPSERT_ONE_APPLICANT_SUCCESS"),be=F("DELETE_ONE_APPLICANT_SUCCESS"),ge=L({name:"fetchApplicants",description:"Fetch applicants",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vn(n()),r=n().model.sessions.activeSession.id,e.next=4,Q("/".concat(a,"/sessions/").concat(r,"/applicants"));case 4:return i=e.sent,t(he(i)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),ye=(L({name:"fetchApplicant",description:"Fetch applicant",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,Q("/".concat(r,"/applicants/").concat(e.id));case 3:return i=t.sent,n(ve(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"upsertApplicant",description:"Add/insert applicant",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){var n=Object(b.a)(_.a.mark((function n(a,r){var i,s,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=Vn(r()),!t){n.next=8;break}return o=ca(r()),n.next=5,$("/".concat(i,"/sessions/").concat(o.id,"/applicants"),e);case 5:s=n.sent,n.next=11;break;case 8:return n.next=10,$("/".concat(i,"/applicants"),e);case 10:s=n.sent;case 11:return a(_e(s)),n.abrupt("return",s);case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})),Ee=L({name:"deleteApplicant",description:"Delete applicant",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/applicants/delete"),e);case 3:i=t.sent,n(be(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),we=L({name:"exportApplicants",description:"Export applicants",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spreadsheet";return function(){var n=Object(b.a)(_.a.mark((function n(a,r){var i;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof Function){n.next=2;break}throw new Error('"formatter" must be a function when using the export action.');case 2:return n.next=4,a(ge());case 4:return i=je(r()),n.abrupt("return",e(i,t));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}),Oe=L({name:"upsertApplicants",description:"Upsert applicants",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return");case 2:return a=e.map((function(e){return n(ye(e))})),t.next=5,Promise.all(a);case 5:return t.next=7,n(ge());case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Se=fe._localStoreSelector,je=Object(E.a)(Se,(function(e){return e._modelData})),Ce=n(37),Ae=se({_modelData:[]},ie("FETCH_APPLICATIONS_SUCCESS","FETCH_ONE_APPLICATION_SUCCESS","UPSERT_ONE_APPLICATION_SUCCESS","DELETE_ONE_APPLICATION_SUCCESS")),Te=ie("FETCH_POSITIONS_SUCCESS","FETCH_ONE_POSITION_SUCCESS","UPSERT_ONE_POSITION_SUCCESS","DELETE_ONE_POSITION_SUCCESS"),ke=se({_modelData:[]},Object(l.a)(Object(l.a)({},Te),{},Object(te.a)({},"ADD_INSTRUCTOR_TO_POSITION_SUCCESS",(function(e,t){var n=t.payload.position.id,a=t.payload.instructors;return Object(l.a)(Object(l.a)({},e),{},{_modelData:e._modelData.map((function(e){return e.id!==n?e:Object(l.a)(Object(l.a)({},e),{},{instructors:a})}))})})))),De=se({_modelData:[]},ie("FETCH_INSTRUCTORS_SUCCESS","FETCH_ONE_INSTRUCTOR_SUCCESS","UPSERT_ONE_INSTRUCTOR_SUCCESS","DELETE_ONE_INSTRUCTOR_SUCCESS")),xe=F("FETCH_INSTRUCTORS_SUCCESS"),Ne=F("FETCH_ONE_INSTRUCTOR_SUCCESS"),He=F("UPSERT_ONE_INSTRUCTOR_SUCCESS"),Pe=F("DELETE_ONE_INSTRUCTOR_SUCCESS"),Ie=L({name:"fetchInstructors",description:"Fetch instructors",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vn(n()),e.next=3,Q("/".concat(a,"/instructors"));case 3:return r=e.sent,t(xe(r)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Fe=(L({name:"fetchInstructor",description:"Fetch instructor",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,Q("/".concat(r,"/instructors/").concat(e.id));case 3:return i=t.sent,n(Ne(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"upsertInstructor",description:"Add/insert instructor",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/instructors"),e);case 3:return i=t.sent,n(He(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})),Ue=L({name:"deleteInstructor",description:"Delete instructor",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/instructors/delete"),e);case 3:i=t.sent,n(Pe(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Re=L({name:"exportInstructors",description:"Export instructors",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spreadsheet";return function(){var n=Object(b.a)(_.a.mark((function n(a,r){var i;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof Function){n.next=2;break}throw new Error('"formatter" must be a function when using the export action.');case 2:return n.next=4,a(Ie());case 4:return i=Be(r()),n.abrupt("return",e(i,t));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}),Le=L({name:"upsertInstructors",description:"Upsert instructors",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return");case 2:return a=e.map((function(e){return n(Fe(e))})),t.next=5,Promise.all(a);case 5:return t.next=7,n(Ie());case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),qe=De._localStoreSelector,Be=Object(E.a)(qe,(function(e){return e._modelData})),Me=ie("FETCH_CONTRACT_TEMPLATES_SUCCESS","FETCH_ONE_CONTRACT_TEMPLATE_SUCCESS","UPSERT_ONE_CONTRACT_TEMPLATE_SUCCESS","DELETE_ONE_CONTRACT_TEMPLATE_SUCCESS"),Ge=se({_modelData:[],all:[]},Object(l.a)(Object(l.a)({},Me),{},Object(te.a)({},"FETCH_ALL_CONTRACT_TEMPLATES_SUCCESS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{all:t.payload})})))),We=n(11),Ze=F("FETCH_CONTRACT_TEMPLATES_SUCCESS"),Ye=F("FETCH_ALL_CONTRACT_TEMPLATES_SUCCESS"),Je=F("UPSERT_ONE_CONTRACT_TEMPLATE_SUCCESS"),ze=F("DELETE_ONE_CONTRACT_TEMPLATE_SUCCESS"),Ke=L({name:"fetchContractTemplates",description:"Fetch contract_templates",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vn(n()),r=n().model.sessions.activeSession.id,e.next=4,Q("/".concat(a,"/sessions/").concat(r,"/contract_templates"));case 4:return i=e.sent,t(Ze(i)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Ve=L({name:"upsertContractTemplate",description:"Add/insert contract_template",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),i=a().model.sessions.activeSession.id,t.next=4,$("/".concat(r,"/sessions/").concat(i,"/contract_templates"),e);case 4:return s=t.sent,n(Je(s)),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Qe=(L({name:"deleteContractTemplate",description:"Delete contract_template from a session",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),i=a().model.sessions.activeSession.id,t.next=4,$("/".concat(r,"/sessions/").concat(i,"/contract_templates/delete"),e);case 4:return s=t.sent,n(ze(s)),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"fetchAllContractTemplates",description:"Fetch all available contract_templates",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vn(n()),e.next=3,Q("/".concat(a,"/available_contract_templates"));case 3:return r=e.sent,t(Ye(r)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})),Xe=L({name:"previewContractTemplate",description:"Preview the html content of a contract template. No redux state is set by this call, but the contents of the template is returned.",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,Q("/".concat(r,"/contract_templates/").concat(e,"/view"));case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),$e=L({name:"downloadContractTemplate",description:"Download the content of a contract template. No redux state is set by this call, but a `File` object with the contents of the template is returned.",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,Q("/".concat(r,"/contract_templates/").concat(e,"/download"));case 3:return i=t.sent,s=new Uint8Array(atob(i.content).split("").map((function(e){return e.charCodeAt(0)}))),t.abrupt("return",new File([s],i.file_name,{type:i.mime_type}));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),et=L({name:"uploadContractTemplate",description:"Upload the `File` object as a contract template",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i,s,o,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),i=e.name,t.t0=Uint8Array,t.next=5,e.arrayBuffer();case 5:return t.t1=t.sent,s=new t.t0(t.t1),o=Object(We.c)(s),t.next=10,$("/".concat(r,"/contract_templates/upload"),{file_name:i,content:o});case 10:return c=t.sent,n(Ye(c)),t.abrupt("return",c);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),tt=Ge._localStoreSelector,nt=Object(E.a)(tt,(function(e){return e._modelData})),at=Object(E.a)(tt,(function(e){return e.all})),rt=F("FETCH_POSITIONS_SUCCESS"),it=F("FETCH_ONE_POSITION_SUCCESS"),st=F("UPSERT_ONE_POSITION_SUCCESS"),ot=F("DELETE_ONE_POSITION_SUCCESS"),ct=L({name:"fetchPositions",description:"Fetch positions",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().model.sessions.activeSession.id,r=Vn(n()),e.next=4,Q("/".concat(r,"/sessions/").concat(a,"/positions"));case 4:i=e.sent,t(rt(i));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),ut=(L({name:"fetchPosition",description:"Fetch position",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().model.sessions.activeSession.id,i=Vn(a()),t.next=4,Q("/".concat(i,"/sessions/").concat(r,"/positions/").concat(e.id));case 4:s=t.sent,n(it(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),R("instructors","instructor_ids",!0)),lt=R("contract_template","contract_template_id"),dt=R("instructor","instructor_id"),mt=R("applicant","applicant_id");function pt(e){var t=U(e,["instructor_preferences"]),n=Object(k.a)(t,2),a=n[0],r=n[1];return r.instructor_preferences&&(a.instructor_preferences=r.instructor_preferences.map((function(e){return mt(dt(e))}))),lt(ut(a))}var ft=L({name:"upsertPosition",description:"Add/insert position",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().model.sessions.activeSession.id,i=Vn(a()),t.next=4,$("/".concat(i,"/sessions/").concat(r,"/positions"),pt(e));case 4:s=t.sent,n(st(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),ht=L({name:"deletePosition",description:"Delete position",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/positions/delete"),pt(e));case 3:i=t.sent,n(ot(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),vt=L({name:"exportPositions",description:"Export positions",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spreadsheet";return function(){var n=Object(b.a)(_.a.mark((function n(a,r){var i;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof Function){n.next=2;break}throw new Error('"formatter" must be a function when using the export action.');case 2:return n.next=4,a(ct());case 4:return i=yt(r()),n.abrupt("return",e(i,t));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}),_t=L({name:"upsertPositions",description:"Upsert a list of positions",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return");case 2:return a=e.map((function(e){return n(ft(e))})),t.next=5,Promise.all(a);case 5:return t.next=7,n(ct());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),bt=ke._localStoreSelector,gt=Object(E.a)(bt,(function(e){return e._modelData})),yt=Object(E.a)([gt,Be,nt,je],(function(e,t,n,a){var r=I(t),i=I(n),s=I(a);return e.map((function(e){var t=e.instructor_ids,n=e.contract_template_id,a=e.instructor_preferences,o=Object(Ce.a)(e,["instructor_ids","contract_template_id","instructor_preferences"]);return Object(l.a)(Object(l.a)({},o),{},{instructors:t.map((function(e){return r[e]})).filter((function(e){return e})),contract_template:i[n],instructor_preferences:(a||[]).map((function(e){var t=e.applicant_id,n=e.instructor_id,a=Object(Ce.a)(e,["applicant_id","instructor_id"]);return Object(l.a)({instructor:r[n],applicant:s[t]},a)}))})}))})),Et=F("FETCH_APPLICATIONS_SUCCESS"),wt=F("FETCH_ONE_APPLICATION_SUCCESS"),Ot=F("UPSERT_ONE_APPLICATION_SUCCESS"),St=F("DELETE_ONE_APPLICATION_SUCCESS"),jt=R("applicant","applicant_id"),Ct=R("position","position_id");function At(e){var t=U(e,["position_preferences"]),n=Object(k.a)(t,2),a=n[0],r=n[1];return r.position_preferences&&(a.position_preferences=r.position_preferences.map((function(e){return Ct(e)}))),jt(a)}var Tt,kt=L({name:"fetchApplications",description:"Fetch applications",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vn(n()),r=n().model.sessions.activeSession.id,e.next=4,Q("/".concat(a,"/sessions/").concat(r,"/applications"));case 4:return i=e.sent,t(Et(i)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Dt=(L({name:"fetchApplication",description:"Fetch application",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),i=a().model.sessions.activeSession.id,t.next=4,Q("/".concat(r,"/sessions/").concat(i,"/applications/").concat(e.id));case 4:return s=t.sent,n(wt(s)),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"upsertApplication",description:"Add/insert application",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),i=a().model.sessions.activeSession.id,t.next=4,$("/".concat(r,"/sessions/").concat(i,"/applications"),At(e));case 4:return s=t.sent,n(Ot(s)),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"deleteApplication",description:"Delete application",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),i=a().model.sessions.activeSession.id,t.next=4,$("/".concat(r,"/sessions/").concat(i,"/applications/delete"),At(e));case 4:s=t.sent,n(St(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Ae._localStoreSelector),xt=Object(E.a)(Dt,(function(e){return e._modelData})),Nt=(Object(E.a)([xt,je,yt],(function(e,t,n){if(0===e.length)return[];var a=I(t),r=I(n);return e.map((function(e){var t=e.position_preferences,n=e.applicant_id,i=Object(Ce.a)(e,["position_preferences","applicant_id"]);return Object(l.a)(Object(l.a)({},i),{},{applicant:a[n]||{},position_preferences:(t||[]).map((function(e){var t=e.position_id,n=Object(Ce.a)(e,["position_id"]);return Object(l.a)({position:r[t]},n)}))})}))})),ie("FETCH_ASSIGNMENTS_SUCCESS","FETCH_ONE_ASSIGNMENT_SUCCESS","UPSERT_ONE_ASSIGNMENT_SUCCESS","DELETE_ONE_ASSIGNMENT_SUCCESS"));function Ht(e,t){var n=(t.payload[0]||{}).assignment_id;return n?Object(l.a)(Object(l.a)({},e),{},{_wageChunksByAssignmentId:Object(l.a)(Object(l.a)({},e._wageChunksByAssignmentId),{},Object(te.a)({},n,t.payload))}):e}var Pt=se({_modelData:[],_wageChunksByAssignmentId:{}},Object(l.a)(Object(l.a)({},Nt),{},(Tt={},Object(te.a)(Tt,"FETCH_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS",Ht),Object(te.a)(Tt,"UPSERT_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS",Ht),Tt))),It=F("FETCH_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS"),Ft=F("UPSERT_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS"),Ut=F("UPSERT_ONE_WAGE_CHUNK_SUCCESS"),Rt=F("DELETE_ONE_WAGE_CHUNK_SUCCESS"),Lt=L({name:"fetchWageChunksForAssignment",description:"Fetch wage chunks associated with an assignment",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i,s;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),i=e.id,t.next=4,Q("/".concat(r,"/assignments/").concat(i,"/wage_chunks"));case 4:s=t.sent,n(It(s));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),qt=L({name:"upsertWageChunksForAssignment",description:"Fetch wage chunks associated with an assignment",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e,t){return function(){var n=Object(b.a)(_.a.mark((function n(a,r){var i,s,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Vn(r()),s=e.id,n.next=4,$("/".concat(i,"/assignments/").concat(s,"/wage_chunks"),t);case 4:return o=n.sent,a(Ft(o)),n.next=8,a(zt(e));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}),Bt=(L({name:"upsertWageChunk",description:"Add/insert wage chunk",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/wage_chunks"),e);case 3:i=t.sent,n(Ut(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"deleteWageChunk",description:"Delete a wage chunk",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/wage_chunks/delete"),e);case 3:i=t.sent,n(Rt(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Pt._localStoreSelector),Mt=Object(E.a)(Bt,(function(e){return function(t){var n=t.id;return e._wageChunksByAssignmentId[n]?e._wageChunksByAssignmentId[n]:[]}})),Gt=F("FETCH_ASSIGNMENTS_SUCCESS"),Wt=F("FETCH_ONE_ASSIGNMENT_SUCCESS"),Zt=F("UPSERT_ONE_ASSIGNMENT_SUCCESS"),Yt=F("DELETE_ONE_ASSIGNMENT_SUCCESS"),Jt=L({name:"fetchAssignments",description:"Fetch assignments",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vn(n()),r=n().model.sessions.activeSession.id,e.next=4,Q("/".concat(a,"/sessions/").concat(r,"/assignments"));case 4:return i=e.sent,t(Gt(i)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),zt=L({name:"fetchAssignment",description:"Fetch assignment",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,Q("/".concat(r,"/assignments/").concat(e.id));case 3:return i=t.sent,n(Wt(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Kt=R("applicant","applicant_id"),Vt=R("position","position_id");function Qt(e){return Vt(Kt(e))}var Xt=L({name:"upsertAssignment",description:"Add/insert assignment",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/assignments"),Qt(e));case 3:if(i=t.sent,n(Zt(i)),!e.wage_chunks){t.next=11;break}return t.next=8,n(qt(i,e.wage_chunks));case 8:return t.next=10,n(zt(i));case 10:i=t.sent;case 11:return n(Zt(i)),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),$t=(L({name:"deleteAssignment",description:"Delete assignment",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/assignments/delete"),Qt(e));case 3:i=t.sent,n(Yt(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"exportAssignments",description:"Export assignments",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spreadsheet";return function(){var n=Object(b.a)(_.a.mark((function n(a,r){var i,s,o,c,u;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof Function){n.next=2;break}throw new Error('"formatter" must be a function when using the export action.');case 2:return n.next=4,a(Jt());case 4:return i=sn(r()),s=i.map((function(e){return a(Lt(e))})),n.next=8,Promise.all(s);case 8:o=Object(D.a)(i);try{for(o.s();!(c=o.n()).done;)(u=c.value).wage_chunks=Mt(r())(u)}catch(l){o.e(l)}finally{o.f()}return n.abrupt("return",e(i,t));case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})),en=L({name:"upsertAssignments",description:"Upsert a list of assignments",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return");case 2:return a=e.map((function(e){return n(Xt(e))})),t.next=5,Promise.all(a);case 5:return t.next=7,n(Jt());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}});function tn(e,t){if(!t)return!0;var n,a=0,r=Object(D.a)(t);try{for(r.s();!(n=r.n()).done;){a+=n.value.hours}}catch(i){r.e(i)}finally{r.f()}return a===e.hours}var nn,an=Pt._localStoreSelector,rn=Object(E.a)(an,(function(e){return e._modelData})),sn=Object(E.a)([rn,je,yt,Mt],(function(e,t,n,a){return 0===e.length?[]:(t=I(t),n=I(n),e.map((function(e){var r=e.position_id,i=e.applicant_id,s=Object(Ce.a)(e,["position_id","applicant_id"]),o=a(e);return Object(l.a)(Object(l.a)({},s),{},{position:n[r]||{},applicant:t[i]||{},wage_chunks:tn(e,o)?o:null})})))})),on=L({name:"setGlobals",description:"Sets global variables",onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(l.a)(Object(l.a)({},ln(a())),e),t.next=3,n(cn(r));case 3:n({type:"SET_GLOBALS",payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),cn=L({name:"setGlobalsInUrl",description:"Stores global variables in the URL",onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){return Object(b.a)(_.a.mark((function t(){var n,a,r,i,s,o,c;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=new URLSearchParams,a=0,r=Object.entries(e);a<r.length;a++)i=Object(k.a)(r[a],2),s=i[0],o=i[1],n.append(s,JSON.stringify(o));window.history.pushState&&(""+n).length>0&&((c=new URL(window.location)).search="?"+n,""+(c=""+c)!==""+window.location&&window.history.pushState({path:c},"",c));case 3:case"end":return t.stop()}}),t)})))}}),un=L({name:"setMockAPIState",description:"Activates or deactivates the mockAPI",onErrorDispatch:function(e){return T(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipInit:!1};return function(){var n=Object(b.a)(_.a.mark((function n(a){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(on({mockAPI:e}));case 2:if(t.skipInit){n.next=5;break}return n.next=5,a(Un("toggleMockAPI"));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),ln=function(e){var t=e.ui.globals,n=(t.activeSession,Object(Ce.a)(t,["activeSession"])),a=ca(e);return null!=a&&null!=a.id?Object(l.a)(Object(l.a)({},n),{},{activeSession:a.id}):n},dn=n(124),mn=n(25),pn=se({ongoingInteraction:!1,ongoingInteractionsList:[]},(nn={},Object(te.a)(nn,"API_INTERACTION_START",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{ongoingInteraction:!0,ongoingInteractionsList:[].concat(Object(mn.a)(e.ongoingInteractionsList),[t.payload])})})),Object(te.a)(nn,"API_INTERACTION_END",(function(e,t){var n=e.ongoingInteractionsList.filter((function(e){return e.id!==t.payload.id}));return Object(l.a)(Object(l.a)({},e),{},{ongoingInteraction:n.length>0,ongoingInteractionsList:n})})),nn)),fn=se({_modelData:[]},ie("FETCH_DDAHS_SUCCESS","FETCH_ONE_DDAH_SUCCESS","UPSERT_ONE_DDAH_SUCCESS","DELETE_ONE_DDAH_SUCCESS")),hn=Object(ae.createReducer)({},Object(te.a)({},"SET_GLOBALS",(function(e,t){return Object(l.a)(Object(l.a)({},e),t.payload)}))),vn=F("FETCH_DDAHS_SUCCESS"),_n=F("FETCH_ONE_DDAH_SUCCESS"),bn=F("UPSERT_ONE_DDAH_SUCCESS"),gn=F("DELETE_ONE_DDAH_SUCCESS"),yn=F("DDAH_APPROVE_SUCCESS"),En=F("DDAH_EMAIL_SUCCESS"),wn=L({name:"fetchDdahs",description:"Fetch DDAHs",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r,i;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vn(n()),r=n().model.sessions.activeSession.id,e.next=4,Q("/".concat(a,"/sessions/").concat(r,"/ddahs"));case 4:return i=e.sent,t(vn(i)),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),On=(L({name:"fetchDdah",description:"Fetch a DDAH",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,Q("/".concat(r,"/ddahs/").concat(e.id));case 3:return i=t.sent,n(_n(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),R("assignment","assignment_id"));function Sn(e){var t=On(e);return delete t.applicant,t}var jn=L({name:"approveDdah",description:"Set a DDAH's status to approved",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/ddahs/").concat(e.id,"/approve"));case 3:return i=t.sent,n(yn(i)),n(bn(i)),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Cn=L({name:"emailDdah",description:"Email a DDAH",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/ddahs/").concat(e.id,"/email"));case 3:return i=t.sent,n(En(i)),n(bn(i)),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),An=L({name:"upsertDdah",description:"Add/insert a DDAH",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/ddahs"),Sn(e));case 3:return i=t.sent,n(bn(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Tn=(L({name:"deleteDdah",description:"Delete a DDAH",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/assignments/delete"),Sn(e));case 3:i=t.sent,n(gn(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"exportDdahs",description:"Export DDAHs",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spreadsheet";return function(){var n=Object(b.a)(_.a.mark((function n(a,r){var i;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e instanceof Function){n.next=2;break}throw new Error('"formatter" must be a function when using the export action.');case 2:return n.next=4,a(wn());case 4:return i=Pn(r()),n.abrupt("return",e(i,t));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})),kn=L({name:"upsertDdahs",description:"Upsert a list of DDAHs",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return");case 2:return a=e.map((function(e){return n(An(e))})),t.next=5,Promise.all(a);case 5:return t.next=7,n(wn());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Dn=L({name:"downloadDdahAcceptedList",description:"Download a pdf list of accepted DDAHs for the active session",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r,i,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vn(n()),r=n().model.sessions.activeSession.id,e.next=4,Q("/".concat(a,"/sessions/").concat(r,"/ddahs/accepted_list.pdf"));case 4:return i=e.sent,s=new Uint8Array(atob(i.content).split("").map((function(e){return e.charCodeAt(0)}))),e.abrupt("return",new File([s],i.file_name,{type:i.mime_type}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}});function xn(e){var t,n=0,a=Object(D.a)(e.duties);try{for(a.s();!(t=a.n()).done;){n+=t.value.hours}}catch(r){a.e(r)}finally{a.f()}return n}var Nn=fn._localStoreSelector,Hn=Object(E.a)(Nn,(function(e){return e._modelData})),Pn=Object(E.a)([Hn,sn],(function(e,t){return 0===e.length?[]:(t=I(t),e.map((function(e){var n,a=e.assignment_id,r=Object(Ce.a)(e,["assignment_id"]);return Object(l.a)(Object(l.a)({},r),{},{status:(n=r,n.accepted_date?"accepted":n.emailed_date?"emailed":null),total_hours:xn(r),assignment:t[a]||{}})})))}));function In(e){if(null!=e){var t=n(355).mockAPI;!0===e?t.replaceGlobalFetch():t.restoreGlobalFetch()}}function Fn(e){for(var t={},n=0,a=Object.entries(e);n<a.length;n++){var r=Object(k.a)(a[n],2),i=r[0],s=r[1];null!=s&&(t[i]=s)}return t}function Un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{startAfterStage:!1},n=!!t.startAfterStage;return function(){var t=Object(b.a)(_.a.mark((function t(a,r){var i,s,o,c,u,l,d,m,p;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=function(t){var a=["pageLoad","toggleMockAPI","setActiveUser","setActiveUserRole","fetchInstructors","fetchSessions","setActiveSession","updateGlobals","fetchSessionDependentData"],s=a.indexOf(e)+n<=a.indexOf(t);if(s&&"setActiveSession"===t){var o=r(),c=oa(o),u=ca(o)||{id:i.activeSession};return c.find((function(e){return e.id===u.id}))}if(s&&"fetchSessionDependentData"===t){var l=r(),d=ca(l);return null!=(null===d||void 0===d?void 0:d.id)}return s},i={mockAPI:null,activeSession:null},s=[],!o("pageLoad")){t.next=8;break}if(!window.location){t.next=8;break}return Object.assign(i,Object(dn.a)(window.location.search)),t.next=8,a(on(Fn(i)));case 8:if(o("toggleMockAPI")&&In(ln(r()).mockAPI),!o("setActiveUser")){t.next=12;break}return t.next=12,a(Mn());case 12:if(!o("setActiveUserRole")){t.next=22;break}return a(he([])),a(Gt([])),a(Ze([])),a(Et([])),a(xe([])),a(rt([])),c=Vn(r()),t.next=22,a(Wn(c,{skipInit:!0}));case 22:if(o("fetchInstructors")&&s.push(a(Ie())),!o("fetchSessions")){t.next=26;break}return t.next=26,a(na());case 26:if(!o("setActiveSession")){t.next=33;break}return u=r(),l=oa(u),d=ca(u),m=l.find((function(e){return e.id===i.activeSession}))||d,t.next=33,a(ia(m,{skipInit:!0}));case 33:if(!o("updateGlobals")){t.next=36;break}return t.next=36,a(on(Fn(i)));case 36:if(!o("fetchSessionDependentData")){t.next=45;break}return a(he([])),a(Gt([])),a(Ze([])),a(Et([])),a(rt([])),p=[ge,kt,Jt,Ke,ct,wn],t.next=45,Promise.all(p.map((function(e){return a(e())})));case 45:return t.next=47,Promise.all(s);case 47:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}var Rn=F("FETCH_ACTIVE_USER_SUCCESS"),Ln=F("FETCH_USERS_SUCCESS"),qn=F("UPSERT_USERS_SUCCESS"),Bn=F("SET_ACTIVE_USER_ROLE_SUCCESS"),Mn=L({name:"fetchActiveUser",description:"Fetch the active user",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("/active_user");case 2:return a=e.sent,t(Rn(a)),r=Vn(n()),a.roles&&!a.roles.includes(r)&&t(Wn(a.roles[0])),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),Gn=(L({name:"upsertUsers",description:"Upserts a user (setting their role(s))",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$("/admin/users",e);case 2:return a=t.sent,n(qn(a)),t.next=6,n(Gn(e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),L({name:"fetchUsers",description:"Fetch all users",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vn(n()),e.next=3,Q("/".concat(a,"/users"));case 3:return r=e.sent,t(Ln(r)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}})),Wn=L({name:"setActiveUserRole",description:"Sets the role of the active user",onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(b.a)(_.a.mark((function n(a){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(Bn(e));case 2:if(t.skipInit){n.next=5;break}return n.next=5,a(Un("setActiveUserRole",{startAfterStage:!0}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),Zn=L({name:"debugOnlyFetchUsers",description:"Fetch all users; this is available only in debug mode and bypasses any user permissions",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("/debug/users");case 2:n=e.sent,t(Ln(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),Yn=L({name:"debugOnlySetActiveUser",description:"Sets the active user (i.e. fakes the 'logged on' user); available only in debug mode",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(b.a)(_.a.mark((function n(a){var r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$("/debug/active_user",e);case 2:return r=n.sent,n.next=5,a(Rn(r));case 5:return n.next=7,a(Bn(r.roles[0]));case 7:if(t.skipInit){n.next=10;break}return n.next=10,a(Un("setActiveUser"));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),Jn=de._localStoreSelector,zn=function(e){return Jn(e).users},Kn=function(e){return Jn(e).active_user},Vn=function(e){return Jn(e).active_role},Qn=F("FETCH_SESSIONS_SUCCESS"),Xn=F("FETCH_ONE_SESSION_SUCCESS"),$n=F("UPSERT_ONE_SESSION_SUCCESS"),ea=F("DELETE_ONE_SESSION_SUCCESS"),ta=F("SET_ACTIVE_SESSION"),na=L({name:"fetchSessions",description:"Fetch sessions",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(){return function(){var e=Object(b.a)(_.a.mark((function e(t,n){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vn(n()),e.next=3,Q("/".concat(a,"/sessions"));case 3:return r=e.sent,e.next=6,t(Qn(r));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}),aa=(L({name:"fetchSession",description:"Fetch session",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,Q("/".concat(r,"/sessions/").concat(e.id));case 3:return i=t.sent,n(Xn(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"upsertSession",description:"Add/insert session",propTypes:{},onErrorDispatch:function(e){return C(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/sessions"),e);case 3:return i=t.sent,n($n(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})),ra=L({name:"deleteSession",description:"Delete session",propTypes:{id:y.a.any.isRequired},onErrorDispatch:function(e){return A(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/sessions/delete"),e);case 3:i=t.sent,n(ea(i));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),ia=L({name:"setActiveSession",description:"Set the active session",onErrorDispatch:!0,dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(b.a)(_.a.mark((function n(a,r){var i,s,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.skipInit,s=r(),(o=ca(s))!==e){n.next=5;break}return n.abrupt("return");case 5:if(null!=e){n.next=9;break}return n.next=8,a(ta(null));case 8:return n.abrupt("return");case 9:if((o||{id:null}).id!==e.id){n.next=11;break}return n.abrupt("return");case 11:return n.next=13,a(ta(e));case 13:if(i){n.next=16;break}return n.next=16,a(Un("setActiveSession",{startAfterStage:!0}));case 16:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}}),sa=le._localStoreSelector,oa=Object(E.a)(sa,(function(e){return e._modelData})),ca=Object(E.a)(sa,(function(e){return e.activeSession})),ua=F("FETCH_ONE_OFFER_SUCCESS"),la=F("SET_OFFER_ACCEPTED_SUCCESS"),da=F("SET_OFFER_REJECTED_SUCCESS"),ma=F("OFFER_CREATE_SUCCESS"),pa=F("OFFER_EMAIL_SUCCESS"),fa=F("OFFER_NAG_SUCCESS"),ha=F("OFFER_WITHDRAW_SUCCESS"),va=(L({name:"fetchActiveOfferForAssignment",description:"Fetch an offer associated with an assignment",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,Q("/".concat(r,"/assignments/").concat(e.id,"/active_offer"));case 3:return i=t.sent,n(ua(i)),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),L({name:"setOfferForAssignmentAccepted",description:"Set an offer as accepted",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/assignments/").concat(e.id,"/active_offer/accept"));case 3:return i=t.sent,n(la(i)),t.next=7,n(zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})),_a=L({name:"setOfferForAssignmentRejected",description:"Set an offer as rejected",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/assignments/").concat(e.id,"/active_offer/reject"));case 3:return i=t.sent,n(da(i)),t.next=7,n(zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),ba=L({name:"offerForAssignmentWithdraw",description:"Withdraw an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/assignments/").concat(e.id,"/active_offer/withdraw"));case 3:return i=t.sent,n(ha(i)),t.next=7,n(zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),ga=L({name:"offerForAssignmentCreate",description:"Create an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/assignments/").concat(e.id,"/active_offer/create"));case 3:return i=t.sent,n(ma(i)),t.next=7,n(zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),ya=L({name:"offerForAssignmentEmail",description:"Email an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/assignments/").concat(e.id,"/active_offer/email"));case 3:return i=t.sent,n(pa(i)),t.next=7,n(zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),Ea=L({name:"offerForAssignmentNag",description:"Send a nag email for an offer",onErrorDispatch:function(e){return j(e.toString())},dispatcher:function(e){return function(){var t=Object(b.a)(_.a.mark((function t(n,a){var r,i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vn(a()),t.next=3,$("/".concat(r,"/assignments/").concat(e.id,"/active_offer/nag"));case 3:return i=t.sent,n(fa(i)),t.next=7,n(zt(e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),wa=function(e){var t=e.globals,n=e.setMockAPIState,a=t.mockAPI;return r.a.createElement("span",{title:"The Mock API simulates the TAPP API but uses browser-based storage. This allows you to test TAPP functionality without a working server."},"Mock API"," ",r.a.createElement(f.a,null,r.a.createElement(h.a,{variant:a?"primary":"secondary",onClick:function(){return n(!0)}},"On"),r.a.createElement(h.a,{variant:a?"secondary":"primary",onClick:function(){return n(!1)}},"Off")))};wa=Object(o.connect)((function(e){return{globals:ln(e)}}),{setGlobals:on})(wa);var Oa=n(506),Sa=n.n(Oa),ja=(n(1088),n(4)),Ca=n(355),Aa=n(1225),Ta=function(){};function ka(e){return r.a.createElement(m.a.Link,{as:c.b,activeClassName:"bg-warning text-dark",to:e.to},e.children)}var Da={openapi:"3.0.0",info:{description:"TAPP is a program for TA management--for making TA assignments and distributing TA contracts.",title:"TAPP"},servers:[{url:"/api/v1/admin"},{url:"/api/v1/instructor"},{url:"/api/v1/ta"},{url:"/api/v1"}],paths:Object(l.a)({},Object(ja.c)(Ca.mockAPI))},xa=Object(o.connect)((function(e){return{activeUser:Kn(e),users:zn(e)}}),{fetchUsers:Zn,setActiveUser:Yn})((function(e){var t=e.users,n=void 0===t?[]:t,a=e.activeUser,i=void 0===a?{}:a,s=e.setActiveUser,o=void 0===s?Ta:s,c=e.fetchUsers,u=void 0===c?Ta:c,l=r.a.useState(!1),d=Object(k.a)(l,2),m=d[0],p=d[1];return r.a.useEffect((function(){m&&u()}),[m,u]),r.a.createElement("span",{title:"Set which user you are currently logged in as. This is only available when the server is running in debug mode.",className:"logged-in-as-container"},r.a.createElement("label",null,"Logged in as"),r.a.createElement(Aa.a,{onSelect:function(e){o(n[e])},onToggle:function(e){return p(e)},show:m,alignRight:!0},r.a.createElement(Aa.a.Toggle,{split:!0,variant:"dark"},i.utorid," "),r.a.createElement(Aa.a.Menu,{flip:!0},(n||[]).map((function(e,t){return r.a.createElement(Aa.a.Item,{key:t,eventKey:""+t,active:i.utorid===e.utorid},e.utorid," (",(e.roles||[]).join(", "),")")})))))})),Na=Object(o.connect)(null,{setMockAPIState:un})(wa);var Ha=Object(o.connect)((function(e){return{notifications:e.ui.notifications}}))(O.a),Pa=n(1227),Ia=n(526);function Fa(e,t){function n(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return function(r){var i=r.target.value||"",s=Object(l.a)(Object(l.a)({},e),{},Object(te.a)({},n,a(i)));t(s)}}return function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=function(e){return e},c=function(e){return e||""};switch(i){case"number":o=Number;break;case"date":o=function(e){return new Date(e).toISOString()},c=function(e){try{return new Date(e).toISOString().slice(0,10)}catch(t){return""}}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,null,t),r.a.createElement(Pa.a.Control,Object.assign({type:i,value:c(e[a]),onChange:n(a,o)},s)))}}function Ua(e){var t=e.children,n=e.icon,a=void 0===n?null:n,i=null;return a&&(i=r.a.createElement("div",{className:"input-row-icon"},a)),r.a.createElement(Pa.a.Row,{style:{alignItems:"baseline"}},i,r.a.Children.map(t,(function(e,t){return r.a.createElement(Pa.a.Group,{as:Ia.a,key:t},e)})))}function Ra(e){var t=e.accessor,n=e.Cell;function a(e){var n,a=e,r=Object(D.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(null==a)return;a=a[i]}}catch(s){r.e(s)}finally{r.f()}return a}return t=(t||"").split("."),function(e){var t=e.row,i=t.original||t._original,s=a(i.obj),o=a(i.changes);return null!=o?r.a.createElement("div",{className:"diff-changed-cell bg-primary text-white",title:o},o):n?n({value:s,original:i.obj}):null==s?null:s}}function La(e){return e.map((function(e){var t=Object(l.a)(Object(l.a)({id:e.accessor},e),{},{Cell:Ra(e)});return delete t.accessor,t}))}var qa=n(10),Ba=n.n(qa),Ma=n(151),Ga=n(13);function Wa(e){return null==e?"":(""+e).trim()}function Za(e){if(!e)return e;var t=new Date(e).toJSON().slice(0,10),n=new Date("".concat(t,"T00:00:00.000"));return"".concat(n.toLocaleDateString("en-CA",{month:"short",year:"numeric",day:"numeric"}))}var Ya=function(e){return e};Ya=function(e){return(e=new URL(e,window.location.href).href).replace("localhost:8000","localhost:3000")};var Ja=n(1220),za=n(537),Ka=n(527),Va=n.n(Ka),Qa=n(528),Xa=(Array.from({length:10}).map((function(e,t){return{last_name:(""+Math.random()).slice(0,4),first_name:""+Math.round(10*Math.random())}})),r.a.forwardRef((function(e,t){var n=e.indeterminate,a=Object(Ce.a)(e,["indeterminate"]);return r.a.useEffect((function(){t&&t.current&&(t.current.indeterminate=n)}),[t,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({type:"checkbox",ref:t||null},a)))})));function $a(e){var t=e.column,n=null;return t.isSorted&&(n=t.isSortedDesc?r.a.createElement("div",{className:"column-sort-icon"},r.a.createElement(Ga.l,{className:"ml-2 text-secondary"})):r.a.createElement("div",{className:"column-sort-icon"},r.a.createElement(Ga.k,{className:"ml-2 text-secondary"}))),r.a.createElement("div",Object.assign({className:"th"},t.getHeaderProps(t.getSortByToggleProps())),r.a.createElement("div",{className:"table-header"},t.render("Header")),n,r.a.createElement("div",Object.assign({},t.getResizerProps(),{className:"resizer ".concat(t.isResizing?"isResizing":"")})))}function er(e){var t=e.onChange,n=e.count,a=void 0===n?null:n,i=r.a.useState([]),s=Object(k.a)(i,2),o=s[0],c=s[1];r.a.useEffect((function(){"function"===typeof t&&t(o.map((function(e){return Wa(e.toLowerCase())})))}),[o,t]);var u=o.filter((function(e){return Wa(e)})),l=o.map((function(e){return Wa(e.toLowerCase())}));return r.a.createElement("div",{className:"filterable-table-filter"},r.a.createElement(Ga.i,{className:"mr-3"}),r.a.createElement("input",{type:"text",placeholder:"Filter by...",onChange:function(e){c([e.target.value].concat(Object(mn.a)(o.slice(1))))},value:o[0]||"",onKeyDown:function(e){13===e.keyCode&&function(){var e=Wa((o[0]||"").toLowerCase());""!==e&&(l.slice(1).some((function(t){return t===e}))?c([""].concat(Object(mn.a)(o.slice(1)))):c([""].concat(Object(mn.a)(o.map((function(e){return Wa(e)}))))))}()}}),u.length>0&&r.a.createElement("span",{className:"filter-table-filtering-by"},"Filtering by:"),u.map((function(e,t){return r.a.createElement(Ja.a,{className:"filter-chip",pill:!0,variant:"light",key:"".concat(e,"-").concat(t)},e,r.a.createElement(Ga.m,{className:"filter-chip-icon",title:"Remove filter",onClick:function(){return function(e){if(e!==o[0]){var t=o.filter((function(t){return t!==e}));c(t)}else c([""].concat(Object(mn.a)(o.slice(1))))}(e)}}))})),null!=a&&r.a.createElement("div",{className:"filter-item-count"},a))}var tr={};function nr(e,t){if(!e)return tr;for(var n={},a=0;a<t.length;a++){var r=t[a];e.includes(r.id)&&(n[a]=!0)}return n}function ar(e){var t=e.columns,n=e.data,a=e.filterable,i=void 0===a?null:a,s=e.selected,c=e.setSelected,u=r.a.useState([]),l=Object(k.a)(u,2),d=l[0],m=l[1],p=r.a.useCallback((function(e,t,n){return 0===d.length?e:e.filter((function(e){return d.every((function(n){return t.some((function(t){return(""+(e.values[t]||"")).toLowerCase().match(n)}))}))}))}),[d]),f=Object(Ma.useTable)({columns:t,data:n,filterTypes:{custom:p},globalFilter:"custom",autoResetGlobalFilter:!1,autoResetSortBy:!1,autoResetSelectedRows:!1,initialState:{hiddenColumns:t.filter((function(e){return!1===e.show})).map((function(e){return e.id})),selectedRowIds:nr(s,n)}},Ma.useBlockLayout,Ma.useResizeColumns,Ma.useGlobalFilter,Ma.useSortBy,Ma.useRowSelect,!!c?function(e){e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return r.a.createElement(Xa,t())},Cell:function(e){var t,n=e.row;return null!=(null===(t=n.original)||void 0===t?void 0:t.id)?r.a.createElement(Xa,n.getToggleRowSelectedProps()):null},maxWidth:45}].concat(Object(mn.a)(e))}))}:function(){}),h=f.state.selectedRowIds,v=r.a.useRef(null);r.a.useEffect((function(){f.setGlobalFilter("custom")}),[f,p]),r.a.useEffect((function(){if("function"===typeof c){for(var e=[],t=0,a=Object.entries(h);t<a.length;t++){var r,i=Object(k.a)(a[t],2),u=i[0];if(i[1]){var l=null===(r=n[+u])||void 0===r?void 0:r.id;e.includes(l)||e.push(l)}}e.sort(),e=e.filter((function(e){return null!=e})),Object(o.shallowEqual)(e,Object(mn.a)(s||[]).sort())||c(e)}}),[h,s,c,n]);var _=r.a.useCallback((function(e){var t,n=e.index,a=e.style,i=f.rows[n];return f.prepareRow(i),r.a.createElement("div",Object.assign({},i.getRowProps({style:a}),{className:Ba()("tr",{"table-primary":i.isSelected&&null!=(null===(t=i.original)||void 0===t?void 0:t.id)})}),i.cells.map((function(e){return r.a.createElement("div",Object.assign({},e.getCellProps(),{className:Ba()("td",e.column.className,{"selection-checkbox":"selection"===e.column.id})}),e.render("Cell"))})))}),[f]),b=r.a.useCallback((function(e){var t=e.target.scrollTop;v.current&&v.current.scrollTo(t)}),[v]);return r.a.createElement("div",{className:"filter-table-container"},i&&r.a.createElement(er,{onChange:function(e){Object(o.shallowEqual)(e,d)||m(e)},count:f.rows.length}),r.a.createElement("div",Object.assign({},f.getTableProps(),{className:"table table-bordered table-sm"}),r.a.createElement("div",{className:"thead"},f.headerGroups.map((function(e){return r.a.createElement("div",Object.assign({},e.getHeaderGroupProps(),{className:"thr"}),e.headers.map((function(e,t){return r.a.createElement($a,{key:t,column:e})})))}))),r.a.createElement("div",Object.assign({},f.getTableBodyProps(),{className:"tbody"}),r.a.createElement(Qa.a,null,(function(e){var t=e.width,n=e.height;return n=Math.max(n,300),r.a.createElement(Va.a,{style:{width:t,height:n},onScroll:b},r.a.createElement(za.a,{height:n,itemCount:f.rows.length,itemSize:30,width:f.totalColumnsWidth,ref:v,style:{overflow:"visible"}},_))})))))}var rr=[{Header:"Last Name",accessor:"last_name"},{Header:"First Name",accessor:"first_name"},{Header:"Email",accessor:"email",minWidth:120},{Header:"UTORid",accessor:"utorid"}];function ir(e){var t=e.instructors,n=e.columns,a=void 0===n?rr:n;return r.a.createElement(ar,{data:t,columns:a,filterable:!0})}function sr(e){var t=e.modifiedInstructors;return r.a.createElement(ir,{instructors:t,columns:La(rr)})}var or={utorid:"",last_name:"",first_name:""};function cr(e){var t=e.instructor,n=e.setInstructor,a=Object(l.a)(Object(l.a)({},or),t);function i(e){return function(t){var r=t.target.value||"",i=Object(l.a)(Object(l.a)({},a),{},Object(te.a)({},e,r));n(i)}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,null,e),r.a.createElement(Pa.a.Control,{type:n,value:a[t]||"",onChange:i(t)}))}return r.a.createElement(Pa.a,null,r.a.createElement(Pa.a.Row,null,r.a.createElement(Ua,null,s("First Name","first_name"),s("Last Name","last_name")),r.a.createElement(Ua,null,s("Email","email"),s("UTORid","utorid"))))}var ur=n(1221),lr=n(1226);n(1108);function dr(e){var t=e.title,n=e.value,a=e.show,i=e.onHide,s=e.onChange,o=e.type,c=r.a.useState(n),u=Object(k.a)(c,2),l=u[0],d=u[1],m=r.a.useState(!1),p=Object(k.a)(m,2),f=p[0],v=p[1],g="date"===o;function y(){d(n),i()}var E=f?r.a.createElement(ur.a,{animation:"border",size:"sm",className:"mr-1"}):null,w=l==n?null:r.a.createElement("span",null,"Change from"," ",r.a.createElement("span",{className:"field-dialog-formatted-name"},g?Za(n):n)," ","to"," ",r.a.createElement("span",{className:"field-dialog-formatted-name"},g?Za(l):l));return r.a.createElement(lr.a,{show:a,onHide:y},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,t)),r.a.createElement(lr.a.Body,null,r.a.createElement("input",{type:o,value:l,onChange:function(e){return d(e.currentTarget.value)}})," ",w),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:y,variant:"outline-secondary"},"Cancel"),r.a.createElement(h.a,{onClick:function(){function e(){return(e=Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l==n){e.next=4;break}return v(!0),e.next=4,s(l,n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().finally((function(){v(!1)}))}},E,"Save")))}var mr=r.a.memo((function(e){var t=e.title,n=e.hidden,a=e.onClick;return n?null:r.a.createElement("div",{className:"show-on-hover edit-glyph",onClick:a,title:t},r.a.createElement(Ga.d,null))}));function pr(e){var t=e.children,n=e.title,a=e.value,i=e.onChange,s=e.editable,o=void 0===s||s,c=e.type,u=void 0===c?"text":c,l=r.a.useState(!1),d=Object(k.a)(l,2),m=d[0],p=d[1],f=r.a.useState(!1),h=Object(k.a)(f,2),v=h[0],_=h[1];return r.a.createElement("div",{className:"show-on-hover-wrapper",onMouseEnter:function(){return _(!0)}},t,v&&r.a.createElement(mr,{title:n,hidden:!o,onClick:function(){return p(!0)}}),o&&m&&r.a.createElement(dr,{title:n,value:a,onChange:i,show:m,onHide:function(){return p(!1)},type:u}))}function fr(e){var t=e.show,n=e.onHide,a=e.onDelete,i=e.instructor;return i?r.a.createElement(lr.a,{show:t,onHide:n},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Delete Instructor")),r.a.createElement(lr.a.Body,null,"Are you sure you want to delete instructor"," ",i.last_name,", ",i.first_name,"? This action cannot be undone."),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:n,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:a,title:"Delete Instructor"},"Delete"))):null}function hr(e){var t="Edit ".concat(""+e.column.Header),n=e.upsertInstructor,a=e.field;return r.a.createElement(pr,{title:t,value:e.value||"",onChange:function(t){var r=(e.row.original||e.row._original).id;n(Object(te.a)({id:r},a,t))}},e.value)}var vr=Object(o.connect)((function(e){return{instructors:Be(e),positions:yt(e)}}),{upsertInstructor:Fe,deleteInstructor:Ue})((function(e){var t=e.upsertInstructor,n=e.deleteInstructor,a=e.inDeleteMode,i=e.positions,s=Object(Ce.a)(e,["upsertInstructor","deleteInstructor","inDeleteMode","positions"]),o=r.a.useState(!1),c=Object(k.a)(o,2),u=c[0],l=c[1],d=r.a.useState(null),m=Object(k.a)(d,2),p=m[0],f=m[1];function h(e){return function(n){return r.a.createElement(hr,Object.assign({field:e,upsertInstructor:t},n))}}var v,_={},b=Object(D.a)(i||[]);try{for(b.s();!(v=b.n()).done;){var g,y=v.value,E=Object(D.a)(y.instructors||[]);try{for(E.s();!(g=E.n()).done;){var w=g.value;_[w.id]=!0}}catch(S){E.e(S)}finally{E.f()}}}catch(S){b.e(S)}finally{b.f()}var O=[{Header:r.a.createElement(Ga.n,{className:"delete-row-column-header-icon"}),id:"delete_col",className:"delete-col",Cell:function(e){var t=e.row.original;return _[t.id]?r.a.createElement("div",{className:"delete-button-container"},r.a.createElement(Ga.f,{className:"delete-row-button disabled",title:"This instructor is assigned to a position and so cannot be deleted. Unassign the instructor from all positions to delete."})):r.a.createElement("div",{className:"delete-button-container"},r.a.createElement(Ga.m,{className:"delete-row-button",title:"Delete ".concat(t.last_name,", ").concat(t.first_name),onClick:function(){f(t),l(!0)}}))},show:a,maxWidth:32,resizable:!1},{Header:"Last Name",accessor:"last_name",Cell:h("last_name")},{Header:"First Name",accessor:"first_name",Cell:h("first_name")},{Header:"Email",accessor:"email",Cell:h("email"),minWidth:150},{Header:"UTORid",accessor:"utorid",Cell:h("utorid")}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ir,Object.assign({columns:O},s)),r.a.createElement(fr,{show:u,onHide:function(){l(!1),f(null)},onDelete:function(){n(p),l(!1)},instructor:p}))})),_r=n(1222),br={first_name:"",last_name:"",email:"",utorid:""};var gr=Object(o.connect)((function(e){return{instructors:Be(e)}}),{upsertInstructor:Fe})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.instructors,s=e.upsertInstructor,o=r.a.useState(br),c=Object(k.a)(o,2),u=c[0],l=c[1];r.a.useEffect((function(){t||l(br)}),[t]);var d=function(e,t){var n={delayShow:"",immediateShow:""};Wa(e.utorid)&&Wa(e.first_name)&&Wa(e.last_name)||(n.delayShow="A first name, last name, and utorid is required");var a=t.find((function(t){return Wa(t.utorid)===Wa(e.utorid)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another instructor exists with utorid=",e.utorid,":"," ",r.a.createElement("b",null,a.first_name," ",a.last_name))),n}(u,i);return r.a.createElement(lr.a,{show:t,onHide:a},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Add Instructor")),r.a.createElement(lr.a.Body,null,r.a.createElement(cr,{instructor:u,setInstructor:l}),d.immediateShow?r.a.createElement(_r.a,{variant:"danger"},d.immediateShow):null),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){s(u),a()},title:d.delayShow||"Create Instructor",disabled:!!d.delayShow||!!d.immediateShow},"Create Instructor")))})),yr=n(75),Er=n.n(yr);n(1109);function wr(e){if(!e)return e;if("function"===typeof e){var t=e;e=r.a.createElement(t,null)}return r.a.createElement("span",{className:"mr-2"},e)}function Or(e){var t=e.children;return r.a.createElement("div",{className:"page-actions"},r.a.createElement(Aa.a,null,t))}function Sr(e){var t=e.children;return r.a.createElement(Aa.a.Header,null,t)}function jr(e){var t=e.icon,n=void 0===t?null:t,a=e.children,i=e.active,s=e.disabled,o=Object(Ce.a)(e,["icon","children","active","disabled"]),c=wr(n);return s&&(o=Object(l.a)(Object(l.a)({},o),{},{onClick:function(){}})),r.a.createElement(Aa.a.Item,Object.assign({as:"button",className:Ba()({active:i,disabled:s})},o),c,a)}function Cr(e){var t=e.icon,n=void 0===t?null:t,a=e.children,i=e.menu,s=void 0===i?null:i,o=e.active,c=e.disabled,u=void 0!==c&&c,l=Object(Ce.a)(e,["icon","children","menu","active","disabled"]),d=r.a.useState(!1),m=Object(k.a)(d,2),p=m[0],f=m[1],h=r.a.useState(0),v=Object(k.a)(h,2),_=v[0],b=v[1],g=r.a.useRef(null);r.a.useEffect((function(){null!=g&&null!=g.current&&b(g.current.clientHeight)}),[a]);var y=wr(n);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ba()("action-accordion",{dropright:!p})},r.a.createElement("button",Object.assign({className:Ba()("dropdown-item",{active:o,disabled:u})},l),y,a),!u&&r.a.createElement("button",{className:"dropdown-item dropdown-toggle",onClick:function(){return f(!p)}})),r.a.createElement("div",{className:Ba()("action-accordion-item-container",{closed:!p}),style:{height:_}},r.a.createElement("div",{ref:g},s)))}function Ar(e){var t=e.onClick,n=e.disabled,a=void 0!==n&&n;function i(e){t&&t(e)}return r.a.createElement(Cr,{onClick:function(){return i("spreadsheet")},icon:Ga.c,menu:r.a.createElement(r.a.Fragment,null,r.a.createElement(jr,{onClick:function(){return i("spreadsheet")}},"As Spreadsheet"),r.a.createElement(jr,{onClick:function(){return i("csv")}},"As CSV"),r.a.createElement(jr,{onClick:function(){return i("json")}},"As JSON")),disabled:a},"Export")}var Tr=n(81),kr=n.n(Tr),Dr=n(1223),xr=n(1224);function Nr(e){var t=e.dialogOpen,n=e.onCancel,a=e.onClose,i=e.onConfirm,s=e.dialogContent,o=e.onFileChange,c=e.setInProgress,u=e.label,l=void 0===u?"Select a spreadsheet, CSV, or JSON file.":u,d=r.a.useState(l),m=Object(k.a)(d,2),p=m[0],f=m[1],v=r.a.useState(null),g=Object(k.a)(v,2),y=g[0],E=g[1],w=r.a.useState(null),O=Object(k.a)(w,2),S=O[0],j=O[1],C=r.a.useState(!1),A=Object(k.a)(C,2),T=A[0],D=A[1];function x(e){D(e),"function"===typeof c&&c(e)}n instanceof Function||(n=function(){return console.warn("No onCancel function set for dialog")}),r.a.useEffect((function(){S&&o instanceof Function&&o(S)}),[S,o]),r.a.useEffect((function(){if(y){var e=new Uint8Array(y);try{var t=(new TextDecoder).decode(e);return void j({data:JSON.parse(t),fileType:"json"})}catch(r){}try{var n=kr.a.read(e,{type:"array"}),a=n.SheetNames[0];return void j({data:kr.a.utils.sheet_to_json(n.Sheets[a]),fileType:"spreadsheet"})}catch(r){}console.warn("Could not determine file type for",p,y)}}),[y,p]);var N=T?r.a.createElement(ur.a,{animation:"border",size:"sm",className:"mr-1"}):null;return r.a.createElement(lr.a,{show:t,onHide:a,size:"lg",dialogClassName:"wide-modal"},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Import From File")),r.a.createElement(lr.a.Body,null,r.a.createElement(Dr.a,null,r.a.createElement(xr.a,{className:"mb-3"},r.a.createElement(Ia.a,null,r.a.createElement(Pa.a,null,r.a.createElement(Pa.a.File,{label:p,onChange:function(e){var t=e.target.files[0];f(t.name);var n=new FileReader;n.onload=function(e){return E(e.target.result)},n.readAsArrayBuffer(t)},custom:!0})))),r.a.createElement(xr.a,null,r.a.createElement(Ia.a,null,s)))),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{variant:"secondary",onClick:n},"Cancel"),r.a.createElement(h.a,{variant:"primary",onClick:function(){i instanceof Function&&(x(!0),Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(S));case 1:case"end":return e.stop()}}),e)})))().then((function(){x(!1)})).catch(console.error).finally((function(){x(!1),E(null),j(null),f(l)})))}},N,"Confirm")))}function Hr(e){var t=e.onFileChange,n=e.dialogContent,i=e.onConfirm,s=e.setInProgress,o=e.disabled,c=void 0!==o&&o,u=Object(a.useState)(!1),l=Object(k.a)(u,2),d=l[0],m=l[1];function p(){m(!1)}function f(){return(f=Object(b.a)(_.a.mark((function e(){var t=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.apply(void 0,t);case 2:m(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(jr,{icon:Ga.o,onClick:function(){return m(!0)},disabled:c},"Import"),r.a.createElement(Nr,{dialogOpen:d,onCancel:function(){t(null),p()},onClose:p,onFileChange:t,dialogContent:n,onConfirm:function(){return f.apply(this,arguments)},setInProgress:s}))}var Pr=n(36),Ir=n(362),Fr=n(70);function Ur(e,t){var n,a=t.requiredKeys,r=Object(D.a)(e);try{for(r.s();!(n=r.n()).done;){var i,s=n.value,o=Object(D.a)(a);try{for(o.s();!(i=o.n()).done;){var c=i.value;if(null==s[c])throw new Error('Item "'.concat(JSON.stringify(s),'" missing required property "').concat(c,'"'))}}catch(u){o.e(u)}finally{o.f()}}}catch(u){r.e(u)}finally{r.f()}}function Rr(e,t){for(var n in t)t[n]===e&&delete t[n];return t}function Lr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e in t)return t[e];var n=Object(Ir.a)(Object.keys(t)),a=n.get(e,null,.7);if(a){var r=a[0][1];return t[r]}return null}var qr=function(){function e(t){Object(q.a)(this,e),this.keys=t.keys,this.keyMap=Object(l.a)({},t.keyMap);var n,a=Object(D.a)(this.keys);try{for(a.s();!(n=a.n()).done;){var r=n.value;this.keyMap[r]=r}}catch(i){a.e(i)}finally{a.f()}this.unmatchedKeys=Object(l.a)({},this.keyMap),this.empiricalKeyMap={},this.unknownKeys={}}return Object(Pr.a)(e,[{key:"formatRow",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={},a=0,r=Object.entries(e);a<r.length;a++){var i=Object(k.a)(r[a],2),s=i[0],o=i[1];if(s in this.empiricalKeyMap)n[this.empiricalKeyMap[s]]=o;else if(!(s in this.unknownKeys)){var c=Lr(s,this.unmatchedKeys);null!=c?(t&&console.log("Assuming association between spreadsheet column",'"'.concat(s,'"'),"and the key",'"'.concat(c,'"')),this.empiricalKeyMap[s]=c,Rr(c,this.unmatchedKeys),n[c]=o):(t&&console.log("Could not find a key corresponding to spreadsheet column",'"'.concat(s,'"')),this.unknownKeys[s]=!0)}}return n}}]),e}();function Br(e,t){var n=t.find((function(t){return t.utorid===e}));if(n)return n;var a,r={},i=Object(D.a)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value;r["".concat(s.last_name,", ").concat(s.first_name)]=s,r["".concat(s.first_name," ").concat(s.last_name)]=s}}catch(c){i.e(c)}finally{i.f()}if(n=Object(Ir.a)(Object.keys(r)).get(e,null,.7)){var o=n;return Array.isArray(n)&&(o=n[0][1]),r[o]}throw new Error('Could not find a match for "'.concat(e,'"'))}function Mr(e){if("number"===typeof e){var t=Math.round(86400*(e-25569)*1e3);e=new Date(t).toJSON().replace("Z","")}var n=Fr.parseDate(e);try{return n.toJSON().replace(/T.*/,"T00:00:00.000Z")}catch(a){throw new Error('Cannot parse "'.concat(e,'" as date'))}}function Gr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[],requiredKeys:[],dateColumns:[]},n=t.keys,a=t.baseName,r=[];if("json"===e.fileType){(e=e.data)[a]&&(e=e[a]);var i,s=Object(D.a)(e);try{for(s.s();!(i=s.n()).done;){var o,c=i.value,u={},d=Object(D.a)(n);try{for(d.s();!(o=d.n()).done;){var m=o.value;u[m]=c[m]}}catch(_){d.e(_)}finally{d.f()}r.push(u)}}catch(_){s.e(_)}finally{s.f()}}if("spreadsheet"===e.fileType){e=e.data;var p,f=new qr(t),h=Object(D.a)(e);try{for(h.s();!(p=h.n()).done;){var v=p.value;r.push(f.formatRow(v))}}catch(_){h.e(_)}finally{h.f()}}return t.dateColumns&&t.dateColumns.length>0&&(r=r.map((function(e){var n,a=Object(l.a)({},e),r=Object(D.a)(t.dateColumns);try{for(r.s();!(n=r.n()).done;){var i=n.value;null!=a[i]&&(a[i]=Mr(a[i]))}}catch(_){r.e(_)}finally{r.f()}return a}))),Ur(r,t),r}function Wr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a="".concat(n).concat(n?"_":"","export_").concat((new Date).toLocaleDateString("en-CA",{year:"numeric",month:"numeric",day:"numeric"}));if("spreadsheet"===t||"csv"===t){var r=kr.a.utils.book_new(),i=kr.a.utils.aoa_to_sheet(e.toSpreadsheet());kr.a.utils.book_append_sheet(r,i,"Instructors");var s="csv"===t?"csv":"xlsx",o=new File([kr.a.write(r,{type:"array",bookType:s})],"".concat(a,".").concat(s),{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});return o}if("json"===t){var c=new File([JSON.stringify(e.toJson(),null,4)],"".concat(a,".json"),{type:"application/json"});return c}throw new Error('Cannot process data to format "'.concat(t,'"; try "spreadsheet" or "json".'))}var Zr={session:function(e){return{name:e.name,start_date:e.start_date,end_date:e.end_date,rate1:e.rate1,rate2:e.rate2}},contractTemplate:function(e){return{template_name:e.template_name,template_file:e.template_file}},instructor:function(e){return{first_name:e.first_name,last_name:e.last_name,utorid:e.utorid,email:e.email}},position:function(e){return{position_code:e.position_code,position_title:e.position_title,hours_per_assignment:e.hours_per_assignment,start_date:e.start_date,end_date:e.end_date,duties:e.duties,qualifications:e.qualifications,ad_hours_per_assignment:e.ad_hours_per_assignment,ad_num_assignments:e.ad_num_assignments,ad_open_date:e.ad_open_date,ad_close_date:e.ad_close_date,desired_num_assignments:e.desired_num_assignments,current_enrollment:e.current_enrollment,current_waitlisted:e.current_waitlisted,instructors:e.instructors.map((function(e){return e.utorid})),contract_template:e.contract_template.template_name}},wageChunk:function(e){return{start_date:e.start_date,end_date:e.end_date,rate:e.rate,hours:e.hours}},assignment:function(e,t){var n={utorid:e.applicant.utorid,position_code:e.position.position_code};e.contract_override_pdf&&(n.contract_override_pdf=e.contract_override_pdf);var a=e.position;return(e.start_date&&e.start_date!==a.start_date||e.end_date&&e.end_date!==a.end_date)&&(n.start_date=e.start_date||a.start_date,n.end_date=e.end_date||a.end_date),Array.isArray(e.wage_chunks)&&0!==e.wage_chunks.length?t&&function(e,t,n){if(!n||!Array.isArray(e))return!0;if(1===e.length){var a=e[0];if(a.start_date===t.start_date&&a.end_date===t.end_date&&(a.rate===n.rate1||a.rate===n.rate2))return!0}if(2===e.length){var r=Object(k.a)(e,2),i=r[0],s=r[1];if(!i.end_date||!i.end_date||!s.start_date||!s.end_date)return!1;if(i.end_date>s.start_date){var o=i;i=s,s=o}if(i.start_date!==t.start_date||s.end_date!==t.end_date)return!1;if("12-31"===(i.end_date||"").slice(5,10)&&"01-01"===(s.start_date||"").slice(5,10)&&i.rate===n.rate1&&s.rate===n.rate2)return!0}return!1}(e.wage_chunks,a,t)?n.hours=e.hours:n.wage_chunks=e.wage_chunks.map((function(e){return Zr.wageChunk(e)})):n.hours=e.hours,n},applicant:function(e){return{first_name:e.first_name,last_name:e.last_name,utorid:e.utorid,email:e.email,student_number:e.student_number,phone:e.phone}},ddah:function(e){var t=Object(mn.a)(e.duties);return t.sort((function(e,t){return e.order-t.order})),{position_code:e.assignment.position.position_code,applicant:e.assignment.applicant.utorid,duties:t.map((function(e){return{hours:e.hours,description:e.description}}))}}},Yr=function(e,t){var n=(t||{}).id;return null!=n?Object(l.a)({id:n},e):e},Jr=function(e,t){var n=(t||{}).id;return null!=n?Object(l.a)({id:n},e):e},zr=function(e,t){var n=t||{},a=n.id,r=n.instructors,i=n.contractTemplates;if(!Array.isArray(r))throw new Error("You must pass an array of instructors to reconstruct a position");if(!Array.isArray(i))throw new Error("You must pass an array of contract templates to reconstruct a position");var s={position_code:e.position_code,position_title:e.position_title,hours_per_assignment:e.hours_per_assignment,start_date:e.start_date,end_date:e.end_date,duties:e.duties,qualifications:e.qualifications,ad_hours_per_assignment:e.ad_hours_per_assignment,ad_num_assignments:e.ad_num_assignments,ad_open_date:e.ad_open_date,ad_close_date:e.ad_close_date,desired_num_assignments:e.desired_num_assignments,current_enrollment:e.current_enrollment,current_waitlisted:e.current_waitlisted};null!=a&&(s.id=a);var o=i.find((function(t){return t.template_name===e.contract_template}));if(null==o)throw new Error("Couldn't find contract template with name \"".concat(e.contract_template,'"'));s.contract_template=o;var c=e.instructors.map((function(e){var t=r.find((function(t){return t.utorid===e}));if(null==t)throw new Error('Could not find instructor with utorid "'.concat(e,'"'));return t}));return s.instructors=c,s},Kr=function(e,t){var n=t||{},a=n.id,r=n.positions,i=n.applicants,s=n.session;if(!Array.isArray(r))throw new Error("You must pass an array of positions to reconstruct an assignment");if(!Array.isArray(i))throw new Error("You must pass an array of applicants to reconstruct an assignment");if(!s)throw new Error("You must pass a session to reconstruct an assignment");var o={contract_override_pdf:e.contract_override_pdf};null!=a&&(o.id=a),null!=e.hours&&(o.hours=e.hours);var c=r.find((function(t){return t.position_code===e.position_code}));if(null==c)throw new Error('Cannot find position with position code "'.concat(e.position_code,'"'));o.position=c;var u=i.find((function(t){return t.utorid===e.utorid}));if(null==u)throw new Error("Couldn't find applicant with UTORid \"".concat(e.utorid,'"'));if(o.applicant=u,Array.isArray(e.wage_chunks)){var l,d=0,m=Object(D.a)(e.wage_chunks);try{for(m.s();!(l=m.n()).done;){d+=l.value.hours}}catch(p){m.e(p)}finally{m.f()}o.hours=d,o.wage_chunks=e.wage_chunks}return o.start_date=e.start_date||c.start_date,o.end_date=e.end_date||c.end_date,o},Vr=function(e,t){var n=t||{},a=n.id,r=n.assignments;if(!Array.isArray(r))throw new Error("You must pass an array of assignments to reconstruct a ddah");var i=r.find((function(t){return t.applicant.utorid===e.applicant&&t.position.position_code===e.position_code}));if(!i)throw new Error("Cannot find assignment corresponding to '".concat(e.position_code,"' and UTORid '").concat(e.applicant,"'"));var s,o=e.duties.map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{order:t+1})})),c=0,u=Object(D.a)(o);try{for(u.s();!(s=u.n()).done;){c+=s.value.hours}}catch(d){u.e(d)}finally{u.f()}return null==a?{assignment:i,duties:o,total_hours:c,status:null}:{id:a,assignment:i,duties:o,total_hours:c,status:null}},Qr={instructorsListFromField:function(e,t){var n=t.instructors;return Array.isArray(e)?e.map((function(e){var t=n.find((function(t){return t.utorid===e}));if(!t)throw new Error("Cannot find instructor with UTORid ".concat(e));return t})):(e=e.split(";").map((function(e){return e.trim()}))).map((function(e){return Br(e,n)}))},instructor:function(e,t){var n={status:"new",changes:{},obj:null},a=t.instructors.find((function(t){return t.utorid===e.utorid}));if(a){n.status="duplicate";var r=Zr.instructor(a);for(var i in r){var s=i,o=r[s],c=e[s];ei(o,c)||(n.status="modified",n.changes[s]='"'.concat(o,'" \u2192 "').concat(c,'"'))}n.obj=Yr(e,{id:a.id})}else n.obj=Yr(e,{});return n},instructors:function(e,t){return e.map((function(e){return Qr.instructor(e,t)}))},position:function(e,t){var n=t.instructors,a=t.contractTemplates,r={status:"new",changes:{},obj:null},i=t.positions.find((function(t){return t.position_code===e.position_code}));if(i){r.status="duplicate";var s=Zr.position(i);for(var o in s){var c=o,u=s[c],l=e[c];if(!ei(u,l)&&(r.status="modified",r.changes[c]='"'.concat(u,'" \u2192 "').concat(l,'"'),"start_date"!==c&&"end_date"!==c||(r.changes[c]='"'.concat((""+u).slice(0,10),'" \u2192 "').concat((""+l).slice(0,10),'"')),"instructors"===c)){var d=Qr.instructorsListFromField(u,{instructors:n}),m=Qr.instructorsListFromField(l,{instructors:n});r.changes[c]="".concat(d.map((function(e){return"".concat(e.last_name,", ").concat(e.first_name)})).join("; ")," \u2192 ").concat(m.map((function(e){return"".concat(e.last_name,", ").concat(e.first_name)})).join("; "))}}r.obj=zr(e,{id:i.id,instructors:n,contractTemplates:a})}else r.obj=zr(e,{instructors:n,contractTemplates:a});return r},positions:function(e,t){return e.map((function(e){return Qr.position(e,t)}))},assignments:function(e,t){return e.map((function(e){return Qr.assignment(e,t)}))},assignment:function(e,t){var n=t.assignments,a=t.positions,r=t.applicants,i=t.session,s={status:"new",changes:{},obj:null},o=$r(e),c=n.find((function(e){return $r(e)===o}));if(c){s.status="duplicate";var u=Zr.assignment(c,i);for(var l in u){var d=l,m=u[d],p=e[d];if(!ei(m,p)){if(s.status="modified",s.changes[d]='"'.concat(m,'" \u2192 "').concat(p,'"'),"start_date"!==d&&"end_date"!==d||(s.changes[d]='"'.concat((""+m).slice(0,10),'" \u2192 "').concat((""+p).slice(0,10),'"')),"hours"===d&&null==p&&Array.isArray(e.wage_chunks)){var f,h=0,v=Object(D.a)(e.wage_chunks);try{for(v.s();!(f=v.n()).done;){h+=f.value.hours}}catch(_){v.e(_)}finally{v.f()}s.changes[d]=m===h?"".concat(h," (wage chunk change)"):"".concat(m," \u2192 ").concat(h," (wage chunk change)")}"wage_chunks"===d&&(s.changes[d]='"'.concat(JSON.stringify(m),'" \u2192 "').concat(JSON.stringify(p),'"'))}}s.obj=Kr(e,{id:c.id,session:i,positions:a,applicants:r})}else s.obj=Kr(e,{session:i,positions:a,applicants:r});return s},applicants:function(e,t){return e.map((function(e){return Qr.applicant(e,t)}))},applicant:function(e,t){var n={status:"new",changes:{},obj:null},a=t.applicants.find((function(t){return t.utorid===e.utorid}));if(a){n.status="duplicate";var r=Zr.applicant(a);for(var i in r){var s=i,o=r[s],c=e[s];ei(o,c)||(n.status="modified",n.changes[s]='"'.concat(o,'" \u2192 "').concat(c,'"'))}n.obj=Jr(e,{id:a.id})}else n.obj=Jr(e,{});return n},ddahs:function(e,t){return e.map((function(e){return Qr.ddah(e,t)}))},ddah:function(e,t){var n=t.ddahs,a={status:"new",changes:{},obj:null},r=t.assignments,i=n.find((function(t){return t.assignment.position.position_code===e.position_code&&t.assignment.applicant.utorid===e.applicant}));if(i){a.status="duplicate";var s=Zr.ddah(i);for(var o in s){var c=o,u=s[c],l=e[c];ei(u,l)||(a.status="modified",a.changes[c]="duties"===c?'"'.concat(Xr(u),'" \u2192 "').concat(Xr(l),'"'):'"'.concat(u,'" \u2192 "').concat(l,'"'))}a.obj=Vr(e,{id:i.id,assignments:r})}else a.obj=Vr(e,{assignments:r});return a}};function Xr(e){return e.length>0&&null!=e[0].order&&(e=Object(mn.a)(e).sort((function(e,t){return e.order-t.order}))),e.map((function(e){var t=e.hours,n=e.description;return"".concat(t,"h - ").concat(n)})).join("; ")}function $r(e){var t,n;return!function(e){return!!e.position_code}(e)?(t=e.position.position_code,n=e.applicant.utorid):(t=e.position_code,n=e.utorid),"".concat(t,"/").concat(n)}function ei(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("number"===typeof e)return isNaN(e)&&isNaN(t)||e===t;if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;e=Object(mn.a)(e).sort(),t=Object(mn.a)(t).sort();for(var n=0;n<e.length;n++)if(!ei(e[n],t[n]))return!1;return!0}if("object"===typeof e){var a=Object.keys(e).sort();return!!ei(a,Object.keys(t).sort())&&a.every((function(n){return ei(e[n],t[n])}))}return!1}function ti(e){return e.filter((function(e){return"new"===e.status||"modified"===e.status})).map((function(e){return e.obj}))}function ni(){var e=Object(o.useDispatch)(),t=r.a.useState(null),n=Object(k.a)(t,2),a=n[0],i=n[1];return r.a.useEffect((function(){function t(){return(t=Object(b.a)(_.a.mark((function t(){var n,r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(e,t){return Wr({toSpreadsheet:function(){return[["Last Name","First Name","UTORid","email"]].concat(e.map((function(e){return[e.last_name,e.first_name,e.utorid,e.email]})))},toJson:function(){return{instructors:e.map((function(e){return Zr.instructor(e)}))}}},t,"instructors")},i(null),t.next=4,e(Re(n,a));case 4:r=t.sent,Er.a.saveAs(r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}a&&function(){return t.apply(this,arguments)}().catch(console.error)}),[a,e]),r.a.createElement(Ar,{onClick:function(e){i(e)}})}var ai={keys:["first_name","last_name","utorid","email"],keyMap:{"First Name":"first_name","Given Name":"first_name",First:"first_name","Last Name":"last_name",Surname:"last_name","Family Name":"last_name",Last:"last_name"},requiredKeys:["utorid"],primaryKey:"utorid",dateColumns:[],baseName:"instructors"};function ri(e){var t=e.setImportInProgress,n=void 0===t?null:t,a=Object(o.useDispatch)(),i=Object(o.useSelector)(Be),s=r.a.useState(null),c=Object(k.a)(s,2),u=c[0],l=c[1],d=r.a.useState(null),m=Object(k.a)(d,2),p=m[0],f=m[1],h=r.a.useState(null),v=Object(k.a)(h,2),g=v[0],y=v[1],E=r.a.useState(!1),w=Object(k.a)(E,2),O=w[0],S=w[1];function j(){return(j=Object(b.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ti(p),e.next=3,a(Le(t));case 3:l(null);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){u||p&&f(null)}),[p,f,u]),r.a.useEffect((function(){if(u&&!O)try{y(null);var e=Gr(u,ai),t=Qr.instructors(e,{instructors:i});f(t)}catch(n){console.warn(n),y(n)}}),[u,i,O]),r.a.createElement(Hr,{onConfirm:function(){return j.apply(this,arguments)},onFileChange:l,dialogContent:r.a.createElement(ii,{diffed:p,processingError:g}),setInProgress:function(e){S(e),"function"===typeof n&&n(e)}})}var ii=r.a.memo((function(e){var t=e.diffed,n=e.processingError,a=r.a.createElement("p",null,"No data loaded...");if(n)a=r.a.createElement(_r.a,{variant:"danger"},""+n);else if(t){var i=t.filter((function(e){return"new"===e.status})).map((function(e){return e.obj})),s=t.filter((function(e){return"modified"===e.status}));a=0===i.length&&0===s.length?r.a.createElement(_r.a,{variant:"warning"},"No difference between imported instructors and those already on the system."):r.a.createElement(r.a.Fragment,null,i.length>0&&r.a.createElement(_r.a,{variant:"primary"},r.a.createElement("span",{className:"mb-1"},"The following instructors will be"," ",r.a.createElement("strong",null,"added")),r.a.createElement(ir,{instructors:i})),s.length>0&&r.a.createElement(_r.a,{variant:"info"},r.a.createElement("span",{className:"mb-1"},"The following instructors will be"," ",r.a.createElement("strong",null,"modified")),r.a.createElement(sr,{modifiedInstructors:s})))}return a}));function si(e){var t=e.children,n=e.className,a=Object(Ce.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Ba()("page-content",n)},a),t)}function oi(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState(!1),s=Object(k.a)(i,2),o=s[0],c=s[1],u=r.a.useState(!1),l=Object(k.a)(u,2),d=l[0],m=l[1];return r.a.createElement("div",{className:"page-body"},r.a.createElement(Or,null,r.a.createElement(Sr,null,"Available Actions"),r.a.createElement(jr,{icon:r.a.createElement(Ga.h,null),onClick:function(){a(!0)}},"Add Instructor"),r.a.createElement(jr,{icon:r.a.createElement(Ga.n,null),onClick:function(){return c(!o)},active:o},"Delete Instructor"),r.a.createElement(Sr,null,"Import/Export"),r.a.createElement(ri,{setImportInProgress:m}),r.a.createElement(ni,null)),r.a.createElement(si,null,r.a.createElement(gr,{show:n,onHide:function(){a(!1)}}),!d&&r.a.createElement(vr,{inDeleteMode:o})))}function ci(e){var t=Fa(e.session,e.setSession);return r.a.createElement(Pa.a,null,r.a.createElement(Ua,null,t("Session Name (e.g. 2019 Fall)","name")),r.a.createElement(Ua,null,t("Start Date","start_date","date"),t("End Date","end_date","date")),r.a.createElement(Ua,null,t("Rate 1 (pre-January rate)","rate1","number",{step:"0.01",min:0}),t("Rate 2 (post-January rate)","rate2","number",{step:"0.01",min:0})))}var ui={name:"",start_date:"",end_date:"",rate1:"",rate2:""};var li=Object(o.connect)((function(e){return{sessions:oa(e)}}),{upsertSession:aa})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.sessions,s=e.upsertSession,o=r.a.useState(ui),c=Object(k.a)(o,2),u=c[0],l=c[1];r.a.useEffect((function(){t||l(ui)}),[t]);var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};Wa(e.name)&&Wa(e.start_date)&&Wa(e.end_date)||(n.delayShow="A first name, start date, and end date is required");var a=t.find((function(t){return Wa(t.name)===Wa(e.name)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another session exists with name=",e.name)),n}(u,i);return r.a.createElement(lr.a,{show:t,onHide:a},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Add Session")),r.a.createElement(lr.a.Body,null,r.a.createElement(ci,{session:u,setSession:l}),d.immediateShow?r.a.createElement(_r.a,{variant:"danger"},d.immediateShow):null),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){s(u),a()},title:d.delayShow||"Create Session",disabled:!!d.delayShow||!!d.immediateShow},"Create Session")))}));function di(e){function t(){return r.a.createElement("div",{title:e,className:"table-header"},e)}return t.toString=function(){return e},t}function mi(e){var t="Edit ".concat(""+e.column.Header),n=e.upsertSession,a=e.field,i=e.type,s=e.value,o="date"===i;return r.a.createElement(pr,{title:t,value:"date"===i?(s||"").slice(0,10):s||"",onChange:function(t){var r=(e.row.original||e.row._original).id;n(Object(te.a)({id:r},a,t))},type:i},o?Za(s):s)}function pi(e){var t=e.show,n=e.onHide,a=e.onDelete,i=e.session;return r.a.createElement(lr.a,{show:t,onHide:n},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Delete Session")),r.a.createElement(lr.a.Body,null,"Are you sure you want to delete the session"," ",(i||{}).name,"? This action cannot be undone."),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:n,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:a,title:"Delete Session"},"Delete")))}function fi(e){var t=e.inDeleteMode,n=void 0!==t&&t,a=r.a.useState(null),i=Object(k.a)(a,2),s=i[0],c=i[1],u=Object(o.useSelector)(oa),l=Object(o.useDispatch)();function d(e){return l(aa(e))}function m(e,t){return function(n){return r.a.createElement(mi,Object.assign({field:e,upsertSession:d,type:t},n))}}var p=[{Header:r.a.createElement(Ga.n,{className:"delete-row-column-header-icon"}),Cell:function(e){var t=e.row,n=(null===t||void 0===t?void 0:t.original)||{};return r.a.createElement("div",{className:"delete-button-container"},r.a.createElement(Ga.m,{className:"delete-row-button",title:"Delete ".concat(n.name),onClick:function(){c(n)}}))},id:"delete_col",className:"delete-col",show:n,maxWidth:32,resizable:!1},{Header:di("Name"),accessor:"name",Cell:m("name")},{Header:di("Start Date"),accessor:"start_date",Cell:m("start_date","date")},{Header:di("End Date"),accessor:"end_date",Cell:m("end_date","date")},{Header:di("Rate (Pre-January)"),accessor:"rate1",className:"number-cell",Cell:m("rate1")},{Header:di("Rate (Post-January)"),accessor:"rate2",className:"number-cell",Cell:m("rate2")}],f=e.columns,h=void 0===f?p:f;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ar,{columns:h,filterable:!0,data:u}),r.a.createElement(pi,{session:s,show:!!s,onHide:function(){return c(null)},onDelete:Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(ra(s));case 2:c(null);case 3:case"end":return e.stop()}}),e)})))}))}function hi(e){var t=e.extraText,n=void 0===t?"":t;return r.a.createElement(_r.a,{variant:"info"},"There is no active session selected. ",n)}function vi(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState(!1),s=Object(k.a)(i,2),c=s[0],u=s[1],l=Object(o.useSelector)(ca),d=r.a.createElement(r.a.Fragment,null,"There is currently ",r.a.createElement("b",{className:"text-primary"},"no active session")," ","selected. In order to setup contract templates or create positions and offers, you must select an active session.");return l&&(d=r.a.createElement(r.a.Fragment,null,"The current active session is"," ",r.a.createElement("b",{className:"text-primary"},l.name),". When setting up contract templates or creating positions and offers, they will be attached to the ",r.a.createElement("i",null,l.name)," ","session.")),r.a.createElement("div",{className:"page-body"},r.a.createElement(Or,null,r.a.createElement(Sr,null,"Available Actions"),r.a.createElement(jr,{icon:r.a.createElement(Ga.h,null),onClick:function(){a(!0)}},"Add Session"),r.a.createElement(jr,{icon:r.a.createElement(Ga.n,null),onClick:function(){return u(!c)},active:c},"Delete Session")),r.a.createElement(si,null,r.a.createElement("h3",null,"Session Management and Creation"),r.a.createElement("p",null,"From this page, you can manage an existing session or create a new session."),r.a.createElement("p",null,d),r.a.createElement("h5",null,"Existing Sessions"),r.a.createElement(li,{show:n,onHide:function(){a(!1)}}),r.a.createElement(fi,{inDeleteMode:c})))}var _i=n(86),bi=(n(350),{position_code:"",position_title:"",hours_per_assignment:0,contract_template:{},duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",instructors:[]});function gi(e){var t=e.position,n=e.setPosition,a=e.instructors,i=void 0===a?[]:a,s=e.contractTemplates,o=void 0===s?[]:s,c=e.defaultContractTemplate,u=void 0===c?{}:c,d=Object(l.a)(Object(l.a)({},bi),t);var m=Fa(d,n);return r.a.createElement(Pa.a,null,r.a.createElement(Ua,null,m("Position Code (e.g. MAT135H1F)","position_code"),m("Course Title","position_title")),r.a.createElement(Ua,null,m("Start Date*","start_date","date"),m("End Date*","end_date","date"),r.a.createElement("p",null,"If blank, the session start date and end date will be used.")),r.a.createElement(Ua,null,m("Hours per Assignment","hours_per_assignment","number")),r.a.createElement(Pa.a.Group,null,r.a.createElement(Pa.a.Label,null,"Instructors"),r.a.createElement(_i.a,{id:"instructors-input",ignoreDiacritics:!0,multiple:!0,placeholder:"Instructors...",labelKey:function(e){return"".concat(e.first_name," ").concat(e.last_name)},selected:d.instructors,options:i,onChange:function(e){n(Object(l.a)(Object(l.a)({},d),{},{instructors:e}))}})),r.a.createElement(Pa.a.Group,null,r.a.createElement(Pa.a.Label,null,"Contract Template (which offer template will be used)"),r.a.createElement(_i.a,{id:"instructors-input",ignoreDiacritics:!0,multiple:!0,placeholder:"Contract template...",labelKey:function(e){return"".concat(e.template_name)},selected:[d.contract_template],options:o,onChange:function(e){var t=e[e.length-1]||u;n(Object(l.a)(Object(l.a)({},d),{},{contract_template:t}))}})),r.a.createElement("h3",null,"Ad-related Info"),r.a.createElement(Ua,null,m("Duties","duties")),r.a.createElement(Ua,null,m("Qualifications","qualifications")),r.a.createElement("h3",null,"Admin Info"),r.a.createElement(Ua,null,m("Current Enrollment","current_enrollment","number"),m("Waitlist","current_waitlisted","number"),m("Desired Number of Assignments","desired_num_assignments","number")))}var yi={position_code:"",position_title:"",hours_per_assignment:0,contract_template_id:null,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",instructors:[]};var Ei=Object(o.connect)((function(e){return{positions:yt(e),instructors:Be(e),contractTemplates:nt(e)}}),{upsertPosition:ft})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.positions,s=e.upsertPosition,o=e.instructors,c=e.contractTemplates,u=r.a.useState(yi),l=Object(k.a)(u,2),d=l[0],m=l[1];r.a.useEffect((function(){t||m(yi)}),[t]),r.a.useEffect((function(){var e=c.find((function(e){return"standard"===e.template_name.toLowerCase()}))||c.find((function(e){return"default"===e.template_name.toLowerCase()}))||c.find((function(e){return e.template_name.toLowerCase().includes("standard")}))||c.find((function(e){return e.template_name.toLowerCase().includes("default")}))||c[0];e&&(yi.contract_template=e,yi.contract_template_id=e.id)}),[c]);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};Wa(e.position_code)||(n.delayShow="A position code is required");var a=t.find((function(t){return Wa(t.position_code)===Wa(e.position_code)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another position exists with name=",e.position_code)),n}(d,i);return r.a.createElement(lr.a,{show:t,onHide:a},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Add Position")),r.a.createElement(lr.a.Body,null,r.a.createElement(gi,{position:d,setPosition:m,instructors:o,contractTemplates:c,defaultContractTemplate:yi.contract_template}),p.immediateShow?r.a.createElement(_r.a,{variant:"danger"},p.immediateShow):null),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){s(d),a()},title:p.delayShow||"Create Position",disabled:!!p.delayShow||!!p.immediateShow},"Create Position")))})),wi=[{Header:di("Position Code"),accessor:"position_code"},{Header:di("Position Title"),accessor:"position_title"},{Header:di("Hours"),accessor:"hours_per_assignment",maxWidth:64,className:"number-cell"},{Header:di("Start"),accessor:"start_date",Cell:function(e){return Za(e.value)}},{Header:di("End"),accessor:"end_date",Cell:function(e){return Za(e.value)}},{Header:di("Instructors"),accessor:"instructors",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.value.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(e.first_name," ").concat(e.last_name);return r.a.createElement(Ja.a,{variant:"secondary",className:"mr-1",key:t},t)})))}},{Header:di("Enrolled"),accessor:"current_enrollment",maxWidth:80},{Header:di("Waitlist"),accessor:"current_waitlisted",maxWidth:90},{Header:di("Contract Template"),accessor:"contract_template.template_name"}];function Oi(e){var t=e.modifiedPositions;return r.a.createElement(Si,{positions:t,columns:La(wi)})}function Si(e){var t=e.positions,n=e.columns,a=void 0===n?wi:n;return r.a.createElement(ar,{columns:a,data:t,filterable:!0})}function ji(e){return e.map((function(e){return"".concat(e.last_name,", ").concat(e.first_name)})).sort().join(";")}function Ci(e){var t=e.position,n=e.show,a=e.onHide,i=e.onChange,s=t.instructors,c=Object(o.useSelector)(Be),u=r.a.useState(s),l=Object(k.a)(u,2),d=l[0],m=l[1],p=r.a.useState(!1),f=Object(k.a)(p,2),v=f[0],g=f[1];function y(){m(s),a()}var E=v?r.a.createElement(ur.a,{animation:"border",size:"sm",className:"mr-1"}):null,w=ji(d)==ji(s)?null:r.a.createElement("span",null,"Change from"," ",r.a.createElement("span",{className:"field-dialog-formatted-name"},s.map((function(e){return"".concat(e.first_name," ").concat(e.last_name)})).join(", "))," ","to"," ",r.a.createElement("span",{className:"field-dialog-formatted-name"},d.map((function(e){return"".concat(e.first_name," ").concat(e.last_name)})).join(", ")));return r.a.createElement(lr.a,{show:n,onHide:y},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Edit Instructors for ",t.position_code)),r.a.createElement(lr.a.Body,null,r.a.createElement(_i.a,{id:"instructors-input",ignoreDiacritics:!0,multiple:!0,placeholder:"Instructors...",labelKey:function(e){return"".concat(e.first_name," ").concat(e.last_name)},selected:d,options:c,onChange:m})," ",w),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:y,variant:"outline-secondary"},"Cancel"),r.a.createElement(h.a,{onClick:function(){function e(){return(e=Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ji(d)===ji(s)){e.next=4;break}return g(!0),e.next=4,i(d,s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().finally((function(){g(!1)}))}},E,"Save")))}function Ai(e){var t="Edit ".concat(e.column.Header),n=e.upsertPosition,a=e.field,i=e.type,s=e.value,o="date"===i;return r.a.createElement(pr,{title:t,value:"date"===i?(s||"").slice(0,10):s||"",onChange:function(t){var r=(e.row.original||e.row._original).id;n(Object(te.a)({id:r},a,t))},type:i},o?Za(s):s)}function Ti(e){var t=e.row,n=t.original||t._original,a=r.a.useState(!1),i=Object(k.a)(a,2),s=i[0],c=i[1],u=Object(o.useDispatch)();return r.a.createElement("div",{className:"show-on-hover-wrapper"},n.instructors.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(e.first_name," ").concat(e.last_name);return r.a.createElement(Ja.a,{variant:"secondary",className:"mr-1",key:t},t)})),r.a.createElement(mr,{title:"Edit the instructors for this position",hidden:!1,onClick:function(){return c(!0)}}),r.a.createElement(Ci,{position:n,show:s,onHide:function(){return c(!1)},onChange:function(){var e=Object(b.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(ft({id:n.id,instructors:t}));case 2:c(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))}function ki(e){var t=e.show,n=e.onHide,a=e.onDelete,i=e.position;return r.a.createElement(lr.a,{show:t,onHide:n},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Delete Session")),r.a.createElement(lr.a.Body,null,"Are you sure you want to delete the position"," ",i?i.position_code:null,"? This action cannot be undone."),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:n,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:a,title:"Delete Position"},"Delete")))}function Di(e){var t=e.inDeleteMode,n=void 0!==t&&t,a=Object(o.useSelector)(yt),i=Object(o.useSelector)(sn),s=r.a.useState(null),c=Object(k.a)(s,2),u=c[0],l=c[1],d=Object(o.useDispatch)();function m(e){return d(ft(e))}var p=i.reduce((function(e,t){var n=t.position.position_code;return e[n]=e[n]||0,e[n]+=1,e}),{});function f(e,t){return function(n){return r.a.createElement(Ai,Object.assign({field:e,upsertPosition:m,type:t},n))}}var h=[{Header:r.a.createElement(Ga.n,{className:"delete-row-column-header-icon"}),Cell:function(e){var t=e.row,n=t.original||t._original;return p[n.position_code]?r.a.createElement("div",{className:"delete-button-container"},r.a.createElement(Ga.f,{className:"delete-row-button disabled",title:"This position has an associated assignment and so cannot be deleted."})):r.a.createElement("div",{className:"delete-button-container"},r.a.createElement(Ga.m,{className:"delete-row-button",title:"Delete ".concat(n.last_name,", ").concat(n.first_name),onClick:function(){l(n)}}))},id:"delete_col",className:"delete-col",show:n,maxWidth:32,resizable:!1},{Header:di("Position Code"),accessor:"position_code",Cell:f("position_code")},{Header:di("Position Title"),accessor:"position_title",Cell:f("position_title")},{Header:di("Start"),accessor:"start_date",Cell:f("start_date","date")},{Header:di("End"),accessor:"end_date",Cell:f("end_date","date")},{Header:di("Instructor(s)"),id:"instructors",accessor:function(e){return ji(e.instructors)},Cell:Ti},{Header:di("Hours/Assignment"),accessor:"hours_per_assignment",maxWidth:64,className:"number-cell",Cell:f("hours_per_assignment")},{Header:di("Enrolled"),accessor:"current_enrollment",className:"number-cell",maxWidth:80,Cell:f("current_enrollment")},{Header:di("Waitlist"),accessor:"current_waitlisted",className:"number-cell",maxWidth:50,Cell:f("current_waitlisted","number")},{Header:di("Desired Num Assignments"),accessor:"desired_num_assignments",className:"number-cell",maxWidth:50,Cell:f("desired_num_assignments")},{Header:di("Current Num Assignments"),id:"current_num_assignments",className:"number-cell",accessor:function(e){return p[e.position_code]||""},maxWidth:50},{Header:di("Contract Template"),accessor:"contract_template.template_name"}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Si,{positions:a,columns:h}),r.a.createElement(ki,{position:u,show:!!u,onHide:function(){return l(null)},onDelete:Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(ht(u));case 2:l(null);case 3:case"end":return e.stop()}}),e)})))}))}function xi(e){var t=e.disabled,n=Object(o.useDispatch)(),a=r.a.useState(null),i=Object(k.a)(a,2),s=i[0],c=i[1];return r.a.useEffect((function(){function e(){return(e=Object(b.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e,t){return Wr({toSpreadsheet:function(){return[["Position Code","Position Title","Start Date","End Date","Hours Per Assignment","Number of Assignments","Contract Template","Instructors","Duties","Qualifications","Current Enrollment","Current Waitlist"]].concat(e.map((function(e){return[e.position_code,e.position_title,e.start_date&&new Date(e.start_date).toJSON().slice(0,10),e.end_date&&new Date(e.end_date).toJSON().slice(0,10),e.hours_per_assignment,e.desired_num_assignments,e.contract_template.template_name,e.instructors.map((function(e){return"".concat(e.last_name,", ").concat(e.first_name)})).join("; "),e.duties||"",e.qualifications||"",e.current_enrollment,e.current_waitlisted]})))},toJson:function(){return{positions:e.map((function(e){return Zr.position(e)}))}}},t,"positions")},c(null),e.next=4,n(vt(t,s));case 4:a=e.sent,Er.a.saveAs(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s&&function(){return e.apply(this,arguments)}().catch(console.error)}),[s,n]),r.a.createElement(Ar,{onClick:function(e){c(e)},disabled:t})}var Ni={keys:["position_code","position_title","start_date","end_date","hours_per_assignment","desired_num_assignments","contract_template","instructors","duties","qualifications","current_enrollment","current_waitlisted","ad_open_date","ad_close_date","ad_hours_per_assignment","ad_num_assignments"],keyMap:{"Position Code":"position_code","Course Code":"position_code","Course Name":"position_code","Position Title":"position_title","Start Date":"start_date",Start:"start_date","End Date":"end_date",End:"end_date","Hours Per Assignment":"hours_per_assignment","Number of Assignments":"desired_num_assignments","Contract Template":"contract_template","Current Enrollment":"current_enrollment","Current Waitlist":"current_waitlisted"},dateColumns:["start_date","end_date"],requiredKeys:["position_code","contract_template"],primaryKey:"position_code",baseName:"positions"};function Hi(e){var t=e.disabled,n=e.setImportInProgress,a=void 0===n?null:n,i=Object(o.useDispatch)(),s=Object(o.useSelector)(yt),c=Object(o.useSelector)(Be),u=Object(o.useSelector)(nt),l=r.a.useState(null),d=Object(k.a)(l,2),m=d[0],p=d[1],f=r.a.useState(null),h=Object(k.a)(f,2),v=h[0],g=h[1],y=r.a.useState(null),E=Object(k.a)(y,2),w=E[0],O=E[1],S=r.a.useState(!1),j=Object(k.a)(S,2),C=j[0],A=j[1];function T(){return(T=Object(b.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ti(v),e.next=3,i(_t(t));case 3:p(null);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){m||v&&g(null)}),[v,g,m]),r.a.useEffect((function(){if(m&&!C)try{O(null);var e,t=Gr(m,Ni),n=Object(D.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.instructors=Qr.instructorsListFromField(a.instructors||[],{instructors:c}).map((function(e){return e.utorid}))}}catch(i){n.e(i)}finally{n.f()}var r=Qr.positions(t,{positions:s,instructors:c,contractTemplates:u});g(r)}catch(o){console.warn(o),O(o)}}),[m,s,u,c,C]),r.a.createElement(Hr,{onConfirm:function(){return T.apply(this,arguments)},onFileChange:p,dialogContent:r.a.createElement(Pi,{diffed:v,processingError:w}),setInProgress:function(e){A(e),"function"===typeof a&&a(e)},disabled:t})}var Pi=r.a.memo((function(e){var t=e.diffed,n=e.processingError,a=r.a.createElement("p",null,"No data loaded...");if(n)a=r.a.createElement(_r.a,{variant:"danger"},""+n);else if(t){var i=t.filter((function(e){return"new"===e.status})).map((function(e){return e.obj})),s=t.filter((function(e){return"modified"===e.status}));a=0===i.length&&0===s.length?r.a.createElement(_r.a,{variant:"warning"},"No difference between imported positions and those already on the system."):r.a.createElement(r.a.Fragment,null,i.length>0&&r.a.createElement(_r.a,{variant:"primary"},r.a.createElement("span",{className:"mb-1"},"The following positions will be"," ",r.a.createElement("strong",null,"added")),r.a.createElement(Si,{positions:i})),s.length>0&&r.a.createElement(_r.a,{variant:"info"},r.a.createElement("span",{className:"mb-1"},"The following positions will be"," ",r.a.createElement("strong",null,"modified")),r.a.createElement(Oi,{modifiedPositions:s})))}return a}));function Ii(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState(!1),s=Object(k.a)(i,2),c=s[0],u=s[1],l=Object(o.useSelector)(ca),d=r.a.useState(!1),m=Object(k.a)(d,2),p=m[0],f=m[1];return r.a.createElement("div",{className:"page-body"},r.a.createElement(Or,null,r.a.createElement(Sr,null,"Available Actions"),r.a.createElement(jr,{icon:r.a.createElement(Ga.h,null),onClick:function(){a(!0)},disabled:!l},"Add Position"),r.a.createElement(jr,{icon:r.a.createElement(Ga.n,null),onClick:function(){return u(!c)},active:c,disabled:!l},"Delete Position"),r.a.createElement(Sr,null,"Import/Export"),r.a.createElement(Hi,{disabled:!l,setImportInProgress:f}),r.a.createElement(xi,{disabled:!l})),r.a.createElement(si,null,l?null:r.a.createElement(hi,{extraText:"To view or modify positions, you must select a session."}),r.a.createElement(Ei,{show:n,onHide:function(){a(!1)}}),!p&&r.a.createElement(Di,{inDeleteMode:c})))}var Fi=[{Header:"Position",accessor:"position_code"},{Header:"Title",accessor:"position_title"},{Header:"Start",accessor:"start_date",Cell:function(e){return Za(e.value)}},{Header:"End",accessor:"end_date",Cell:function(e){return Za(e.value)}},{Header:"Coordinator(s)",accessor:"instructors",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.value.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(e.first_name," ").concat(e.last_name);return r.a.createElement(Ja.a,{variant:"secondary",className:"mr-1",key:t},t)})))}},{Header:"Enrolled",accessor:"current_enrollment",maxWidth:80},{Header:"Waitlist",accessor:"current_waitlisted",maxWidth:90},{Header:"Contract Type",accessor:"contract_template.template_name",maxWidth:120}];function Ui(){var e=Object(o.useSelector)(ca),t=r.a.createElement("div",null,r.a.createElement("h4",{className:"text-black"},"You have not selected a session"),r.a.createElement("h5",{className:"text-warning"},"Select a session to view Positions"));return e&&(t=r.a.createElement("h4",null,"Positions for Session"," ",r.a.createElement("span",{className:"text-primary"},e.name))),r.a.createElement("div",{className:"page-body"},r.a.createElement(si,null,t,r.a.createElement("p",null,"Every ",r.a.createElement("i",null,"position")," corresponds to a particular job/contract type. If a course has multiple types of TA jobs, that course might be associated with multiple positions."),r.a.createElement(Di,{columns:Fi})))}var Ri=function(e){return e.ui.offerTable};function Li(e){var t="Edit ".concat(""+e.column.Header),n=e.upsertApplicant,a=e.field,i=e.row.original||e.row._original;return r.a.createElement(pr,{title:t,value:e.value||"",onChange:function(e){var t=i.applicant.id;n(Object(te.a)({id:t},a,e))}},e.value)}function qi(e){var t,n=e.row,a=n.original||n._original,i=(t=a.active_offer_status||"")?t.charAt(0).toUpperCase()+t.slice(1):"",s=a.active_offer_url_token,o=null;if(s){var c="/public/contracts/".concat(s,".pdf");o=r.a.createElement(h.a,{href:Ya(c),variant:"light",size:"sm",className:"mr-2 py-0",title:"Download offer PDF"},r.a.createElement(Ga.i,null))}return r.a.createElement(r.a.Fragment,null,o,i)}function Bi(e){var t="Edit ".concat(""+e.column.Header),n=e.upsertAssignment,a=e.field,i=e.row.original||e.row._original,s=i.active_offer_status;return r.a.createElement(pr,{title:t,value:e.value||"",onChange:function(e){var t=i.id;n(Object(te.a)({id:t},a,e))},editable:!s||["provisional","withdrawn","No Contract"].includes(s)},e.value)}var Mi=Object(o.connect)((function(e){return{data:sn(e).map((function(e){var t=e.active_offer_status,n=Object(Ce.a)(e,["active_offer_status"]);return t?e:Object(l.a)({active_offer_status:"No Contract"},n)})),selected:Ri(e).selectedAssignmentIds}}),{upsertApplicant:ye,upsertAssignment:Xt,setSelected:function(e){return{type:"SET_SELECTED_ROWS",payload:e}}})((function(e){var t=e.upsertApplicant,n=e.upsertAssignment,a=e.data,i=e.selected,s=e.setSelected,o=Object(Ce.a)(e,["upsertApplicant","upsertAssignment","data","selected","setSelected"]),c=r.a.useCallback(s,[]);function u(e){return function(n){return r.a.createElement(Li,Object.assign({field:e,upsertApplicant:t},n))}}var l,d=[{Header:"Last Name",accessor:"applicant.last_name",Cell:u("last_name")},{Header:"First Name",accessor:"applicant.first_name",Cell:u("first_name")},{Header:"Email",accessor:"applicant.email",Cell:u("email")},{Header:"Position",accessor:"position.position_code"},{Header:"Hours",accessor:"hours",className:"number-cell",maxWidth:70,Cell:(l="hours",function(e){return r.a.createElement(Bi,Object.assign({field:l,upsertAssignment:n},e))})},{Header:"Status",id:"status",accessor:function(e){return"No Contract"===e.active_offer_status?null:e.active_offer_status},Cell:qi},{Header:"Date",accessor:"active_offer_recent_activity_date",Cell:function(e){var t=e.value;return t?Za(t):null},maxWidth:120},{Header:"Nag Count",accessor:"active_offer_nag_count",Cell:function(e){var t=e.value;return t||null},maxWidth:30}];return r.a.createElement(ar,Object.assign({filterable:!0,columns:d,data:a,selected:i,setSelected:c},o))}));var Gi={note:"",position:{id:null},position_id:null,applicant:{id:null},applicant_id:null};function Wi(e){var t=e.assignment,n=e.setAssignment,a=e.applicants,i=e.positions,s=Object(l.a)(Object(l.a)({},Gi),t);r.a.useEffect((function(){if(s.start_date&&s.end_date){var e=Object(We.k)(s.start_date,s.end_date);if(1!==e.length){if(null==s.wage_chunks||!function(e){if(!Array.isArray(e.wage_chunks))return!0;var t,n=0,a=Object(D.a)(e.wage_chunks);try{for(a.s();!(t=a.n()).done;){n+=t.value.hours}}catch(r){a.e(r)}finally{a.f()}return n===e.hours}(s)){var t=e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{hours:s.hours/2})}));n(Object(l.a)(Object(l.a)({},s),{},{wage_chunks:t}))}}else s.wage_chunks&&n(Object(l.a)(Object(l.a)({},s),{},{wage_chunks:null}))}else s.wage_chunks&&n(Object(l.a)(Object(l.a)({},s),{},{wage_chunks:null}))}),[s,n]);var o=Fa(s,n),c=null,u=null;if(null!=s.wage_chunks){var d=s.wage_chunks;c=r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,null,"F Hours"),r.a.createElement(Pa.a.Control,{type:"number",title:"The number of pre-January hours",value:d[0].hours,onChange:function(e){var t=Math.min(Math.max(Number(e.target.value),0),s.hours);n(Object(l.a)(Object(l.a)({},s),{},{wage_chunks:[Object(l.a)(Object(l.a)({},d[0]),{},{hours:t}),Object(l.a)(Object(l.a)({},d[1]),{},{hours:s.hours-t})]}))}})),u=r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,null,"S Hours"),r.a.createElement(Pa.a.Control,{type:"number",title:"The number of post-January hours. This value cannot be set directly. You must set the number of pre-January hours.",disabled:!0,value:d[1].hours}))}return r.a.createElement(Pa.a,null,r.a.createElement(Ua,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,null,"Position"),r.a.createElement(_i.a,{id:"position-input",ignoreDiacritics:!0,placeholder:"Position...",multiple:!0,labelKey:function(e){return"".concat(e.position_code," (").concat(e.position_title,")")},selected:null==s.position.id?[]:[s.position],options:i,onChange:function(e){var t=e[e.length-1]||{id:null};n(Object(l.a)(Object(l.a)({},s),{},{position:t,position_id:t.id,hours:t.hours_per_assignment,start_date:t.start_date,end_date:t.end_date}))}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,null,"Applicant"),r.a.createElement(_i.a,{id:"applicant-input",ignoreDiacritics:!0,placeholder:"Applicant...",multiple:!0,labelKey:function(e){return"".concat(e.first_name," ").concat(e.last_name)},selected:null==s.applicant.id?[]:[s.applicant],options:a,onChange:function(e){var t=e[e.length-1]||{id:null};n(Object(l.a)(Object(l.a)({},s),{},{applicant:t,applicant_id:t.id}))}}))),r.a.createElement(Ua,null,o("Hours","hours","number")),r.a.createElement("h4",null,"Optional Settings"),r.a.createElement(Ua,null,o("Start Date","start_date","date"),o("End Date","end_date","date")),r.a.createElement(Ua,null,c,u))}var Zi={position:{id:null},applicant:{id:null},position_id:-1,applicant_id:-1};var Yi=Object(o.connect)((function(e){return{positions:yt(e),applicants:je(e),assignments:sn(e)}}),{upsertAssignment:Xt})((function(e){var t=e.show,n=e.onHide,a=e.positions,i=e.applicants,s=e.assignments,o=e.upsertAssignment,c=r.a.useState(Zi),u=Object(k.a)(c,2),l=u[0],d=u[1],m=r.a.useState(!1),p=Object(k.a)(m,2),f=p[0],v=p[1];function g(){return(g=Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,o(l);case 4:return e.prev=4,v(!1),e.finish(4);case 7:n();case 8:case"end":return e.stop()}}),e,null,[[1,,4,7]])})))).apply(this,arguments)}r.a.useEffect((function(){t||d(Zi)}),[t]);var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};Wa(e.position_id)&&Wa(e.applicant_id)||(n.delayShow="A position and applicant is required");var a=t.find((function(t){return Wa((t.position||{}).id)===Wa((e.position||{}).id)&&Wa((t.applicant||{}).id)===Wa((e.applicant||{}).id)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another assignment exists with"," ",r.a.createElement("b",null,"applicant=",e.applicant.first_name," ",e.applicant.last_name)," ","and ",r.a.createElement("b",null,"position=",e.position.position_code))),n}(l,s),E=f?r.a.createElement(ur.a,{animation:"border",size:"sm",className:"mr-1"}):null;return r.a.createElement(lr.a,{show:t,onHide:n},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Add Assignment")),r.a.createElement(lr.a.Body,null,r.a.createElement(Wi,{positions:a,applicants:i,assignment:l,setAssignment:d}),!f&&y.immediateShow?r.a.createElement(_r.a,{variant:"danger"},y.immediateShow):null),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:n,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){return g.apply(this,arguments)},title:y.delayShow||"Create Position",disabled:!!y.delayShow||!!y.immediateShow},E,"Create Assignment")))}));function Ji(e){var t=e.wageChunks;return r.a.createElement("table",{className:"wagechunk-details-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Hours"),r.a.createElement("th",null,"Rate"),r.a.createElement("th",null,"Start Date"),r.a.createElement("th",null,"End Date"))),r.a.createElement("tbody",null,(t||[]).map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.hours),r.a.createElement("td",null,e.rate),r.a.createElement("td",null,Za(e.start_date||"")),r.a.createElement("td",null,Za(e.end_date||"")))}))))}function zi(e){var t=e.assignmentId,n=Object(o.useSelector)(sn).find((function(e){return e.id===t})),a=Object(o.useDispatch)();return r.a.useEffect((function(){(null===n||void 0===n?void 0:n.wage_chunks)||a(Lt(n))}),[n,a]),n?r.a.createElement("table",{className:"assignment-details-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Position"),r.a.createElement("td",null,n.position.position_code," ",n.position.position_title)),r.a.createElement("tr",null,r.a.createElement("th",null,"Applicant Name"),r.a.createElement("td",null,n.applicant.last_name,","," ",n.applicant.first_name)),r.a.createElement("tr",null,r.a.createElement("th",null,"Total Hours"),r.a.createElement("td",null,n.hours)),r.a.createElement("tr",null,r.a.createElement("th",null,"Offer Status"),r.a.createElement("td",null,n.active_offer_status||"No Offer")),r.a.createElement("tr",null,r.a.createElement("th",null,"Pay Description"),r.a.createElement("td",null,n.wage_chunks?r.a.createElement(Ji,{wageChunks:n.wage_chunks}):r.a.createElement(ur.a,{animation:"border",size:"sm",className:"mr-1"}))))):r.a.createElement("div",null,'No Assignment found with ID "',t,'"')}function Ki(){var e=Object(o.useSelector)(sn),t=Object(o.useSelector)(Ri).selectedAssignmentIds,n=e.filter((function(e){return t.includes(e.id)})),a=r.a.useState(!1),i=Object(k.a)(a,2),s=i[0],c=i[1];n.sort((function(e,t){var n="".concat(e.position.position_code," ").concat(e.applicant.last_name," ").concat(e.applicant.first_name),a="".concat(t.position.position_code," ").concat(t.applicant.last_name," ").concat(t.applicant.first_name);return n===a?0:n>a?1:-1}));var u=r.a.createElement(_r.a,{variant:"info"},"There are no selected assignments. You must select assignments to see their details.");n.length>0&&(u=n.map((function(e,t){var n=0===t?null:r.a.createElement("hr",null);return r.a.createElement(r.a.Fragment,{key:t},n,r.a.createElement(zi,{assignmentId:e.id,key:t}))})));var l=0===t.length;return r.a.createElement(r.a.Fragment,null,r.a.createElement(jr,{icon:Ga.j,onClick:function(){return c(!0)},title:l?"You must select an assignment to view its details":"View details of selected assignment(s)",disabled:l},"Assignment Details"),r.a.createElement(lr.a,{show:s,onHide:function(){return c(!1)},size:"lg"},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Assignment Details")),r.a.createElement(lr.a.Body,null,u),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{variant:"light",onClick:function(){return c(!1)}},"Close"))))}var Vi={canCreate:function(e){return null==e.active_offer_status||"withdrawn"===e.active_offer_status},canEmail:function(e){return null!=e.active_offer_status},canNag:function(e){return"pending"===e.active_offer_status},canWithdraw:function(e){return null!=e.active_offer_status},canAccept:function(e){return null!=e.active_offer_status},canReject:function(e){return null!=e.active_offer_status}};var Qi=Object(o.connect)((function(e){var t=Ri(e).selectedAssignmentIds;return{assignments:sn(e).filter((function(e){return t.includes(e.id)}))}}),{offerForAssignmentCreate:ga,offerForAssignmentEmail:ya,offerForAssignmentNag:Ea,offerForAssignmentWithdraw:ba,setOfferForAssignmentAccepted:va,setOfferForAssignmentRejected:_a})((function(e){for(var t=e.assignments,n=e.offerForAssignmentCreate,a=e.offerForAssignmentEmail,i=e.offerForAssignmentNag,s=e.offerForAssignmentWithdraw,o=e.setOfferForAssignmentAccepted,c=e.setOfferForAssignmentRejected,u={},l=0,d=["canCreate","canEmail","canNag","canWithdraw","canAccept","canReject"];l<d.length;l++){var m=d[l];u[m]=0!==t.length&&t.every(Vi[m])}return r.a.createElement(r.a.Fragment,null,r.a.createElement(jr,{icon:r.a.createElement(Ga.q,null),onClick:function(){var e,a=Object(D.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;n(r)}}catch(i){a.e(i)}finally{a.f()}},disabled:!u.canCreate},"Create Offer"),r.a.createElement(jr,{icon:r.a.createElement(Ga.r,null),onClick:function(){var e,n=Object(D.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;s(a)}}catch(r){n.e(r)}finally{n.f()}},disabled:!u.canWithdraw},"Withdraw Offer"),r.a.createElement(jr,{icon:r.a.createElement(Ga.e,null),onClick:function(){var e,n=Object(D.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;a(r)}}catch(i){n.e(i)}finally{n.f()}},disabled:!u.canEmail},"Email Offer"),r.a.createElement(jr,{icon:r.a.createElement(Ga.p,null),onClick:function(){var e,n=Object(D.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;i(a)}}catch(r){n.e(r)}finally{n.f()}},disabled:!u.canNag},"Nag Offer"),r.a.createElement(jr,{icon:r.a.createElement(Ga.b,null),onClick:function(){var e,n=Object(D.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;o(a)}}catch(r){n.e(r)}finally{n.f()}},disabled:!u.canAccept},"Set as Accepted"),r.a.createElement(jr,{icon:r.a.createElement(Ga.a,null),onClick:function(){var e,n=Object(D.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;c(a)}}catch(r){n.e(r)}finally{n.f()}},disabled:!u.canReject},"Set as Rejected"))})),Xi=[{Header:"Last Name",accessor:"applicant.last_name"},{Header:"First Name",accessor:"applicant.first_name"},{Header:"Position Code",accessor:"position.position_code"},{Header:"Hours",accessor:"hours",className:"number-cell"},{Header:"Start",accessor:"start_date",Cell:function(e){return Za(e.value)||""}},{Header:"End",accessor:"end_date",Cell:function(e){return Za(e.value)||""}}];function $i(e){var t=e.modifiedAssignments;return r.a.createElement(es,{assignments:t,columns:La(Xi)})}function es(e){var t=e.assignments,n=e.columns,a=void 0===n?Xi:n;return r.a.createElement(ar,{data:t,columns:a})}function ts(e){try{return e&&new Date(e).toJSON().slice(0,10)}catch(t){return""}}function ns(e){var t=[];if(!e)return t;for(var n=Math.max.apply(Math,Object(mn.a)(e.map((function(e){var t;return(null===(t=e.wage_chunks)||void 0===t?void 0:t.length)||0}))).concat([0])),a=0;a<n;a++)t.push("Period ".concat(a+1," Rate"),"Period ".concat(a+1," Hours"),"Period ".concat(a+1," Start Date"),"Period ".concat(a+1," End Date"));return t}function as(e){var t=[];if(!e)return t;t.push(e.length);var n,a=Object(D.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;t.push(r.rate,r.hours,ts(r.start_date),ts(r.end_date))}}catch(i){a.e(i)}finally{a.f()}return t}function rs(e){var t=e.disabled,n=void 0!==t&&t,a=e.setExportInProgress,i=void 0===a?null:a,s=Object(o.useDispatch)(),c=Object(o.useSelector)(ca),u=r.a.useState(null),l=Object(k.a)(u,2),d=l[0],m=l[1],p=Object(o.useSelector)(Ri).selectedAssignmentIds,f=r.a.useCallback((function(e){"function"===typeof i&&i(e)}),[i]);return r.a.useEffect((function(){function e(){return(e=Object(b.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e,t){p&&p.length>0&&(e=e.filter((function(e){return p.includes(e.id)})));var n=e.map((function(e){return{first_name:e.applicant.first_name,last_name:e.applicant.last_name,utorid:e.applicant.utorid,email:e.applicant.email,position_code:e.position.position_code,start_date:e.start_date,end_date:e.end_date,contract_template:e.contract_override_pdf?null:e.position.contract_template.template_name,contract_override_pdf:e.contract_override_pdf,hours:e.hours,active_offer_status:e.active_offer_status,active_offer_recent_activity_date:e.active_offer_recent_activity_date,wage_chunks:e.wage_chunks.map((function(e){return{hours:e.hours,rate:e.rate,start_date:e.start_date,end_date:e.end_date}}))}}));return Wr({toSpreadsheet:function(){return[["Last Name","First Name","UTORid","Email","Position Code","Start Date","End Date","Hours","Contract Template","Contract Override PDF","Offer Status","Recent Activity Date","","Number of Pay Periods"].concat(Object(mn.a)(ns(n)))].concat(n.map((function(e){return[e.last_name,e.first_name,e.utorid,e.email,e.position_code,ts(e.start_date),ts(e.end_date),e.hours,e.contract_template,e.contract_override_pdf,e.active_offer_status,void 0,e.active_offer_recent_activity_date].concat(Object(mn.a)(as(e.wage_chunks)))})))},toJson:function(){return{assignments:e.map((function(e){return Zr.assignment(e,c)}))}}},t,"assignments")},m(null),f(!0),e.next=5,s($t(t,d));case 5:n=e.sent,f(!1),Er.a.saveAs(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d&&function(){return e.apply(this,arguments)}().catch(console.error)}),[d,s,c,p,f]),r.a.createElement(Ar,{onClick:function(e){m(e)},disabled:n})}var is={keys:["utorid","position_code","start_date","end_date","contract_template","contract_override_pdf","hours","wage_chunks"],keyMap:{"Position Code":"position_code","Course Name":"position_code","Start Date":"start_date",Start:"start_date","End Date":"end_date",End:"end_date",Hours:"hours","Contract Override PDF":"contract_override_pdf"},dateColumns:["start_date","end_date"],requiredKeys:["position_code","utorid"],primaryKey:["utorid","position_code"],baseName:"assignments"};function ss(e){var t=e.disabled,n=void 0!==t&&t,a=e.setImportInProgress,i=void 0===a?null:a,s=Object(o.useDispatch)(),c=Object(o.useSelector)(sn),u=Object(o.useSelector)(je),l=Object(o.useSelector)(yt),d=Object(o.useSelector)(ca),m=r.a.useState(null),p=Object(k.a)(m,2),f=p[0],h=p[1],v=r.a.useState(null),g=Object(k.a)(v,2),y=g[0],E=g[1],w=r.a.useState(null),O=Object(k.a)(w,2),S=O[0],j=O[1],C=r.a.useState(!1),A=Object(k.a)(C,2),T=A[0],x=A[1];function N(){return(N=Object(b.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ti(y),e.next=3,s(en(t));case 3:h(null);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){f||y&&E(null)}),[y,E,f]),r.a.useEffect((function(){if(f&&!T)try{j(null);var e,t=Gr(f,is),n=Object(D.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.hours&&(a.hours=+a.hours)}}catch(i){n.e(i)}finally{n.f()}var r=Qr.assignments(t,{assignments:c,positions:l,applicants:u,session:d});E(r)}catch(s){console.warn(s),j(s)}}),[f,c,l,u,d,T]),r.a.createElement(Hr,{onConfirm:function(){return N.apply(this,arguments)},onFileChange:h,dialogContent:r.a.createElement(os,{diffed:y,processingError:S}),setInProgress:function(e){x(e),"function"===typeof i&&i(e)},disabled:n})}var os=r.a.memo((function(e){var t=e.diffed,n=e.processingError,a=r.a.createElement("p",null,"No data loaded...");if(n)a=r.a.createElement(_r.a,{variant:"danger"},""+n);else if(t){var i=t.filter((function(e){return"new"===e.status})).map((function(e){return e.obj})),s=t.filter((function(e){return"modified"===e.status}));a=0===i.length&&0===s.length?r.a.createElement(_r.a,{variant:"warning"},"No difference between imported assignments and those already on the system."):r.a.createElement(r.a.Fragment,null,i.length>0&&r.a.createElement(_r.a,{variant:"primary"},r.a.createElement("span",{className:"mb-1"},"The following assignments will be"," ",r.a.createElement("strong",null,"added")),r.a.createElement(es,{assignments:i})),s.length>0&&r.a.createElement(_r.a,{variant:"info"},r.a.createElement("span",{className:"mb-1"},"The following assignments will be"," ",r.a.createElement("strong",null,"modified")),r.a.createElement($i,{modifiedAssignments:s})))}return a}));function cs(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=Object(o.useSelector)(ca),s=r.a.useState(!1),c=Object(k.a)(s,2),u=c[0],l=c[1];return r.a.createElement("div",{className:"page-body"},r.a.createElement(Or,null,r.a.createElement(Sr,null,"Available Actions"),r.a.createElement(jr,{icon:r.a.createElement(Ga.h,null),onClick:function(){a(!0)},disabled:!i},"Add Assignment"),r.a.createElement(Sr,null,"Import/Export"),r.a.createElement(ss,{disabled:!i,setImportInProgress:l}),r.a.createElement(rs,{disabled:!i,setExportInProgress:l}),r.a.createElement(Sr,null,"Selected Assignment Actions"),r.a.createElement(Ki,null),r.a.createElement(Qi,null)),r.a.createElement(si,null,i?null:r.a.createElement(hi,{extraText:"To view or modify assignments, you must select a session."}),u?r.a.createElement(r.a.Fragment,null,r.a.createElement(ur.a,{animation:"border",className:"mr-2"}),"In Progress"):r.a.createElement(Mi,null),r.a.createElement(Yi,{show:n,onHide:function(){a(!1)}})))}function us(){return r.a.createElement("div",{className:"page-body"},r.a.createElement(Or,null,r.a.createElement(Sr,null,"Import/Export"),r.a.createElement(rs,null)),r.a.createElement(si,null,r.a.createElement(Mi,null)))}var ls={template_name:"",template_file:""};function ds(e){var t=e.contractTemplate,n=e.setContractTemplate,a=e.availableTemplates,i=void 0===a?[]:a,s=Object(l.a)(Object(l.a)({},ls),t);var o=Fa(s,n);return r.a.createElement(Pa.a,null,r.a.createElement(Ua,null,o('Template Name (e.g. "OTO" "Invigilate")',"template_name")),r.a.createElement(Ua,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,{title:"This file is stored on the server; you can edit it there."},"Template File"),r.a.createElement(_i.a,{id:"file-name-input",ignoreDiacritics:!0,placeholder:"File name...",multiple:!0,labelKey:function(e){return"".concat(e)},selected:s.template_file?[s.template_file]:[],options:i.map((function(e){return e.template_file})),onChange:function(e){var t=e[e.length-1]||"";n(Object(l.a)(Object(l.a)({},s),{},{template_file:t}))}}))))}var ms={template_name:"",template_file:""};var ps=Object(o.connect)((function(e){return{contractTemplates:nt(e),availableTemplates:at(e)}}),{upsertContractTemplate:Ve,fetchAllContractTemplates:Qe})((function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.contractTemplates,s=e.availableTemplates,o=e.upsertContractTemplate,c=e.fetchAllContractTemplates,u=r.a.useState(ms),l=Object(k.a)(u,2),d=l[0],m=l[1];r.a.useEffect((function(){t?c():m(ms)}),[t,c]);var p=function(e,t){var n={delayShow:"",immediateShow:""};Wa(e.template_name)&&Wa(e.template_file)||(n.delayShow="A template name and template file is required");var a=t.find((function(t){return Wa(t.template_name)===Wa(e.template_name)}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another contract template exists with name=",e.template_name,":"," ",r.a.createElement("b",null,a.template_name," ",a.template_file))),n}(d,i);return r.a.createElement(lr.a,{show:t,onHide:a},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Add Contract Template")),r.a.createElement(lr.a.Body,null,r.a.createElement(ds,{contractTemplate:d,setContractTemplate:m,availableTemplates:s}),p.immediateShow?r.a.createElement(_r.a,{variant:"danger"},p.immediateShow):null),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){o(d),a()},title:p.delayShow||"Create Contract Template",disabled:!!p.delayShow||!!p.immediateShow},"Create Contract Template")))})),fs=[{Header:"Template Name",accessor:"template_name"},{Header:"Template File",accessor:"template_file"}];function hs(e){var t=e.contractTemplates,n=e.columns,a=void 0===n?fs:n;return r.a.createElement(ar,{data:t,columns:a,filterable:!0})}var vs=n(272);function _s(e){var t=e.show,n=e.onClose,a=e.template_id,i=r.a.useState(!1),s=Object(k.a)(i,2),c=s[0],u=s[1],l=r.a.useState({id:null,content:null}),d=Object(k.a)(l,2),m=d[0],p=d[1],f=Object(o.useDispatch)();function v(){return(v=Object(b.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f($e(a));case 2:t=e.sent,Er.a.saveAs(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){null!=a&&a!==m.template_id?(u(!0),f(Xe(a)).then((function(e){p({id:a,content:e})})).finally((function(){return u(!1)}))):u(!1)}),[a,u,m.template_id,f]),r.a.createElement(lr.a,{size:"xl",show:t,onHide:n,dialogClassName:"fullscreen-modal"},r.a.createElement(vs.a,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Previewing Template")),r.a.createElement(lr.a.Body,{className:"d-flex"},r.a.createElement("p",null,"The template you are previewing has its fields filled in with dummy values. These values will be replaced with correct values when the template is used to create a contract."),c&&r.a.createElement(_r.a,{variant:"info"},r.a.createElement(ur.a,{animation:"border",className:"mr-3"}),"Loading Template..."),null!=a&&!c&&r.a.createElement("iframe",{style:{boder:"1px solid black",width:"100%",flexGrow:1},srcDoc:c?null:m.content,title:"Contract template preview"})),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{title:"Download a copy of this template. The downloaded copy will have no substitutions made and will be suitable for editing.",onClick:function(){return v.apply(this,arguments)},variant:"link"},r.a.createElement(Ga.c,{className:"mr-2"}),"Download Template"),r.a.createElement(h.a,{variant:"secondary",onClick:n},"Close")))}function bs(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState(null),s=Object(k.a)(i,2),c=s[0],u=s[1],l=Object(o.useSelector)(nt),d=[{Header:"Template Name",accessor:"template_name",width:200},{Header:"Template File",accessor:"template_file",Cell:function(e){var t=e.row,n=t.original||t._original,i=n.id,s=n.template_file;return r.a.createElement("div",null,r.a.createElement(h.a,{variant:"light",size:"sm",className:"mr-2 py-0",title:"Preview Template",onClick:function(){return function(e){u(e),a(!0)}(i)}},r.a.createElement(Ga.i,null)),s)},width:400}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(hs,{contractTemplates:l,columns:d}),r.a.createElement(_s,{show:n,onClose:function(){return a(!1)},template_id:c}))}function gs(e){var t=e.disabled,n=void 0!==t&&t,a=Object(o.useDispatch)(),i=r.a.useState(null),s=Object(k.a)(i,2),c=s[0],u=s[1],l=r.a.useState("Select an HTML template file."),d=Object(k.a)(l,2),m=d[0],p=d[1],f=r.a.useState(!1),v=Object(k.a)(f,2),g=v[0],y=v[1],E=r.a.useState(!1),w=Object(k.a)(E,2),O=w[0],S=w[1];function j(){return(j=Object(b.a)(_.a.mark((function e(t){var n,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.files)?(a=t.target.files[0],u(a),p(a.name)):u(null);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=8;break}return S(!0),e.prev=2,e.next=5,a(et(c));case 5:return e.prev=5,S(!1),e.finish(5);case 8:A();case 9:case"end":return e.stop()}}),e,null,[[2,,5,8]])})))).apply(this,arguments)}function A(){y(!1),p("Select an HTML template file."),u(null)}var T=O?r.a.createElement(ur.a,{animation:"border",size:"sm",className:"mr-1"}):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(jr,{icon:Ga.o,onClick:function(){return y(!0)},disabled:n},"Upload Contract Template"),r.a.createElement(lr.a,{show:g,onHide:A,size:"lg",dialogClassName:"wide-modal"},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Import From File")),r.a.createElement(lr.a.Body,null,r.a.createElement(Dr.a,null,r.a.createElement(xr.a,{className:"mb-3"},r.a.createElement(Ia.a,null,r.a.createElement(Pa.a,null,r.a.createElement(Pa.a.File,{label:m,onChange:function(e){return j.apply(this,arguments)},custom:!0})))),r.a.createElement(xr.a,null,r.a.createElement(Ia.a,null,r.a.createElement("p",null,"A template is an HTML file with special substitution strings (words surrounded by"," ","{{"," and ","}}",") that will be replaced with assignment-specific values when rendered as a contract."))))),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{variant:"secondary",onClick:A},"Cancel"),r.a.createElement(h.a,{variant:"primary",disabled:!c,title:c?"Upload '".concat(m,"' to TAPP"):"You must select a file to upload.",onClick:function(){return C.apply(this,arguments)}},T,r.a.createElement(Ga.o,{className:"mr-2"}),"Upload"))))}function ys(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=Object(o.useSelector)(ca);return r.a.createElement("div",{className:"page-body"},r.a.createElement(Or,null,r.a.createElement(Sr,null,"Available Actions"),r.a.createElement(jr,{icon:r.a.createElement(Ga.h,null),onClick:function(){a(!0)},disabled:!i},"Add Contract Template"),r.a.createElement(gs,{disabled:!i})),r.a.createElement(si,null,i?null:r.a.createElement(hi,{extraText:"To view or modify contract templates, you must select a session."}),r.a.createElement(bs,null),r.a.createElement(ps,{show:n,onHide:function(){a(!1)}})))}n(263);function Es(e){var t=r.a.useState(!1),n=Object(k.a)(t,2),a=n[0],i=n[1],s=e.activeUser,o=void 0===s?{utorid:"<noid>",roles:[]}:s,c=e.activeRole,u=e.setActiveUserRole,l=o.roles,d=c?r.a.createElement("span",{className:"text-primary mr-2"},c):r.a.createElement("span",{className:"text-secondary mr-2"},"Select a role"),m=function(e){return c===e};return r.a.createElement(Ja.a,null,"Login: ",o.utorid," as",r.a.createElement(Aa.a,{onSelect:function(e){u(l[e])},onToggle:function(e){return i(e)},show:a,alignRight:!0},r.a.createElement(Aa.a.Toggle,{split:!0,variant:"light"},d),r.a.createElement(Aa.a.Menu,{flip:!0},(l||[]).map((function(e,t){return r.a.createElement(Aa.a.Item,{key:t,eventKey:""+t,active:m(e)},e)})))))}var ws=n(525),Os=r.a.forwardRef((function(e,t){var n=e.children,a=e.style,i=e.className,s=e.clearFilter,o=r.a.useState(""),c=Object(k.a)(o,2),u=c[0],l=c[1];r.a.useEffect((function(){s&&l("")}),[s]);var d=r.a.Children.toArray(n).filter((function(e){return!u.trim()||e.props.children.toLowerCase().includes(u.trim())})),m=0===n.length?"No Available Sessions":"No Matching Sessions";return r.a.createElement("div",{style:a,className:i,ref:t},r.a.createElement(ws.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",title:"Filter sessions",onChange:function(e){l(e.currentTarget.value)},value:u,tabIndex:0}),r.a.createElement("ul",{className:"list-unstyled my-0"},d.length>0?d:r.a.createElement("li",{className:"dropdown-item text-muted"},m)))}));function Ss(e){var t=e.items,n=e.activeItemId,a=e.clearFilter;return r.a.createElement(Aa.a.Menu,{as:Os,clearFilter:a},t.map((function(e,t){return r.a.createElement(Aa.a.Item,{key:e.id,eventKey:""+t,active:n===e.id},e.name)})))}function js(e){var t=e.sessions,n=void 0===t?[]:t,a=e.activeSession,i=e.setActiveSession,s=r.a.useState(!1),o=Object(k.a)(s,2),c=o[0],u=o[1],l=a?a.id:null,d=r.a.createElement("span",{className:"text-secondary mr-2"},"Select a Session");return null!=l&&(d=r.a.createElement("span",{className:"text-primary mr-2"},a.name)),r.a.createElement(Ja.a,null,"Selected session:",r.a.createElement(Aa.a,{onSelect:function(e){i(n[e])},onToggle:function(e){return u(e)},show:c},r.a.createElement(Aa.a.Toggle,{split:!0,variant:"light"},d),r.a.createElement(Ss,{items:n,activeItemId:l,clearFilter:!c})))}function Cs(){var e=Object(o.useSelector)(oa),t=Object(o.useSelector)(ca),n=Object(o.useDispatch)();return r.a.createElement(js,{sessions:e,activeSession:t,setActiveSession:function(e){return n(ia(e))}})}function As(){var e=Object(o.useSelector)(Kn),t=Object(o.useSelector)(Vn),n=Object(o.useDispatch)();return r.a.createElement(Es,{activeUser:e,activeRole:t,setActiveUserRole:function(e){return n(Wn(e))}})}function Ts(){var e=Object(o.useSelector)(ca),t=r.a.createElement(r.a.Fragment,null,"There is currently ",r.a.createElement("b",{className:"text-primary"},"no active session")," ","selected. Please select one below.");return e&&(t=r.a.createElement(r.a.Fragment,null,"The current active session is"," ",r.a.createElement("b",{className:"text-primary"},e.name),". You may select a different session below.")),r.a.createElement("div",{className:"page-body"},r.a.createElement(si,null,r.a.createElement("h2",null,"Welcome to TAPP!"),r.a.createElement("p",null,"TAPP is a TA administration program designed for creating and distributing TA contracts."),r.a.createElement("p",null,"In order to use most features of TAPP, you need to select a"," ",r.a.createElement("i",null,"session"),". ",t),r.a.createElement(Cs,null)))}function ks(){var e=Object(o.useSelector)(ca),t=r.a.createElement(r.a.Fragment,null,"There is currently ",r.a.createElement("b",{className:"text-primary"},"no active session")," ","selected. Please select one below.");return e&&(t=r.a.createElement(r.a.Fragment,null,"The current active session is"," ",r.a.createElement("b",{className:"text-primary"},e.name),". You may select a different session below.")),r.a.createElement("div",{className:"page-body"},r.a.createElement(si,null,r.a.createElement("h2",null,"Welcome to TAPP!"),r.a.createElement("p",null,"TAPP is a TA administration program designed for creating and distributing TA contracts."),r.a.createElement("p",null,"In order to use most features of TAPP, you need to select a"," ",r.a.createElement("i",null,"session"),". ",t),r.a.createElement(Cs,null)))}var Ds=[{Header:"Last Name",accessor:"last_name"},{Header:"First Name",accessor:"first_name"},{Header:"UTORid",accessor:"utorid"},{Header:"Student Number",accessor:"student_number"},{Header:"Email",accessor:"email"},{Header:"Phone",accessor:"phone"}];function xs(e){var t=e.modifiedApplicants;return r.a.createElement(Ns,{applicants:t,columns:La(Ds)})}function Ns(e){var t=e.applicants,n=e.columns,a=void 0===n?Ds:n;return r.a.createElement(ar,{columns:a,data:t,filterable:!0})}var Hs={first_name:"",last_name:"",email:"",utorid:"",phone:"",student_number:""};function Ps(e){var t=e.applicant,n=e.setApplicant,a=Object(l.a)(Object(l.a)({},Hs),t);function i(e){return function(t){var r=t.target.value||"",i=Object(l.a)(Object(l.a)({},a),{},Object(te.a)({},e,r));n(i)}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,null,e),r.a.createElement(Pa.a.Control,{type:n,value:a[t]||"",onChange:i(t)}))}return r.a.createElement(Pa.a,null,r.a.createElement(Pa.a.Row,null,r.a.createElement(Ua,null,s("First Name","first_name"),s("Last Name","last_name")),r.a.createElement(Ua,null,s("Email","email"),s("UTORid","utorid")),r.a.createElement(Ua,null,s("Student Number","student_number"),s("Phone","phone"))))}function Is(e){var t="Edit ".concat(""+e.column.Header),n=e.upsertApplicant,a=e.field;function i(){return(i=Object(b.a)(_.a.mark((function t(r){var i;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(e.row.original||e.row._original).id,t.next=3,n(Object(te.a)({id:i},a,r));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement(pr,{title:t,value:e.value||"",onChange:function(e){return i.apply(this,arguments)},editable:!0},e.value)}function Fs(e){var t=e.show,n=e.onHide,a=e.onDelete,i=e.applicant;return r.a.createElement(lr.a,{show:t,onHide:n},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Delete Applicant")),r.a.createElement(lr.a.Body,null,"Are you sure you want to delete the applicant"," ",r.a.createElement("span",{className:"text-info font-weight-bold"},i?"".concat(i.first_name," ").concat(i.last_name):null),"? This action cannot be undone."),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:n,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:a,title:"Delete Applicant"},"Delete")))}function Us(e){var t,n=e.inDeleteMode,a=void 0!==n&&n,i=Object(o.useSelector)(je),s=Object(o.useSelector)(sn),c=r.a.useState(null),u=Object(k.a)(c,2),l=u[0],d=u[1],m=Object(o.useDispatch)(),p={},f=Object(D.a)(s);try{for(f.s();!(t=f.n()).done;){var h=t.value;p[h.applicant.id]=!0}}catch(E){f.e(E)}finally{f.f()}function v(e){return m(ye(e))}function g(e){return function(t){return r.a.createElement(Is,Object.assign({field:e,upsertApplicant:v},t))}}var y=[{Header:r.a.createElement(Ga.n,{className:"delete-row-column-header-icon"}),Cell:function(e){var t=e.row,n=t.original||t._original;return p[n.id]?r.a.createElement("div",{className:"delete-button-container"},r.a.createElement(Ga.f,{className:"delete-row-button disabled",title:"This applicant has an associated assignment and so cannot be deleted."})):r.a.createElement("div",{className:"delete-button-container"},r.a.createElement(Ga.m,{className:"delete-row-button",title:"Delete ".concat(n.last_name,", ").concat(n.first_name),onClick:function(){d(n)}}))},id:"delete_col",className:"delete-col",show:a,maxWidth:32,resizable:!1},{Header:di("Last Name"),accessor:"last_name",Cell:g("last_name")},{Header:di("First Name"),accessor:"first_name",Cell:g("first_name")},{Header:di("Email"),accessor:"email",Cell:g("email")},{Header:di("UTORid"),accessor:"utorid",Cell:g("utorid")},{Header:di("Student Number"),accessor:"student_number",Cell:g("student_number")},{Header:di("Phone"),accessor:"phone",Cell:g("phone")}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ns,{applicants:i,columns:y}),r.a.createElement(Fs,{applicant:l,show:!!l,onHide:function(){return d(null)},onDelete:Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(Ee(l));case 2:d(null);case 3:case"end":return e.stop()}}),e)})))}))}var Rs={first_name:"",last_name:"",email:"",utorid:"",phone:"",student_number:""};function Ls(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=r.a.useState(Rs),s=Object(k.a)(i,2),c=s[0],u=s[1],l=r.a.useState(!1),d=Object(k.a)(l,2),m=d[0],p=d[1],f=Object(o.useSelector)(je),v=Object(o.useDispatch)();function g(e){return v(ye(e))}function y(){return(y=Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,g(c);case 3:p(!1),a();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.a.useEffect((function(){t||u(Rs)}),[t]);var E=m?r.a.createElement(ur.a,{animation:"border",size:"sm",className:"mr-1"}):null,w=function(e,t){var n={delayShow:"",immediateShow:""};Wa(e.utorid||"")&&Wa(e.first_name||"")&&Wa(e.last_name||"")||(n.delayShow="A first name, last name, and utorid is required");var a=t.find((function(t){return Wa(t.utorid)===Wa(e.utorid||"")}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another applicant exists with utorid=",e.utorid,":"," ",r.a.createElement("b",null,a.first_name," ",a.last_name))),n}(c,f);return r.a.createElement(lr.a,{show:t,onHide:a},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Add Applicant")),r.a.createElement(lr.a.Body,null,r.a.createElement(Ps,{applicant:c,setApplicant:u}),w.immediateShow?r.a.createElement(_r.a,{variant:"danger"},w.immediateShow):null),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){return y.apply(this,arguments)},title:w.delayShow||"Create Instructor",disabled:!!w.delayShow||!!w.immediateShow},E,"Create Applicant")))}function qs(){var e=Object(o.useDispatch)(),t=r.a.useState(null),n=Object(k.a)(t,2),a=n[0],i=n[1];return r.a.useEffect((function(){function t(){return(t=Object(b.a)(_.a.mark((function t(){var n,r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(e,t){return Wr({toSpreadsheet:function(){return[["Last Name","First Name","UTORid","Student Number","email","Phone"]].concat(e.map((function(e){return[e.last_name,e.first_name,e.utorid,e.student_number,e.email,e.phone]})))},toJson:function(){return{applicants:e.map((function(e){return Zr.applicant(e)}))}}},t,"applicants")},i(null),t.next=4,e(we(n,a));case 4:r=t.sent,Er.a.saveAs(r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}a&&function(){return t.apply(this,arguments)}().catch(console.error)}),[a,e]),r.a.createElement(Ar,{onClick:function(e){i(e)}})}var Bs={keys:["first_name","last_name","utorid","email","student_number","phone"],keyMap:{"First Name":"first_name","Given Name":"first_name",First:"first_name","Last Name":"last_name",Surname:"last_name","Family Name":"last_name",Last:"last_name","Student Number":"student_number"},requiredKeys:["utorid"],primaryKey:"utorid",dateColumns:[],baseName:"applicants"};function Ms(){var e=Object(o.useDispatch)(),t=Object(o.useSelector)(je),n=r.a.useState(null),a=Object(k.a)(n,2),i=a[0],s=a[1],c=r.a.useState(null),u=Object(k.a)(c,2),l=u[0],d=u[1],m=r.a.useState(null),p=Object(k.a)(m,2),f=p[0],h=p[1],v=r.a.useState(!1),g=Object(k.a)(v,2),y=g[0],E=g[1];function w(){return(w=Object(b.a)(_.a.mark((function t(){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l){t.next=2;break}throw new Error("Unable to compute an appropriate diff");case 2:return n=ti(l),t.next=5,e(Oe(n));case 5:s(null);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}r.a.useEffect((function(){i||l&&d(null)}),[l,d,i]),r.a.useEffect((function(){if(i&&!y)try{h(null);var e=Gr(i,Bs),n=Qr.applicants(e,{applicants:t});d(n)}catch(a){console.warn(a),h(a)}}),[i,t,y]);var O=r.a.createElement("p",null,"No data loaded...");if(f)O=r.a.createElement(_r.a,{variant:"danger"},""+f);else if(l){var S=l.filter((function(e){return"new"===e.status})).map((function(e){return e.obj})),j=l.filter((function(e){return"modified"===e.status}));O=0===S.length&&0===j.length?r.a.createElement(_r.a,{variant:"warning"},"No difference between imported applicants and those already on the system."):r.a.createElement(r.a.Fragment,null,S.length>0&&r.a.createElement(_r.a,{variant:"primary"},r.a.createElement("span",{className:"mb-1"},"The following ",r.a.createElement("strong",null,S.length)," ","applicant",S.length>1?"s":""," will be ",r.a.createElement("strong",null,"added")),r.a.createElement(Ns,{applicants:S})),j.length>0&&r.a.createElement(_r.a,{variant:"info"},r.a.createElement("span",{className:"mb-1"},"The following instructors will be"," ",r.a.createElement("strong",null,"modified")),r.a.createElement(xs,{modifiedApplicants:j})))}return r.a.createElement(Hr,{onConfirm:function(){return w.apply(this,arguments)},onFileChange:s,dialogContent:O,setInProgress:E})}function Gs(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState(!1),s=Object(k.a)(i,2),o=s[0],c=s[1];return r.a.createElement("div",{className:"page-body"},r.a.createElement(Or,null,r.a.createElement(Sr,null,"Available Actions"),r.a.createElement(jr,{icon:r.a.createElement(Ga.h,null),onClick:function(){a(!0)}},"Add Applicant"),r.a.createElement(jr,{icon:r.a.createElement(Ga.n,null),onClick:function(){return c(!o)},active:o},"Delete Applicant"),r.a.createElement(Sr,null,"Import/Export"),r.a.createElement(Ms,null),r.a.createElement(qs,null)),r.a.createElement(si,null,r.a.createElement(Ls,{show:n,onHide:function(){a(!1)}}),r.a.createElement(Us,{inDeleteMode:o})))}var Ws=[{Header:"Position",accessor:"assignment.position.position_code",maxWidth:120},{Header:"Last Name",accessor:"assignment.applicant.last_name",maxWidth:120},{Header:"First Name",accessor:"assignment.applicant.first_name",maxWidth:120},{Header:"Total Hours",accessor:"total_hours",maxWidth:100,className:"number-cell"},{Header:"Duties",accessor:"duties"}];function Zs(e){var t=e.modifiedDdahs;return t=t.map((function(e){return null==e.obj.duties||"string"===typeof e.obj.duties?e:Object(l.a)(Object(l.a)({},e),{},{obj:Object(l.a)(Object(l.a)({},e.obj),{},{duties:Xr(e.obj.duties)})})})),r.a.createElement(Ys,{ddahs:t,columns:La(Ws)})}function Ys(e){var t=e.ddahs,n=e.columns,a=void 0===n?Ws:n,i=t.map((function(e){return null==e.duties||"string"===typeof e.duties?e:Object(l.a)(Object(l.a)({},e),{},{duties:Xr(e.duties)})}));return r.a.createElement(ar,{data:i,columns:a})}var Js={assignment:null,duties:[]};function zs(e){var t,n=e.ddah,a=e.setDdah,i=e.assignments,s=void 0===i?[]:i,o=e.editableAssignment,c=void 0===o||o,u=Object(l.a)(Object(l.a)({},Js),n),d=u.assignment?" ".concat(u.assignment.position.position_code," for ").concat(u.assignment.applicant.last_name,", ").concat(u.assignment.applicant.first_name):"No Assignment";c&&(d=r.a.createElement(_i.a,{id:"position-input",ignoreDiacritics:!0,placeholder:"Assignment...",multiple:!0,labelKey:function(e){return"".concat(e.position.position_code," for ").concat(e.applicant.last_name,", ").concat(e.applicant.first_name)},selected:null==u.assignment?[]:[u.assignment],options:s,onChange:function(e){var t=e[e.length-1]||null;a(Object(l.a)(Object(l.a)({},u),{},{assignment:t}))}}));var m=Object(mn.a)(u.duties);m.sort((function(e,t){return e.order-t.order}));var p,f=Math.max.apply(Math,Object(mn.a)(m.map((function(e){return e.order}))).concat([0]))+1,v=0,_=Object(D.a)(m);try{for(_.s();!(p=_.n()).done;){v+=p.value.hours}}catch(y){_.e(y)}finally{_.f()}var b=!!u.assignment&&u.assignment.hours!==v;function g(e){var t=m.filter((function(t){return t.order!==e.order}));t.push(e),a(Object(l.a)(Object(l.a)({},u),{},{duties:t}))}return r.a.createElement(Pa.a,null,r.a.createElement(Ua,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,null,"Assignment"),d)),r.a.createElement("h4",null,"Duties"),m.map((function(e){return r.a.createElement(Ua,{key:e.order,icon:r.a.createElement(h.a,{title:"Remove duty",onClick:function(){return function(e){var t=m.filter((function(t){return t.order!==e.order}));a(Object(l.a)(Object(l.a)({},u),{},{duties:t}))}(e)},variant:"outline-info"},r.a.createElement(Ga.n,null))},r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,null,"Hours"),r.a.createElement(Pa.a.Control,{type:"number",value:e.hours,onChange:function(t){return g(Object(l.a)(Object(l.a)({},e),{},{hours:Object(dn.b)(t.target.value)}))}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a.Label,null,"Description"),r.a.createElement(Pa.a.Control,{title:"Enter a description of what these hours are allocated for",type:"input",value:e.description,onChange:function(t){return g(Object(l.a)(Object(l.a)({},e),{},{description:t.target.value}))}})))})),r.a.createElement(Ua,null,r.a.createElement(h.a,{variant:"outline-info",onClick:function(){return g({description:"",hours:0,order:f})}},r.a.createElement(Ga.h,{className:"add-duty-btn-icon"}),"Add Duty")),r.a.createElement(Ua,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:b?"add-ddah-hours-mismatch":""},v)," ","of ",u.assignment?u.assignment.hours:"?"," hours allocated"," ",b?"(".concat(((null===(t=u.assignment)||void 0===t?void 0:t.hours)||0)-v," unassigned)"):"")))}var Ks={assignment:null,duties:[]};function Vs(e){var t,n=e.show,a=e.onHide,i=void 0===a?function(){}:a,s=r.a.useState(Ks),c=Object(k.a)(s,2),u=c[0],l=c[1],d=r.a.useState(!1),m=Object(k.a)(d,2),p=m[0],f=m[1],v=Object(o.useSelector)(Pn),g=Object(o.useDispatch)(),y={},E=Object(D.a)(v);try{for(E.s();!(t=E.n()).done;){var w=t.value;y[w.assignment.id]=!0}}catch(T){E.e(T)}finally{E.f()}var O=Object(o.useSelector)(sn).filter((function(e){return!y[e.id]}));function S(e){if(null!=e.assignment){var t={assignment_id:e.assignment.id,duties:e.duties};return g(An(t))}console.warn("Trying to upsert a DDAH with a null assignment reference")}function j(){return(j=Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,S(u);case 3:f(!1),i();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.a.useEffect((function(){n||l(Ks)}),[n]);var C=p?r.a.createElement(ur.a,{animation:"border",size:"sm",className:"mr-1"}):null,A=function(e,t){var n={delayShow:"",immediateShow:""};if(0===e.duties.length&&(n.delayShow="A DDAH must have at least one duty"),null==e.assignment)return n.delayShow="A DDAH can only be created for an existing assignment",n;var a=t.find((function(t){return t.assignment.id===(e.assignment||{}).id}));return a&&(n.immediateShow=r.a.createElement("p",null,"Another DDAH exists for assignment=",e.assignment.position.position_code,":"," ",r.a.createElement("b",null,a.assignment.applicant.first_name," ",a.assignment.applicant.last_name))),n}(u,v);return r.a.createElement(lr.a,{show:n,onHide:i},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Add DDAH")),r.a.createElement(lr.a.Body,null,r.a.createElement(zs,{ddah:u,setDdah:l,assignments:O}),!p&&A.immediateShow?r.a.createElement(_r.a,{variant:"danger"},A.immediateShow):null),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{onClick:i,variant:"light"},"Cancel"),r.a.createElement(h.a,{onClick:function(){return j.apply(this,arguments)},title:A.delayShow||"Create Instructor",disabled:!!A.delayShow||!!A.immediateShow},C,"Create DDAH")))}var Qs=n(530),Xs=n.n(Qs),$s=function(e){return e.ui.ddahsTable};function eo(e){var t=Math.max.apply(Math,Object(mn.a)(e.map((function(e){return e.duties.length||0}))).concat([0])),n=Array.from({length:2*t},(function(e,t){return t%2===0?"Hours ".concat(t/2+1):"Duty ".concat((t-1)/2+1)}));return[["Position","Last Name","First Name","email","Assignment Hours","Offer Status",""].concat(n)].concat(e.map((function(e){return[e.assignment.position.position_code,e.assignment.applicant.last_name,e.assignment.applicant.first_name,e.assignment.applicant.email,e.assignment.hours,e.assignment.active_offer_status,""].concat(function(e){var t=[],n=Object(mn.a)(e.duties);n.sort((function(e,t){return e.order-t.order}));var a,r=Object(D.a)(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;t.push(i.hours),t.push(i.description)}}catch(s){r.e(s)}finally{r.f()}return t}(e))})))}function to(e){var t=e.disabled,n=void 0!==t&&t,a=Object(o.useDispatch)(),i=r.a.useState(null),s=Object(k.a)(i,2),c=s[0],u=s[1],l=Object(o.useSelector)($s).selectedDdahIds;return r.a.useEffect((function(){function e(){return(e=Object(b.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e,t){return l&&l.length>0&&(e=e.filter((function(e){return l.includes(e.id)}))),Wr({toSpreadsheet:function(){return eo(e)},toJson:function(){return{ddahs:e.map((function(e){return Zr.ddah(e)}))}}},t,"ddahs")},u(null),e.next=4,a(Tn(t,c));case 4:n=e.sent,Er.a.saveAs(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c&&function(){return e.apply(this,arguments)}().catch(console.error)}),[c,a,l]),r.a.createElement(Ar,{onClick:function(e){u(e)},disabled:n})}function no(e){var t=e.disabled,n=void 0!==t&&t,a=e.setImportInProgress,i=void 0===a?null:a,s=Object(o.useDispatch)(),c=Object(o.useSelector)(Pn),u=Object(o.useSelector)(sn),l=Object(o.useSelector)(je),d=r.a.useState(null),m=Object(k.a)(d,2),p=m[0],f=m[1],h=r.a.useState(null),v=Object(k.a)(h,2),g=v[0],y=v[1],E=r.a.useState(null),w=Object(k.a)(E,2),O=w[0],S=w[1],j=r.a.useState(!1),C=Object(k.a)(j,2),A=C[0],T=C[1];function x(){return(x=Object(b.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}throw new Error("Unable to compute an appropriate diff");case 2:return t=ti(g),e.next=5,s(kn(t));case 5:f(null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){p||g&&y(null)}),[g,y,p]),r.a.useEffect((function(){if(p&&!A)try{S(null);var e=function(e,t){var n=[];if("json"===e.fileType){var a=e.data;a.ddahs&&(a=a.ddahs);var r,i=Object(D.a)(a);try{for(i.s();!(r=i.n()).done;){var s=r.value;n.push(s)}}catch(E){i.e(E)}finally{i.f()}}if("spreadsheet"===e.fileType){for(var o=e.data,c=Math.round(Math.max.apply(Math,Object(mn.a)(o.map((function(e){return Object.keys(e).length}))).concat([0]))/2),u={Position:"position_code","First Name":"first_name","Given Name":"first_name",First:"first_name","Last Name":"last_name",Surname:"last_name","Family Name":"last_name",Last:"last_name"},l=0;l<=c;l++)u["Duty ".concat(l)]="duty_".concat(l),u["Hours ".concat(l)]="hours_".concat(l),l<10&&(u["Duty 0".concat(l)]="duty_".concat(l),u["Hours 0".concat(l)]="hours_".concat(l));var d,m=new qr({keys:["position_code","first_name","last_name","utorid"],keyMap:u}),p=Object(D.a)(o);try{for(p.s();!(d=p.n()).done;){var f=d.value,h=m.formatRow(f);if(null==h.utorid){var v=Br("".concat(h.first_name," ").concat(h.last_name),t);h.utorid=v.utorid,delete h.first_name,delete h.last_name}for(var _=[],b=0;b<=c;b++){var g=h["duty_".concat(b)],y=h["hours_".concat(b)];null==g&&null==y||(_.push({description:g||"",hours:y||0}),delete h["duty_".concat(b)],delete h["hours_".concat(b)])}n.push({position_code:h.position_code,applicant:h.utorid,duties:_})}}catch(E){p.e(E)}finally{p.f()}}return n}(p,l),t=Qr.ddahs(e,{ddahs:c,assignments:u});y(t)}catch(n){console.warn(n),S(n)}}),[p,c,u,l,A]),r.a.createElement(Hr,{onConfirm:function(){return x.apply(this,arguments)},onFileChange:f,dialogContent:r.a.createElement(uo,{diffed:g,processingError:O}),setInProgress:function(e){T(e),"function"===typeof i&&i(e)},disabled:n})}var ao={duties:[{order:1,hours:0,description:""},{order:2,hours:0,description:""},{order:3,hours:0,description:""},{order:4,hours:0,description:""}]};function ro(e,t){var n,a={},r=Object(D.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;a[i.assignment.id]=i}}catch(v){r.e(v)}finally{r.f()}var s=t.map((function(e){return"rejected"===e.active_offer_status||"withdrawn"===e.active_offer_status?null:a[e.id]?a[e.id]:Object(l.a)(Object(l.a)({},ao),{},{assignment:e})})).filter((function(e){return e}));s.sort((function(e,t){var n=e.assignment,a=t.assignment,r="".concat(n.position.position_code," ").concat(n.applicant.last_name," ").concat(n.applicant.first_name),i="".concat(a.position.position_code," ").concat(a.applicant.last_name," ").concat(a.applicant.first_name);return r===i?0:r>i?1:-1}));var o,c=new Set,u=Object(D.a)(s);try{for(u.s();!(o=u.n()).done;){var d=o.value;c.add(d.assignment.position.position_code)}}catch(v){u.e(v)}finally{u.f()}for(var m={},p=function(){var e=h[f];m[e]=eo(s.filter((function(t){return t.assignment.position.position_code===e})))},f=0,h=Array.from(c);f<h.length;f++)p();return m}function io(e){return so.apply(this,arguments)}function so(){return(so=Object(b.a)(_.a.mark((function e(t){var n,a,r,i,s,o,c,u,l,d,m;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new Xs.a,a=0,r=Object.entries(t);a<r.length;a++)i=Object(k.a)(r[a],2),s=i[0],o=i[1],c=s.replace(/[^A-z0-9 ]/g,"_"),u=kr.a.utils.book_new(),l=kr.a.utils.aoa_to_sheet(o),kr.a.utils.book_append_sheet(u,l,"".concat(c," DDAHs").slice(0,30)),d=kr.a.write(u,{type:"binary",bookType:"xlsx"}),n.file("".concat(c,"-DDAHs.xlsx"),d,{binary:!0});return e.next=4,n.generateAsync({type:"blob"});case 4:return m=e.sent,e.abrupt("return",m);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oo(e){var t=e.disabled,n=void 0!==t&&t,a=Object(o.useSelector)(sn),i=Object(o.useSelector)(Pn);function s(){return(s=Object(b.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ro(i,a),e.next=3,io(t);case 3:n=e.sent,Er.a.saveAs(n,"DDAHs-by-position.zip");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(jr,{icon:Ga.c,title:"Download by-position spreadsheets appropriate for filling in and uploading to create DDAHs",onClick:function(){return function(){return s.apply(this,arguments)}()},disabled:n},"By-Position Templates")}function co(e){var t=e.disabled,n=void 0!==t&&t,a=Object(o.useDispatch)();function i(){return(i=Object(b.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Dn());case 2:t=e.sent,Er.a.saveAs(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(jr,{icon:Ga.c,title:"Download a list of DDAHs that have been signed by TAs this session",onClick:function(){return function(){return i.apply(this,arguments)}()},disabled:n},"Signature List")}var uo=r.a.memo((function(e){var t=e.diffed,n=e.processingError,a=r.a.createElement("p",null,"No data loaded...");if(n)a=r.a.createElement(_r.a,{variant:"danger"},""+n);else if(t){var i=t.filter((function(e){return"new"===e.status})).map((function(e){return e.obj})),s=t.filter((function(e){return"modified"===e.status}));a=0===i.length&&0===s.length?r.a.createElement(_r.a,{variant:"warning"},"No difference between imported applicants and those already on the system."):r.a.createElement(r.a.Fragment,null,i.length>0&&r.a.createElement(_r.a,{variant:"primary"},r.a.createElement("span",{className:"mb-1"},"The following applicants will be"," ",r.a.createElement("strong",null,"added")),r.a.createElement(Ys,{ddahs:i})),s.length>0&&r.a.createElement(_r.a,{variant:"info"},r.a.createElement("span",{className:"mb-1"},"The following instructors will be"," ",r.a.createElement("strong",null,"modified")),r.a.createElement(Zs,{modifiedDdahs:s})))}return a}));n(1205);function lo(e){return e.total_hours!==e.assignment.hours?"Hours Mismatch (".concat(e.total_hours," vs. ").concat(e.assignment.hours,")"):null}function mo(e){switch(e.status){case"accepted":return"Accepted";case"emailed":return"Pending";default:return"Unsent"}}function po(e){var t=e.row,n=e.children,a=void 0===n?null:n,i=t.original;if(null==i.id)return null;var s=mo(i);switch(i.status){case"accepted":return r.a.createElement(r.a.Fragment,null,a,r.a.createElement("span",{className:"accepted-ddah"},s));default:return r.a.createElement(r.a.Fragment,null,a,s)}}function fo(e){var t=e.row.original;switch(t.issue_code){case"hours_mismatch":return r.a.createElement("div",{className:"hours-mismatch-ddah"},t.issues);case"missing":return r.a.createElement("div",{className:"missing-ddah"},t.issues);default:return null}}function ho(e){var t=e.row,n=e.onClick,a=void 0===n?function(){}:n,i=t.original;return null==i.id?null:r.a.createElement(h.a,{variant:"light",size:"sm",className:"mr-2 py-0",title:"Preview DDAH",onClick:function(){return a(i.id)}},r.a.createElement(Ga.i,null))}function vo(e){var t=e.ddah,n=e.show,a=e.onHide,i=void 0===a?function(){}:a,s=e.onApprove,o=void 0===s?function(){}:s,c=e.onEdit,u=void 0===c?function(){}:c,l="No DDAH to preview",d=null;return null!=t&&(l=r.a.createElement(_o,{ddah:t}),d="/public/ddahs/".concat(t.url_token,".pdf")),r.a.createElement(lr.a,{show:n,onHide:i,dialogClassName:"wide-modal"},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Previewing DDAH")),r.a.createElement(lr.a.Body,null,l),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return i()}},"Close"),r.a.createElement(h.a,{variant:"outline-info",onClick:function(){return u(t)}},r.a.createElement(Ga.d,{className:"mr-2"}),"Edit"),d&&r.a.createElement(h.a,{title:"Download DDAH.",variant:"link",href:Ya(d)},r.a.createElement(Ga.c,{className:"mr-2"}),"Download DDAH"),r.a.createElement(h.a,{onClick:function(){return o(t)}},r.a.createElement(Ga.b,{className:"mr-2"}),"Approve")))}function _o(e){var t=e.ddah,n=Object(mn.a)(t.duties);n.sort((function(e,t){return e.order-t.order}));var a=t.assignment,i=a.applicant,s=a.position,o=s.instructors;return r.a.createElement("div",{className:"ddah-preview-container"},r.a.createElement("h4",null,"Description of Duties and Allocation of Hours"),r.a.createElement("h4",null,"Position: ",s.position_code," (",s.position_title,")"),r.a.createElement("h4",null,"TA: ",i.first_name," ",i.last_name),r.a.createElement("h5",null,"Duties"),r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e.order},r.a.createElement("span",{className:"ddah-duty-hours"},e.hours),r.a.createElement("span",{className:"ddah-duty-description"},e.description))})),r.a.createElement("li",null,r.a.createElement("span",{className:"ddah-duty-hours"},t.total_hours),r.a.createElement("span",{className:"ddah-duty-description"},"Total"))),r.a.createElement("div",{className:"signature-area"},r.a.createElement("div",null,"Prepared by ",function(e){if(0===e.length)return"(Unknown)";return"".concat(e[0].first_name," ").concat(e[0].last_name)}(o)," ",t.emailed_date?" on ".concat(Za(t.emailed_date)):""),r.a.createElement("div",null,t.accepted_date?"Accepted by ".concat(i.first_name," ").concat(i.last_name," on ").concat(Za(t.accepted_date)):"Not yet accepted")))}function bo(e){var t=e.ddah,n=e.show,a=e.onHide,i=void 0===a?function(){}:a,s=r.a.useState(!1),c=Object(k.a)(s,2),u=c[0],l=c[1],d=Object(o.useDispatch)(),m=r.a.useState(t),p=Object(k.a)(m,2),f=p[0],v=p[1];r.a.useEffect((function(){v(t)}),[t]);var g=u?r.a.createElement(ur.a,{animation:"border",size:"sm",className:"mr-1"}):null;function y(){return(y=Object(b.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=5;break}return l(!0),e.next=5,d(An(t));case 5:return e.prev=5,l(!1),i(),e.finish(5);case 9:case"end":return e.stop()}}),e,null,[[0,,5,9]])})))).apply(this,arguments)}var E=t?r.a.createElement(zs,{ddah:f,editableAssignment:!1,setDdah:v}):"No DDAH Specified";return r.a.createElement(lr.a,{show:n,onHide:i,dialogClassName:"wide-modal"},r.a.createElement(lr.a.Header,{closeButton:!0},r.a.createElement(lr.a.Title,null,"Editing DDAH")),r.a.createElement(lr.a.Body,null,E),r.a.createElement(lr.a.Footer,null,r.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){return i()}},"Cancel"),r.a.createElement(h.a,{onClick:function(){return function(e){return y.apply(this,arguments)}(f)}},g,"Save")))}function go(){var e=Object(o.useSelector)(Pn),t=Object(o.useSelector)(sn),n=Object(o.useSelector)($s).selectedDdahIds,a=Object(o.useDispatch)(),i=r.a.useState(!1),s=Object(k.a)(i,2),c=s[0],u=s[1],l=r.a.useState(!1),d=Object(k.a)(l,2),m=d[0],p=d[1],f=r.a.useState(null),h=Object(k.a)(f,2),v=h[0],g=h[1];function y(t){g(e.find((function(e){return e.id===t}))||null),u(!0)}e.some((function(e){return null==e.assignment||null==e.assignment.applicant||null==e.assignment.position}))&&(e=[]);var E,w=e.map((function(e){return{id:e.id,position_code:e.assignment.position.position_code,last_name:e.assignment.applicant.last_name,first_name:e.assignment.applicant.first_name,total_hours:e.total_hours,status:e.status||"unsent",approved:e.approved_date?"Approved":"",readable_status:mo(e),issues:lo(e),issue_code:lo(e)?"hours_mismatch":null}})),O={},S=Object(D.a)(e);try{for(S.s();!(E=S.n()).done;){O[E.value.assignment.id]=!0}}catch(x){S.e(x)}finally{S.f()}var j,C=Object(D.a)(t);try{for(C.s();!(j=C.n()).done;){var A=j.value;"rejected"!==A.active_offer_status&&"withdrawn"!==A.active_offer_status&&(O[A.id]||w.push({position_code:A.position.position_code,last_name:A.applicant.last_name,first_name:A.applicant.first_name,total_hours:null,status:null,issues:"Missing DDAH",issue_code:"missing"}))}}catch(x){C.e(x)}finally{C.f()}w.sort((function(e,t){return e.position_code>t.position_code?1:e.position_code<t.position_code?-1:e.last_name>t.last_name?1:e.last_name<t.last_name?-1:0}));var T=[{Header:di("Position"),accessor:"position_code"},{Header:di("Last Name"),accessor:"last_name"},{Header:di("First Name"),accessor:"first_name"},{Header:di("DDAH Hours"),accessor:"total_hours",maxWidth:120,style:{textAlign:"right"}},{Header:di("Status"),accessor:"status",Cell:function(e){var t=e.row,n=Object(Ce.a)(e,["row"]);return r.a.createElement(po,Object.assign({row:t},n),r.a.createElement(ho,Object.assign({},e,{onClick:y})))}},{Header:di("Approved"),accessor:"approved",maxWidth:50,Cell:function(e){return e.value?r.a.createElement("div",{className:"accepted-ddah"},r.a.createElement(Ga.b,null)):null}},{Header:di("Issues"),accessor:"issues",Cell:fo}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(bo,{ddah:v,show:m,onHide:function(){return p(!1)}}),r.a.createElement(vo,{ddah:v,show:c,onHide:function(){return u(!1)},onEdit:function(){u(!1),p(!0)},onApprove:Object(b.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return e.next=3,a(jn(v));case 3:u(!1);case 4:case"end":return e.stop()}}),e)})))}),r.a.createElement(ar,{columns:T,data:w,selected:n,setSelected:function(e){a(function(e){return{type:"SET_SELECTED_DDAH_TABLE_ROWS",payload:e}}(e.filter((function(e){return null!=e}))))},filterable:!0}))}function yo(){var e=r.a.useState(!1),t=Object(k.a)(e,2),n=t[0],a=t[1],i=r.a.useState(!1),s=Object(k.a)(i,2),c=s[0],u=s[1],l=Object(o.useSelector)(ca),d=Object(o.useSelector)($s).selectedDdahIds,m=Object(o.useSelector)(Pn),p=Object(o.useDispatch)(),f=m.filter((function(e){return d.includes(e.id)}));return r.a.createElement("div",{className:"page-body"},r.a.createElement(Or,null,r.a.createElement(Sr,null,"Available Actions"),r.a.createElement(jr,{icon:r.a.createElement(Ga.h,null),onClick:function(){a(!0)},disabled:!l},"Add DDAH"),r.a.createElement(oo,{disabled:!l}),r.a.createElement(co,{disabled:!l}),r.a.createElement(Sr,null,"Import/Export"),r.a.createElement(no,{disabled:!l,setImportInProgress:u}),r.a.createElement(to,{disabled:!l}),r.a.createElement(Sr,null,"Selected DDAH Actions"),r.a.createElement(jr,{icon:Ga.g,onClick:function(){var e,t=Object(D.a)(f);try{for(t.s();!(e=t.n()).done;){var n=e.value;p(Cn(n))}}catch(a){t.e(a)}finally{t.f()}},disabled:0===d.length},"Email DDAH"),r.a.createElement(jr,{icon:Ga.b,onClick:function(){var e,t=Object(D.a)(f);try{for(t.s();!(e=t.n()).done;){var n=e.value;p(jn(n))}}catch(a){t.e(a)}finally{t.f()}},disabled:0===d.length},"Approve DDAH")),r.a.createElement(si,null,l?null:r.a.createElement(hi,{extraText:"To view or modify DDAHs, you must select a session."}),r.a.createElement(Vs,{show:n,onHide:function(){a(!1)}}),!c&&r.a.createElement(go,null)))}function Eo(){return r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(d.a,{to:"/assignments_and_positions/assignments"})),r.a.createElement(d.b,{exact:!0,path:"/tapp"},r.a.createElement(Ts,null)),r.a.createElement(d.b,{exact:!0,path:"/session_setup"},r.a.createElement(d.a,{to:"/session_setup/sessions"})),r.a.createElement(d.b,{exact:!0,path:"/session_setup/sessions"},r.a.createElement(vi,null)),r.a.createElement(d.b,{exact:!0,path:"/session_setup/contract_templates"},r.a.createElement(ys,null)),r.a.createElement(d.b,{exact:!0,path:"/session_setup/instructors"},r.a.createElement(oi,null)),r.a.createElement(d.b,{exact:!0,path:"/assignments_and_positions"},r.a.createElement(d.a,{to:"/assignments_and_positions/positions"})),r.a.createElement(d.b,{exact:!0,path:"/assignments_and_positions/positions"},r.a.createElement(Ii,null)),r.a.createElement(d.b,{exact:!0,path:"/assignments_and_positions/assignments"},r.a.createElement(cs,null)),r.a.createElement(d.b,{exact:!0,path:"/assignments_and_positions/ddahs"},r.a.createElement(yo,null)),r.a.createElement(d.b,{exact:!0,path:"/applicants_and_matching"},r.a.createElement(d.a,{to:"/applicants_and_matching/applicants"})),r.a.createElement(d.b,{exact:!0,path:"/applicants_and_matching/applicants"},r.a.createElement(Gs,null)))}function wo(){return r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(d.a,{to:"/tapp"})),r.a.createElement(d.b,{exact:!0,path:"/tapp"},r.a.createElement(ks,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/positions"},r.a.createElement(Ui,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/assignments"},r.a.createElement(us,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/ddahs"},r.a.createElement("div",null,"Not implemented yet")))}n(1206);function Oo(e){return r.a.createElement(m.a.Item,null,r.a.createElement(m.a.Link,Object.assign({as:c.b},e),e.children))}function So(e){var t=e.routes,n=void 0===t?[]:t,a=e.infoComponents,i=void 0===a?[]:a,s=(Object(d.g)("/:mainRoute/:subRoute?")||{params:{mainRoute:"tapp"}}).params.mainRoute;if(0===n.length)return r.a.createElement("div",null,"No Routes in Header");var o=n.map((function(e){return r.a.createElement(Oo,{title:e.description,eventKey:e.route,to:e.route,key:e.route,className:"primary"},e.name)})),c=n.filter((function(e){return e.route.substring(1)===s})).map((function(e){return(e.subroutes||[]).map((function(t){var n="".concat(e.route).concat(t.route);return r.a.createElement(Oo,{to:n,title:t.description,key:n,className:"secondary"},t.name)}))}));return r.a.createElement("div",{className:"header-container"},r.a.createElement("div",{className:"header-nav"},r.a.createElement(p.a,null,r.a.createElement(m.a,{activeKey:s,defaultActiveKey:"tapp",className:"primary-nav-links"},o)),r.a.createElement(m.a,{className:"secondary-nav-links"},c)),r.a.createElement("div",{className:"header-widgets"},i))}var jo=[{route:"/session_setup",name:"Session Setup",description:"Setup a new session or manage an existing session.",subroutes:[{route:"/sessions",name:"Sessions",description:"Manage Sessions"},{route:"/contract_templates",name:"Contract Templates",description:"Manage Contract Templates"},{route:"/instructors",name:"Instructors",description:"Manage Instructors"}]},{route:"/assignments_and_positions",name:"Assignments & Positions",description:"Manage Assignments & Positions",subroutes:[{route:"/positions",name:"Positions",description:"Manage Positions"},{route:"/assignments",name:"Assignments",description:"Manage Assignments"},{route:"/ddahs",name:"DDAHs",description:"Manage DDAHs"}]},{route:"/applicants_and_matching",name:"Applicants & Matching",description:"Manage applicants and match applicants to positions",subroutes:[{route:"/applicants",name:"Applicants",description:"Manage Applicants"}]}];function Co(){return r.a.createElement(So,{routes:jo,infoComponents:[r.a.createElement(Cs,{key:0}),r.a.createElement(As,{key:1})]})}n(1207),n(1208);var Ao=[{route:"/tapp",name:"Course Admin",description:"Administrate TAs in your courses",subroutes:[{route:"/positions",name:"Courses & Positions",description:"View your courses and positions"},{route:"/assignments",name:"TA Information",description:"View information about your TAs"},{route:"/ddahs",name:"DDAHs",description:"Manage your TAs' DDAH forms"}]},{route:"/applications",name:"Applications",description:"View information about TAs applying to your course",subroutes:[{route:"/statistics",name:"Statistics",description:"See statistics about accepted/rejected contracts"}]}];function To(){return r.a.createElement(So,{routes:Ao,infoComponents:[r.a.createElement(Cs,{key:0}),r.a.createElement(As,{key:1})]})}var ko=n(531),Do=n(365),xo=n(532),No=n.n(xo),Ho=n(1228),Po=Object(ae.createReducer)({selectedAssignmentIds:[]},Object(te.a)({},"SET_SELECTED_ROWS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{selectedAssignmentIds:t.payload})}))),Io=Object(ae.createReducer)({selectedDdahIds:[]},Object(te.a)({},"SET_SELECTED_DDAH_TABLE_ROWS",(function(e,t){return Object(l.a)(Object(l.a)({},e),{},{selectedDdahIds:t.payload})}))),Fo=oe({model:oe({status:pn,sessions:le,positions:ke,applicants:fe,applications:Ae,assignments:Pt,instructors:De,contractTemplates:Ge,users:de,ddahs:fn}),ui:oe({notifications:w.reducer,form:Ho.a,offerTable:Po,ddahsTable:Io,globals:hn})}),Uo=n(535),Ro=function(){var e={key:"root",storage:No.a,whitelist:["auth","application"]},t=Object(Do.a)(e,Fo),n=Object(ne.createStore)(t,Object(ko.composeWithDevTools)(Object(ne.applyMiddleware)(Uo.a)));return{store:n,persistor:Object(Do.b)(n)}}(),Lo=Ro.store,qo=Ro.persistor,Bo=function(e){return r.a.createElement(r.a.Fragment,null,e.children)};Bo=function(e){return r.a.createElement("div",{id:"dev-frame",className:"bg-info"},r.a.createElement("div",{id:"dev-frame-header"},r.a.createElement(p.a,{expand:!0,variant:"dark"},r.a.createElement(p.a.Brand,{href:"#/",title:"View TAPP in development mode in a framed window."},"Dev Mode"),r.a.createElement(m.a,{className:"mr-auto"},r.a.createElement(ka,{to:"/api-docs"},"API Docs")),r.a.createElement(p.a.Collapse,{className:"justify-content-end"},r.a.createElement(xa,null),r.a.createElement(Na,null)))),r.a.createElement("div",{id:"dev-frame-body"},r.a.createElement("div",{id:"dev-frame-body-inner"},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/api-docs"},r.a.createElement(Sa.a,{spec:Da,docExpansion:"list"})),r.a.createElement(d.b,null,e.children)))),r.a.createElement("div",{id:"dev-frame-footer"}))};var Mo;Mo=function(){var e=Object(o.useSelector)(Vn),t=Object(o.useDispatch)();Object(a.useEffect)((function(){t(Un("pageLoad"))}),[t]);var n=r.a.createElement("div",null,"Loading...");return"admin"===e&&(n=r.a.createElement(r.a.Fragment,null,r.a.createElement(Co,null),r.a.createElement("div",{className:"view-container"},r.a.createElement(Eo,null)))),"instructor"===e&&(n=r.a.createElement(r.a.Fragment,null,r.a.createElement(To,null),r.a.createElement("div",{className:"view-container"},r.a.createElement(wo,null)))),"ta"===e&&(n="Viewing as TA"),r.a.createElement(r.a.Fragment,null,n,r.a.createElement(Ha,null))},s.a.render(r.a.createElement(c.a,null,r.a.createElement(o.Provider,{store:Lo},r.a.createElement(u.a,{persistor:qo},r.a.createElement(Bo,null,r.a.createElement("div",{id:"app-body"},r.a.createElement(Mo,null)))))),document.getElementById("root"))},124:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var a=n(6),r=n(12);function i(e){if("string"===typeof e&&""!==e&&!Number.isNaN(+e))return+e;try{return JSON.parse(e)}catch(t){return e}}function s(e){var t,n=new URLSearchParams(e),s={},o=Object(r.a)(n.entries());try{for(o.s();!(t=o.n()).done;){var c=Object(a.a)(t.value,2),u=c[0],l=c[1];s[u]=i(l)}}catch(d){o.e(d)}finally{o.f()}return s}},263:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(3);function r(e){var t=e.oneOfType([e.number,e.string]);return{apiResponse:e.shape({status:e.oneOf(["success","error"]).isRequired,message:e.string,payload:e.any}),apiResponseSuccess:e.shape({status:e.oneOf(["success"]).isRequired,message:e.string,payload:e.any}),apiResponseError:e.shape({status:e.oneOf(["error"]).isRequired,message:e.string.isRequired,payload:e.any}),idOnly:e.shape({id:t}),session:e.shape({id:t,start_date:e.string,end_date:e.string,name:e.string.isRequired}),contractTemplateMinimal:e.shape({template_file:e.string}),contractTemplate:e.shape({template_file:e.string,template_name:e.string}),position:e.shape({position_code:e.string.isRequired,position_title:e.string,hours_per_assignment:e.number,start_date:e.string,end_date:e.string,contract_template_id:t,duties:e.string,qualifications:e.string,ad_hours_per_assignment:e.number,ad_num_assignments:e.number,ad_open_date:e.string,ad_close_date:e.string,desired_num_assignments:e.number,current_enrollment:e.number,current_waitlisted:e.number,instructor_ids:e.arrayOf(t),instructor_preference:e.arrayOf(e.shape({preference_level:e.number,applicant_id:t,instructor_id:t}))}),instructor:e.shape({first_name:e.string.isRequired,last_name:e.string.isRequired,email:e.string,utorid:e.string.isRequired}),assignment:e.shape({start_date:e.string,end_date:e.string,note:e.string,contract_override_pdf:e.string,applicant_id:t.isRequired,position_id:t.isRequired,active_offer_status:e.oneOf(["accepted","rejected","withdrawn","provisional","pending","no_offer",null]),active_offer_url_token:e.string,active_offer_recent_activity_date:e.string,active_offer_nag_count:e.number}),applicant:e.shape({utorid:e.string.isRequired,student_number:e.string,first_name:e.string.isRequired,last_name:e.string.isRequired,email:e.string,phone:e.string}),wageChunk:e.shape({start_date:e.string,end_date:e.string,hours:e.number,rate:e.number}),reportingTag:e.shape({name:e.string}),offer:e.shape({first_name:e.string,last_name:e.string,email:e.string,position_code:e.string,position_title:e.string,position_start_date:e.string,position_end_date:e.string,first_time_ta:e.bool,instructor_contact_desc:e.string,pay_period_desc:e.string,installments:e.number,ta_coordinator_name:e.string,ta_coordinator_email:e.string,emailed_date:e.string,status:e.string,accepted_date:e.string,rejected_date:e.string,withdrawn_date:e.string,url_token:e.string,nag_count:e.number}),application:e.shape({session_id:t,comments:e.string,program:e.string,department:e.string,previous_uoft_experience:e.string,yip:e.number,annotation:e.string,applicant_id:t,position_preference:e.arrayOf(e.shape({preference_level:e.number,position_id:t}))}),user:e.shape({utorid:e.string,roles:e.arrayOf(e.string)}),ddah:e.shape({assignment_id:t,signature:e.string,approved_date:e.string,accepted_date:e.string,revised_date:e.string,emailed_date:e.string,url_token:e.string,duties:e.arrayOf(e.shape({description:e.string,hours:e.number,order:e.number}))})}}r(n.n(a).a)},355:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(7),s=n(12),o=n(32),c=n(36),u=n(223),l=n.n(u),d={"/math/default.html":'<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="utf-8" />\n        <title>Offer Letter</title>\n        <style>\n            * {\n                box-sizing: border-box;\n            }\n            html {\n                margin: 0;\n                padding: 0;\n            }\n            body {\n                width: 8.5in;\n                margin: 0;\n                padding-left: 0.75in;\n                padding-right: 0.75in;\n                hyphens: auto;\n                text-align: justify;\n                box-sizing: border-box;\n                font-family: Helvetica, sans-serif;\n                font-size: 12pt;\n            }\n            .i {\n                font-style: italic;\n            }\n            .emphcolor {\n                color: red;\n            }\n            table.appointment-summary {\n                margin-left: 1in;\n                font-size: 0.9em;\n            }\n            .appointment-summary th {\n                padding-right: 0.5em;\n                text-align: right;\n                font-weight: normal;\n            }\n            .letter-head p {\n                margin-bottom: 0.5in;\n            }\n            .letter-foot {\n                margin-top: 1in;\n            }\n            .signature {\n                font-family: alex_brushregular, cursive;\n                font-size: 30pt;\n                margin-left: 0.5in;\n                margin-bottom: 0.1in;\n            }\n            .applicant .signature {\n                border-bottom: 1px solid black;\n                min-width: 2.5in;\n                display: inline-block;\n                margin-left: 0;\n            }\n            .checkbox {\n                font-size: 18pt;\n            }\n\n            @media only screen and (max-width: 9in) {\n                /* when printed, these styles won\'t show\n\t\t\t\tbecause the "screen" is 8.5in */\n                body {\n                    width: unset;\n                    padding-bottom: 0.5in;\n                    padding-left: 2em;\n                    padding-right: 2em;\n                }\n            }\n        </style>\n        <link rel="stylesheet" href="font.css" />\n        <link rel="stylesheet" href="header.css" />\n        \x3c!-- for rendering with wkhtmltopdf styles need to be inlined; when rendered directly in a browser,\n\tthis will just be invalid CSS --\x3e\n        <style>\n            {{ style_font }}\n        </style>\n        <style>\n            {{ style_header }}\n        </style>\n    </head>\n    <body>\n        <div class="letter-head">\n            <div class="uoftlogo"></div>\n            <p>{{ date }}</p>\n            <p>\n                {{ first_name }} {{ last_name }}<br />\n                c/o Some Department<br />\n                University of Toronto\n            </p>\n            <p>Dear {{ first_name }},</p>\n        </div>\n        <div class="letter-body">\n            <p>\n                I am pleased to offer you an appointment as a Teaching Assistant\n                in Some Department. The starting date of your appointment will\n                be {{ start_date | date: "%b %d, %Y" }} and this appointment\n                will end on {{ end_date | date: "%b %d, %Y" }} with no further\n                notice to you.\n            </p>\n            <h3 class="i">Appointment Summary</h3>\n            <table class="appointment-summary">\n                <tr>\n                    <th>Appointment:</th>\n                    <td class="emphcolor">\n                        {{ position_code }} {{ position_title }}\n                    </td>\n                </tr>\n                <tr>\n                    <th>Hours:</th>\n                    <td class="emphcolor">{{ hours }}</td>\n                </tr>\n                <tr>\n                    <th>Start Date:</th>\n                    <td>{{ start_date | date: "%b %d, %Y" }}</td>\n                </tr>\n                <tr>\n                    <th>End Date:</th>\n                    <td>{{ end_date | date: "%b %d, %Y" }}</td>\n                </tr>\n                <tr>\n                    <th>Rate:</th>\n                    <td>{{ pay_period_desc }}</td>\n                </tr>\n            </table>\n\n            <p>\n                Your appointment will be for {{ hours }} hours for {{\n                position_code }}. Your Course Coordinator(s) {{\n                instructor_contact_desc }} will be in contact with you. You will\n                be paid {{ pay_period_desc }} for this position. You will be\n                paid in {{ installments }} instalments, once per month for the\n                period of your appointment. Your salary will be paid by direct\n                deposit.\n            </p>\n            Your payroll documentation will be available online through the\n            University\u2019s Employee Self-Service (ESS) at\n            <a href="http://ess.hrandequity.utoronto.ca/"\n                >ess.hrandequity.utoronto.ca/</a\n            >. This includes electronic delivery of your pay statement, tax\n            documentation, and other payroll documentation as made available\n            from time to time. You are able to print copies of these documents\n            directly from ESS.\n            <p>\n                By signing this Employment Agreement, you authorize the\n                University to provide your T4 slips electronically and not in a\n                paper format. If you wish to discuss an alternative format,\n                please contact Central Payroll Services at\n                payroll.hr@utoronto.ca.\n            </p>\n            <p>\n                This appointment is being granted on the basis that you are a\n                student or Post-Doctoral Fellow (PDF) at the University of\n                Toronto on the starting date of the appointment. If you are not\n                a student or PDF on the starting date of this appointment, this\n                offer is revoked and the University will have no obligations\n                under this letter.\n            </p>\n            <p>\n                As a Teaching Assistant, you will be a member of the Canadian\n                Union of Public Employees (CUPE) Local 3902, Unit 1 bargaining\n                unit. Your employment will be governed by the terms and\n                conditions of the collective agreement between the University of\n                Toronto and CUPE Local 3902, which may be found on the web at\n                <br />\n                <a\n                    href="http://agreements.hrandequity.utoronto.ca/#CUPE3902_Unit1"\n                    >agreements.hrandequity.utoronto.ca/#CUPE3902_Unit1</a\n                >\n                <br />\n                Once you accept the offer of employment, a copy of the agreement\n                will be given to you if you do not already have one. A statement\n                about the Union, along with other information about the Union,\n                can be found on the Union\'s website (<a\n                    href="http://www.cupe3902.org/unit-1/"\n                    >http://www.cupe3902.org/unit-1/</a\n                >). All of this information is that of the Union, represents the\n                views of the Union, and has not been approved or endorsed by the\n                University.\n            </p>\n            <h3>Required Training</h3>\n            <p>\n                You are required to take the following training:\n            </p>\n            <ul>\n                <li>\n                    U of T AODA Online Training, provided by the Accessibility\n                    for Ontarians with Disabilities Act (AODA) Office, available\n                    at\n                    <a href="http://aoda.hrandequity.utoronto.ca/"\n                        >aoda.hrandequity.utoronto.ca/</a\n                    >\n                </li>\n            </ul>\n            <p>\n                If you are new to the University, or have not previously\n                completed the training, you will be notified by email when the\n                training module becomes available for your completion, normally\n                one month after the start date of this appointment. Completion\n                of this training will be automatically captured in the system\n                and you will be paid for this training in accordance with the\n                rates set out in your collective agreement. Please note that you\n                only need to complete the above training program once with the\n                University.\n            </p>\n            <h3>Policies & Procedures</h3>\n            <p>\n                You will also be subject to and bound by University policies of\n                general application and their related guidelines. The policies\n                are listed on the Governing Council website at\n                <a\n                    href="http://www.governingcouncil.utoronto.ca/Governing_Council/Policies.htm"\n                    >www.governingcouncil.utoronto.ca/Governing_Council/Policies.htm</a\n                >\n                For convenience, a partial list of policies, those applicable to\n                all employees, and related guidelines can be found on the Human\n                Resources and Equity website at policies.hrandequity.utoronto.ca\n                Printed versions will be provided, upon request, through Human\n                Resources or your supervisor.\n            </p>\n            <p>\n                You should pay particular attention to those policies which\n                confirm the University\u2019s commitment to, and your obligation to\n                support, a workplace that is free from discrimination and\n                harassment as set out in the Human Rights Code, is safe as set\n                out in the Occupational Health and Safety Act, and that respects\n                the University\'s commitment to equity and to workplace civility.\n            </p>\n            <p>\n                All of the applicable policies may be amended and/or new\n                policies may be introduced from time to time. When this happens,\n                if notice is required you will be given notice as the University\n                deems necessary and the amendments will become binding terms of\n                your employment contract with the University.\n            </p>\n            <h3>Accessibility</h3>\n            <p>\n                The University has a number of programs and services available\n                to employees who have need of accommodation due to disability\n                through its Health & Well-being Programs and Services (<a\n                    href="http://www.hrandequity.utoronto.ca/about-hr-equity/health.htm"\n                    >www.hrandequity.utoronto.ca/about-hr-equity/health.htm</a\n                >). A description of the accommodation process is available in\n                the Accommodation for Employees with Disabilities: U of T\n                Guidelines, which may be found at:\n                <br />\n                <a\n                    href="http://well-being.hrandequity.utoronto.ca/services/#accommodation"\n                    >well-being.hrandequity.utoronto.ca/services/#accommodation</a\n                >\n                <br />\n                In the event that you have a disability that would impact upon\n                how you would respond to an emergency in the workplace (e.g.,\n                situations requiring evacuation), you should contact Health &\n                Well-being Programs & Services at 416.978.2149 as soon as\n                possible so that you can be provided with information regarding\n                an individualized emergency response plan.\n            </p>\n            <p>\n                The law requires the Employment Standards Act Poster to be\n                provided to all employees; it is available on the HR & Equity\n                website at\n                <a\n                    href="http://www.hrandequity.utoronto.ca/news/employment-standards-ontario"\n                    >www.hrandequity.utoronto.ca/news/employment-standards-ontario</a\n                >\n                This poster describes the minimum rights and obligations\n                contained in the Employment Standards Act. Please note that in\n                many respects this offer of employment exceeds the minimum\n                requirements set out in the Act.\n            </p>\n            <p>\n                Your duties may include all or any combination of the following:\n                grading, scheduled tutorials, office hours, Math Aid Centre\n                hours, and test and exam invigilation. You will be expected to\n                complete all grading for all student work that is completed\n                during the term of the appointment, up to and including final\n                exams.\n            </p>\n            <p>\n                Within 15 working days after the date of this letter, you will\n                be given the opportunity to review the Description of Duties and\n                Allocation of Hours (DDAH) form, which will set out more\n                specifically the duties of your position, and the hours assigned\n                to each.\n            </p>\n            <p>\n                Please sign below to indicate your acceptance of this offer, and\n                return a copy of this letter to me as soon as possible but no\n                later than 2 days after you have been provided with the DDAH\n                form. If we have not heard from you by this deadline, this offer\n                may be withdrawn. If you are unable to accept this offer, please\n                advise me immediately.\n            </p>\n            <p>\n                If you have any questions, please contact me via email at\n                <a href="mailto:tacoord@toronto.edu">tacoord@toronto.edu</a>\n            </p>\n        </div>\n        <div class="letter-foot tacoordinator">\n            <p>Yours sincerely,</p>\n            <div class="signature">Tom Tomson</div>\n            <div class="details">\n                Tom Tomson<br />TA Coordinator<br />Some Department\n            </div>\n        </div>\n        <div>\n            <p>\n                <span class="checkbox"\n                    >{% if signature == blank %}\u2610{% else %}\u2611{% endif %}</span\n                >\n                I confirm that I will be registered as a University of Toronto\n                student or PDF on the date that this appointment begins. I\n                understand that if I should cease to be registered as a\n                University of Toronto student or PDF during the period of this\n                appointment, for any reason other than convocation, I must\n                immediately notify my supervisor, and my appointment may be\n                terminated.\n            </p>\n        </div>\n        <div class="letter-foot applicant">\n            <p>Please sign below to accept this offer.</p>\n            <div class="signature">{{ signature }}</div>\n            <div class="details">\n                Applicant Signature\n            </div>\n        </div>\n    </body>\n</html>',"/math/oto.html":'<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="utf-8" />\n        <title>Offer Letter</title>\n        <style>\n            * {\n                box-sizing: border-box;\n            }\n            html {\n                margin: 0;\n                padding: 0;\n            }\n            body {\n                width: 8.5in;\n                margin: 0;\n                padding-left: 0.75in;\n                padding-right: 0.75in;\n                hyphens: auto;\n                text-align: justify;\n                box-sizing: border-box;\n                font-family: Helvetica, sans-serif;\n                font-size: 12pt;\n            }\n            .i {\n                font-style: italic;\n            }\n            .emphcolor {\n                color: red;\n            }\n            table.appointment-summary {\n                margin-left: 1in;\n                font-size: 0.9em;\n            }\n            .appointment-summary th {\n                padding-right: 0.5em;\n                text-align: right;\n                font-weight: normal;\n            }\n            .letter-head p {\n                margin-bottom: 0.5in;\n            }\n            .letter-foot {\n                margin-top: 1in;\n            }\n            .signature {\n                font-family: alex_brushregular, cursive;\n                font-size: 30pt;\n                margin-left: 0.5in;\n                margin-bottom: 0.1in;\n            }\n            .applicant .signature {\n                border-bottom: 1px solid black;\n                min-width: 2.5in;\n                display: inline-block;\n                margin-left: 0;\n            }\n            .checkbox {\n                font-size: 18pt;\n            }\n\n            @media only screen and (max-width: 9in) {\n                /* when printed, these styles won\'t show\n\t\t\t\tbecause the "screen" is 8.5in */\n                body {\n                    width: unset;\n                    padding-bottom: 0.5in;\n                    padding-left: 2em;\n                    padding-right: 2em;\n                }\n            }\n        </style>\n        <link rel="stylesheet" href="font.css" />\n        <link rel="stylesheet" href="header.css" />\n        \x3c!-- for rendering with wkhtmltopdf styles need to be inlined; when rendered directly in a browser,\n\tthis will just be invalid CSS --\x3e\n        <style>\n            {{ style_font }}\n        </style>\n        <style>\n            {{ style_header }}\n        </style>\n    </head>\n    <body>\n        <div class="letter-head">\n            <div class="uoftlogo"></div>\n            <p>{{ date }}</p>\n            <p>\n                {{ first_name }} {{ last_name }}<br />\n                c/o Some Department<br />\n                University of Toronto\n            </p>\n            <p>Dear {{ first_name }},</p>\n        </div>\n        <div class="letter-body">\n            <p>\n                I am pleased to offer you an appointment as a Teaching Assistant\n                in Some Department. The starting date of your appointment will\n                be {{ start_date | date: "%b %d, %Y" }} and this appointment\n                will end on {{ end_date | date: "%b %d, %Y" }} with no further\n                notice to you.\n            </p>\n            <h3 class="i">Appointment Summary</h3>\n            <table class="appointment-summary">\n                <tr>\n                    <th>Appointment:</th>\n                    <td class="emphcolor">\n                        {{ position_code }} {{ position_title }}\n                    </td>\n                </tr>\n                <tr>\n                    <th>Hours:</th>\n                    <td class="emphcolor">{{ hours }}</td>\n                </tr>\n                <tr>\n                    <th>Start Date:</th>\n                    <td>{{ start_date | date: "%b %d, %Y" }}</td>\n                </tr>\n                <tr>\n                    <th>End Date:</th>\n                    <td>{{ end_date | date: "%b %d, %Y" }}</td>\n                </tr>\n                <tr>\n                    <th>Rate:</th>\n                    <td>{{ pay_period_desc }}</td>\n                </tr>\n            </table>\n\n            <p>\n                Your appointment will be for {{ hours }} hours for {{\n                position_code }}. This is a ONE TIME ONLY appointment. Your Course Coordinator(s) {{\n                instructor_contact_desc }} will be in contact with you. You will\n                be paid {{ pay_period_desc }} for this position. You will be\n                paid in one instalment. Your salary will be paid by direct\n                deposit.\n            </p>\n            Your payroll documentation will be available online through the\n            University\u2019s Employee Self-Service (ESS) at\n            <a href="http://ess.hrandequity.utoronto.ca/"\n                >ess.hrandequity.utoronto.ca/</a\n            >. This includes electronic delivery of your pay statement, tax\n            documentation, and other payroll documentation as made available\n            from time to time. You are able to print copies of these documents\n            directly from ESS.\n            <p>\n                By signing this Employment Agreement, you authorize the\n                University to provide your T4 slips electronically and not in a\n                paper format. If you wish to discuss an alternative format,\n                please contact Central Payroll Services at\n                payroll.hr@utoronto.ca.\n            </p>\n            <p>\n                This appointment is being granted on the basis that you are a\n                student or Post-Doctoral Fellow (PDF) at the University of\n                Toronto on the starting date of the appointment. If you are not\n                a student or PDF on the starting date of this appointment, this\n                offer is revoked and the University will have no obligations\n                under this letter.\n            </p>\n            <p>\n                As a Teaching Assistant, you will be a member of the Canadian\n                Union of Public Employees (CUPE) Local 3902, Unit 1 bargaining\n                unit. Your employment will be governed by the terms and\n                conditions of the collective agreement between the University of\n                Toronto and CUPE Local 3902, which may be found on the web at\n                <br />\n                <a\n                    href="http://agreements.hrandequity.utoronto.ca/#CUPE3902_Unit1"\n                    >agreements.hrandequity.utoronto.ca/#CUPE3902_Unit1</a\n                >\n                <br />\n                Once you accept the offer of employment, a copy of the agreement\n                will be given to you if you do not already have one. A statement\n                about the Union, along with other information about the Union,\n                can be found on the Union\'s website (<a\n                    href="http://www.cupe3902.org/unit-1/"\n                    >http://www.cupe3902.org/unit-1/</a\n                >). All of this information is that of the Union, represents the\n                views of the Union, and has not been approved or endorsed by the\n                University.\n            </p>\n            <h3>Required Training</h3>\n            <p>\n                You are required to take the following training:\n            </p>\n            <ul>\n                <li>\n                    U of T AODA Online Training, provided by the Accessibility\n                    for Ontarians with Disabilities Act (AODA) Office, available\n                    at\n                    <a href="http://aoda.hrandequity.utoronto.ca/"\n                        >aoda.hrandequity.utoronto.ca/</a\n                    >\n                </li>\n            </ul>\n            <p>\n                If you are new to the University, or have not previously\n                completed the training, you will be notified by email when the\n                training module becomes available for your completion, normally\n                one month after the start date of this appointment. Completion\n                of this training will be automatically captured in the system\n                and you will be paid for this training in accordance with the\n                rates set out in your collective agreement. Please note that you\n                only need to complete the above training program once with the\n                University.\n            </p>\n            <h3>Policies & Procedures</h3>\n            <p>\n                You will also be subject to and bound by University policies of\n                general application and their related guidelines. The policies\n                are listed on the Governing Council website at\n                <a\n                    href="http://www.governingcouncil.utoronto.ca/Governing_Council/Policies.htm"\n                    >www.governingcouncil.utoronto.ca/Governing_Council/Policies.htm</a\n                >\n                For convenience, a partial list of policies, those applicable to\n                all employees, and related guidelines can be found on the Human\n                Resources and Equity website at policies.hrandequity.utoronto.ca\n                Printed versions will be provided, upon request, through Human\n                Resources or your supervisor.\n            </p>\n            <p>\n                You should pay particular attention to those policies which\n                confirm the University\u2019s commitment to, and your obligation to\n                support, a workplace that is free from discrimination and\n                harassment as set out in the Human Rights Code, is safe as set\n                out in the Occupational Health and Safety Act, and that respects\n                the University\'s commitment to equity and to workplace civility.\n            </p>\n            <p>\n                All of the applicable policies may be amended and/or new\n                policies may be introduced from time to time. When this happens,\n                if notice is required you will be given notice as the University\n                deems necessary and the amendments will become binding terms of\n                your employment contract with the University.\n            </p>\n            <h3>Accessibility</h3>\n            <p>\n                The University has a number of programs and services available\n                to employees who have need of accommodation due to disability\n                through its Health & Well-being Programs and Services (<a\n                    href="http://www.hrandequity.utoronto.ca/about-hr-equity/health.htm"\n                    >www.hrandequity.utoronto.ca/about-hr-equity/health.htm</a\n                >). A description of the accommodation process is available in\n                the Accommodation for Employees with Disabilities: U of T\n                Guidelines, which may be found at:\n                <br />\n                <a\n                    href="http://well-being.hrandequity.utoronto.ca/services/#accommodation"\n                    >well-being.hrandequity.utoronto.ca/services/#accommodation</a\n                >\n                <br />\n                In the event that you have a disability that would impact upon\n                how you would respond to an emergency in the workplace (e.g.,\n                situations requiring evacuation), you should contact Health &\n                Well-being Programs & Services at 416.978.2149 as soon as\n                possible so that you can be provided with information regarding\n                an individualized emergency response plan.\n            </p>\n            <p>\n                The law requires the Employment Standards Act Poster to be\n                provided to all employees; it is available on the HR & Equity\n                website at\n                <a\n                    href="http://www.hrandequity.utoronto.ca/news/employment-standards-ontario"\n                    >www.hrandequity.utoronto.ca/news/employment-standards-ontario</a\n                >\n                This poster describes the minimum rights and obligations\n                contained in the Employment Standards Act. Please note that in\n                many respects this offer of employment exceeds the minimum\n                requirements set out in the Act.\n            </p>\n            <p>\n                Your duties may include all or any combination of the following:\n                grading, scheduled tutorials, office hours, Math Aid Centre\n                hours, and test and exam invigilation. You will be expected to\n                complete all grading for all student work that is completed\n                during the term of the appointment, up to and including final\n                exams.\n            </p>\n            <p>\n                Within 15 working days after the date of this letter, you will\n                be given the opportunity to review the Description of Duties and\n                Allocation of Hours (DDAH) form, which will set out more\n                specifically the duties of your position, and the hours assigned\n                to each.\n            </p>\n            <p>\n                Please sign below to indicate your acceptance of this offer, and\n                return a copy of this letter to me as soon as possible but no\n                later than 2 days after you have been provided with the DDAH\n                form. If we have not heard from you by this deadline, this offer\n                may be withdrawn. If you are unable to accept this offer, please\n                advise me immediately.\n            </p>\n            <p>\n                If you have any questions, please contact me via email at\n                <a href="mailto:tacoord@toronto.edu">tacoord@toronto.edu</a>\n            </p>\n        </div>\n        <div class="letter-foot tacoordinator">\n            <p>Yours sincerely,</p>\n            <div class="signature">Tom Tomson</div>\n            <div class="details">\n                Tom Tomson<br />TA Coordinator<br />Some Department\n            </div>\n        </div>\n        <div>\n            <p>\n                <span class="checkbox"\n                    >{% if signature == blank %}\u2610{% else %}\u2611{% endif %}</span\n                >\n                I confirm that I will be registered as a University of Toronto\n                student or PDF on the date that this appointment begins. I\n                understand that if I should cease to be registered as a\n                University of Toronto student or PDF during the period of this\n                appointment, for any reason other than convocation, I must\n                immediately notify my supervisor, and my appointment may be\n                terminated.\n            </p>\n        </div>\n        <div class="letter-foot applicant">\n            <p>Please sign below to accept this offer.</p>\n            <div class="signature">{{ signature }}</div>\n            <div class="details">\n                Applicant Signature\n            </div>\n        </div>\n    </body>\n</html>'};d["/math/default2018.html"]=d["/math/default.html"],d["/math/invigilate.html"]=d["/math/default.html"],d["/math/invigilate2014.html"]=d["/math/default.html"];var m={sessions:[{id:1,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",name:"2019 Fall",rate1:45.55,rate2:47.33},{id:2,start_date:"2020-01-01T00:00:00.000Z",end_date:"2020-04-30T00:00:00.000Z",name:"2021 Spring",rate1:45.55,rate2:null}],available_contract_templates:[{template_file:"/math/default.html"},{template_file:"/math/default2018.html"},{template_file:"/math/invigilate.html"},{template_file:"/math/invigilate2014.html"},{template_file:"/math/oto.html"}],contract_templates:[{id:1,template_name:"standard",template_file:"/math/default.html"},{id:2,template_name:"oto",template_file:"/math/oto.html"},{id:3,template_name:"standard",template_file:"/math/default2018.html"},{id:4,template_name:"invigilate",template_file:"/math/invigilate.html"}],contract_templates_by_session:{1:[1,2],2:[3,4]},contract_templates_by_filename:d,instructors:[{id:1e3,last_name:"Smith",first_name:"Henry",email:"hery.smith@utoronto.ca",utorid:"smithh"},{id:1001,last_name:"Garcia",first_name:"Emily",email:"emily.garcia@utoronto.ca",utorid:"garciae"},{id:1002,last_name:"Miller",first_name:"Megan",email:"megan.miller@utoronto.ca",utorid:"millerm"},{id:1003,last_name:"Beera",first_name:"Lizzy",email:"lizzy.beera@utoronto.ca",utorid:"beeral"}],positions_by_session:{1:[10,11,14,15,16],2:[12,13]},positions:[{id:10,position_code:"MAT135H1F",position_title:"Calculus I",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:1,duties:"Tutorials",qualifications:"Teaching skill",ad_hours_per_assignment:70,ad_num_assignments:15,ad_open_date:"2019-08-01T00:00:00.000Z",ad_close_date:"2019-08-15T00:00:00.000Z",desired_num_assignments:15,current_enrollment:1200,current_waitlisted:200,instructor_ids:[1e3,1001],instructor_preferences:[{preference_level:2,applicant_id:2e3,instructor_id:1e3},{preference_level:1,applicant_id:2002,instructor_id:1e3},{preference_level:-1,applicant_id:2005,instructor_id:1001},{preference_level:1,applicant_id:2002,instructor_id:1001},{preference_level:1,applicant_id:2006,instructor_id:1001}]},{id:11,position_code:"MAT136H1F",position_title:"Calculus II",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:2,instructor_ids:[]},{id:12,position_code:"CSC135H1F",position_title:"Computer Fun",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",duties:"Tutorials",contract_template_id:3,instructor_ids:[1e3],instructor_preferences:[{preference_level:-1,applicant_id:2005,instructor_id:1e3},{preference_level:2,applicant_id:2001,instructor_id:1e3},{preference_level:1,applicant_id:2006,instructor_id:1e3}]},{id:13,position_code:"MAT235H1F",position_title:"Calculus III",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:3,instructor_ids:[1002],instructor_preferences:[{preference_level:2,applicant_id:2e3,instructor_id:1002},{preference_level:1,applicant_id:2002,instructor_id:1002}]},{instructor_ids:[1002],position_code:"CSC100H1S",position_title:"Computers for Humans",hours_per_assignment:100,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",contract_template_id:1,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:14},{instructor_ids:[1e3],position_code:"MAT137Y1Y",position_title:"Calculus!",hours_per_assignment:250,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",contract_template_id:1,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",qualifications:"Skilled Proofs Reader",current_enrollment:1500,current_waitlisted:78,desired_num_assignments:22,id:15},{instructor_ids:[1001],position_code:"MAT135H1F Head TA",position_title:"Calculus I",hours_per_assignment:225,duties:"Top-notch Head TA Stuff",contract_template_id:1,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",desired_num_assignments:3,id:16}],applicants:[{id:2e3,utorid:"weasleyr",student_number:"89013443",first_name:"Ron",last_name:"Weasley",email:"ron@potter.com",phone:"543-223-9993"},{id:2001,utorid:"potterh",student_number:"999666999",first_name:"Harry",last_name:"Potter",email:"harry@potter.com"},{id:2002,utorid:"smithb",email:"smithb@mail.utoronto.ca",first_name:"Bethany",last_name:"Smith",student_number:"131382748"},{id:2003,utorid:"wilsonh",email:"wilsonh@mail.utoronto.ca",first_name:"Hanna",last_name:"Wilson",student_number:"600366904"},{id:2004,utorid:"molinat",email:"molinat@mail.utoronto.ca",first_name:"Troy",last_name:"Molina",student_number:"328333023"},{id:2005,utorid:"howeyb",email:"howeyb@mail.utoronto.ca",first_name:"Brett",last_name:"Howey",student_number:"329613524"},{id:2006,utorid:"brownd",email:"brownd@mail.utoronto.ca",first_name:"David",last_name:"Brown",student_number:"29151485"}],assignments_by_session:{1:[100,101,102,103,104,105,106,107,108,109],2:[]},assignments:[{id:100,position_id:10,applicant_id:2001,hours:90},{id:101,position_id:10,applicant_id:2005,hours:95},{note:"",position_id:16,applicant_id:2e3,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",id:102},{note:"",position_id:16,applicant_id:2002,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",id:103},{note:"",position_id:15,applicant_id:2001,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:104},{note:"",position_id:15,applicant_id:2002,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:105},{note:"",position_id:15,applicant_id:2005,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:106},{note:"",position_id:15,applicant_id:2e3,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:107},{note:"",position_id:15,applicant_id:2006,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:108},{note:"",position_id:14,applicant_id:2002,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:109}],wage_chunks:[{id:3e3,assignment_id:100,hours:20,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",rate:10.01},{id:3001,assignment_id:100,hours:35,start_date:"2020-01-01T00:00:00.000Z",end_date:"2020-04-20T00:00:00.000Z",rate:12.02},{id:3002,assignment_id:101,hours:95,start_date:"2019-09-01T00:00:00.000Z",end_date:"2020-04-20T00:00:00.000Z",rate:null},{id:3003,assignment_id:102,hours:225,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z"},{id:3004,assignment_id:103,hours:225,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z"},{id:3005,assignment_id:104,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3006,assignment_id:104,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3007,assignment_id:105,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3008,assignment_id:105,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3009,assignment_id:106,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3010,assignment_id:106,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3011,assignment_id:107,hours:100,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3012,assignment_id:107,hours:100,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3013,assignment_id:108,hours:100,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3014,assignment_id:108,hours:100,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3015,assignment_id:109,hours:100,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"}],offers:[{id:1e4,assignment_id:100,status:"withdrawn"},{id:10001,assignment_id:100,status:"pending"},{id:10002,assignment_id:101,status:"accepted"},{id:10003,assignment_id:102,status:"withdrawn"}],applications:[{id:15e3,comments:"",program:"Phd",department:"Computer Science",previous_uoft_ta_experience:"Last year I TAed a bunch",yip:2,annotation:"",session_id:1,applicant_id:2e3,position_preferences:[{preference_level:2,position_id:10},{preference_level:3,position_id:15}]},{id:15001,comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2001,position_preferences:[{preference_level:0,position_id:12},{preference_level:3,position_id:13}]},{id:15002,comments:"",program:"Phd",department:"Math",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2002,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{id:15003,comments:"",program:"Phd",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2005,position_preferences:[{preference_level:2,position_id:10},{preference_level:3,position_id:13},{preference_level:0,position_id:12},{preference_level:1,position_id:11}]},{id:15004,comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2006,position_preferences:[{preference_level:3,position_id:10},{preference_level:0,position_id:13},{preference_level:2,position_id:12}]},{id:15005,comments:"",program:"UG",department:"Math",previous_uoft_ta_experience:"",yip:3,annotation:"",session_id:2,applicant_id:2002,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{id:15006,comments:"",program:"MSc",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:2,applicant_id:2003,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{id:15007,comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:4,annotation:"",session_id:2,applicant_id:2004,position_preferences:[{preference_level:1,position_id:10},{preference_level:3,position_id:13}]}],ddahs:[{id:700,assignment_id:100,signature:null,approved_date:null,accepted_date:null,revised_date:null,emailed_date:null,url_token:"DJAKSLJLFD",duties:[{order:2,hours:25,description:"Marking the midterm"},{order:1,hours:4,description:"Initial training"},{order:3,hours:40,description:"Running tutorials"}]},{id:701,assignment_id:101,signature:"Brett Howey",approved_date:null,accepted_date:"2019-09-02T00:00:00.000Z",revised_date:null,emailed_date:"2019-09-02T00:00:00.000Z",url_token:"somerandomtoken",duties:[{order:2,hours:50,description:"Marking the midterm"},{order:1,hours:6,description:"Initial training"}]}],users:[{email:"hery.smith@utoronto.ca",utorid:"smithh",roles:["admin","instructor"]},{email:"emily.garcia@utoronto.ca",utorid:"garciae",roles:["instructor"]},{email:"megan.miller@utoronto.ca",utorid:"millerm",roles:["instructor"]},{email:"lizzy.beera@utoronto.ca",utorid:"beeral",roles:["instructor"]}],active_user:"smithh"},p=n(114),f=n(63),h=n(41),v=n(42),_=n(11),b=n(4),g=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.sessions)}return Object(c.a)(n,[{key:"create",value:function(e){var t=Object(p.a)(Object(f.a)(n.prototype),"create",this).call(this,e);return this.data.assignments_by_session[t.id]=[],t}},{key:"findAll",value:function(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(e=Object(p.a)(Object(f.a)(n.prototype),"findAll",this)).call.apply(e,[this].concat(a))}},{key:"validateNew",value:function(e){var t=Object(_.j)(e,this.ownData,{name:{required:!0,unique:!0}});if(t)throw new Error(t)}},{key:"validateProp",value:function(e,t,n){if("name"===e){if(void 0===t||0===t.length)throw new Error("Property ".concat(e," cannot be empty or undefined."));var a=this.findAll().filter((function(e){return e.id!==n})),r=Object(_.j)({name:t},a,{name:{unique:!0}});if(r)throw new Error(r)}return!0}}]),n}(_.a),y={get:{"/sessions":Object(b.b)({func:function(e){return new g(e).findAll()},summary:"Get all available sessions",returns:b.d.arrayOf(b.a.session)})},post:{"/sessions":Object(b.b)({func:function(e,t,n){return Object(_.e)(t,"admin"),new g(e).upsert(n)},summary:"Upsert a session",returns:b.a.session,posts:b.a.session}),"/sessions/delete":Object(b.b)({func:function(e,t,n){return Object(_.e)(t,"admin"),new g(e).delete(n)},summary:"Delete a session",posts:b.a.idOnly,returns:b.a.session})}},E=n(25),w=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).ownData=a.data.contract_templates,a}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(_.j)(e,this.ownData,{template_name:{required:!0},template_file:{required:!0}});if(n)throw new Error(n);if(t){var a=Object(_.j)(e,this.findAllBySession(t),{template_name:{required:!0,unique:!0}});if(a)throw new Error(a)}}},{key:"upload",value:function(e){var t=e.file_contents,n=e.file_name;this.data.contract_templates_by_filename[n]=t,this.data.available_contract_templates.push({template_file:n})}},{key:"getTemplateHtml",value:function(e){if(!((e=new n(this.data).find(e)).template_file in this.data.contract_templates_by_filename))throw new Error("Could not find Html for template ".concat(e.template_file));return this.data.contract_templates_by_filename[e.template_file]}},{key:"findAllBySession",value:function(e){var t=new g(this.data).find(e);return Object(_.h)(this.data.contract_templates_by_session[t.id]||[],this.ownData)}},{key:"upsertBySession",value:function(e,t){var n=new g(this.data).find(t);this.find(e)||this.validateNew(e,n);var a=this.upsert(e);return this.data.contract_templates_by_session[n.id]=this.data.contract_templates_by_session[n.id]||[],this.data.contract_templates_by_session[n.id].push(a.id),a}}]),n}(_.a),O={get:{"/available_contract_templates":Object(b.b)({func:function(e){return Object(E.a)(e.available_contract_templates)},summary:"Get all available contract templates (these are literal files on the server).",returns:b.d.arrayOf(b.a.contractTemplateMinimal)}),"/sessions/:session_id/contract_templates":Object(b.b)({func:function(e,t){return new w(e).findAllBySession(t.session_id)},summary:"Get contract templates associated with this session.",returns:b.d.arrayOf(b.a.contractTemplate)}),"/contract_templates/:template_id/view":Object(b.b)({func:function(e,t){return new w(e).getTemplateHtml(t.template_id)},summary:"Get a preview of the contact template (i.e., the actual HTML).",returns:b.d.string}),"/contract_templates/:template_id/download":Object(b.b)({func:function(e,t){var n=t.template_id,a=new w(e),r=a.getTemplateHtml(n),i=(new TextEncoder).encode(r);return{file_name:a.find(n).template_file,mime_type:"text/html",content:Object(_.c)(i)}},summary:"Download the raw HTML template associated with the contract-template. No substitutions are made to this file. The `content` filed is encoded in Base64 and may be a binary file (e.g., a zip file).",returns:b.d.shape({file_name:b.d.string,mime_type:b.d.string,content:b.d.string})})},post:{"/sessions/:session_id/contract_templates":Object(b.b)({func:function(e,t,n){return new w(e).upsertBySession(n,t.session_id)},summary:"Associate a position template with a session; this method upserts",posts:b.a.contractTemplate,returns:b.a.contractTemplate}),"/contract_templates/upload":Object(b.b)({func:function(e,t,n){Object(_.e)(t,"admin");var a=n.file_name,r=n.content,i=Object(_.b)(r);return new w(e).upload({file_contents:i,file_name:a}),Object(E.a)(e.available_contract_templates)},summary:"Upload a base64-encoded contract template. (The contract template should be utf-8 encoded HTML).",posts:b.d.shape({file_name:b.d.string,content:b.d.string}),returns:b.d.arrayOf(b.a.contractTemplateMinimal)})}},S=n(2),j=n(6),C=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.users)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=Object(_.j)(e,this.ownData,{utorid:{required:!0,unique:!0}});if(t)throw new Error(t)}},{key:"rawFind",value:function(e){return null==e?null:null!=e.id?Object(_.g)(e,this.ownData):null!=e.utorid?Object(_.g)(e,this.ownData,"utorid"):Object(_.g)({utorid:e},this.ownData,"utorid")}},{key:"setActiveUser",value:function(e){var t=this.find(e);if(!t)throw new Error("Cannot find user ".concat(JSON.stringify(e)," to set as active"));this.data.active_user=t.utorid}},{key:"getActiveUser",value:function(){return this.find(this.data.active_user)}}]),n}(_.a),A={get:{"/users":Object(b.b)({func:function(e){return new C(e).findAll()},summary:"Get all available users.",returns:b.d.arrayOf(b.a.user)}),"/active_user":Object(b.b)({func:function(e){return new C(e).getActiveUser()},summary:"Gets the currently active user.",returns:b.d.arrayOf(b.a.user),roles:["instructor","ta"]})},post:{"/users":Object(b.b)({func:function(e,t,n){return new C(e).upsert(n)},summary:"Upserts user info",returns:b.d.arrayOf(b.a.user),posts:b.a.user})}},T=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.instructors)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=Object(_.j)(e,this.ownData,{utorid:{required:!0,unique:!0},first_name:{required:!0},last_name:{required:!0}});if(t)throw new Error(t)}},{key:"delete",value:function(e){var t=this.find(e);if(!t)throw new Error("Cannot find instructor matching ".concat(JSON.stringify(e)));Object(p.a)(Object(f.a)(n.prototype),"delete",this).call(this,t);var a,r=Object(s.a)(this.data.positions);try{for(r.s();!(a=r.n()).done;){var i=a.value;(i.instructor_ids||[]).includes(t.id)&&Object(_.d)(t.id,i.instructor_ids)}}catch(o){r.e(o)}finally{r.f()}return t}},{key:"getFromActiveUser",value:function(){var e=new C(this.data).getActiveUser();return new n(this.data).findAll().find((function(t){return t.utorid===e.utorid}))}}]),n}(_.a),k={get:{"/instructors":Object(b.b)({func:function(e,t){if("admin"===t.role)return new T(e).findAll();if("instructor"===t.role){var n=new T(e).getFromActiveUser();if(!n)return[];var a,r=new D(e).getForInstructor(n),i=new Set,o=Object(s.a)(r);try{for(o.s();!(a=o.n()).done;){var c,u=a.value,l=Object(s.a)(u.instructor_ids);try{for(l.s();!(c=l.n()).done;){var d=c.value;i.add(d)}}catch(m){l.e(m)}finally{l.f()}}}catch(m){o.e(m)}finally{o.f()}return new T(e).findAll().filter((function(e){return i.has(e.id)}))}Object(_.e)(t,"")},summary:"Get a list of all instructors",returns:b.d.arrayOf(b.a.instructor)})},post:{"/instructors":Object(b.b)({func:function(e,t,n){return Object(_.e)(t,"admin"),new T(e).upsert(n)},summary:"Upsert an instructor",posts:b.a.instructor,returns:b.a.instructor}),"/instructors/delete":Object(b.b)({func:function(e,t,n){return Object(_.e)(t,"admin"),new T(e).delete(n)},summary:"Delete an instructor (removes from all positions)",posts:b.a.idOnly,returns:b.a.instructor})}},D=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.positions)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){var n=Object(_.j)(e,this.findAllBySession(t),{position_code:{required:!0,unique:!0}});if(n)throw new Error(n)}}},{key:"find",value:function(e){for(var t=this.rawFind(e),n=null,a=0,r=Object.entries(this.data.positions_by_session);a<r.length;a++){var i=Object(j.a)(r[a],2),s=i[0];if(i[1].includes(t.id)){n=s;break}}return Object(S.a)(Object(S.a)({},t),{},{session_id:n})}},{key:"getSession",value:function(e){return new g(this.data).find({id:e.session_id})}},{key:"getContractTemplate",value:function(e){return new w(this.data).find({id:e.contract_template_id})}},{key:"getInstructors",value:function(e){var t=this;return e.instructor_ids?e.instructor_ids.map((function(e){return new T(t.data).find({id:e})})):[]}},{key:"getForInstructor",value:function(e){if(!(e=new T(this.data).find(e)))throw new Error("Cannot find a matching instructor");return this.findAll().filter((function(t){return(t.instructor_ids||[]).includes(e.id)}))}},{key:"delete",value:function(e){var t=this.rawFind(e);if(!t)throw new Error("Cannot find position matching ".concat(JSON.stringify(e)));Object(p.a)(Object(f.a)(n.prototype),"delete",this).call(this,t);for(var a=0,r=Object.values(this.data.positions_by_session);a<r.length;a++){var i=r[a];i.includes(t.id)&&Object(_.d)(t.id,i)}return t}},{key:"findAllBySession",value:function(e){var t=new g(this.data).find(e);return Object(_.h)(this.data.positions_by_session[t.id]||[],this.ownData)}},{key:"upsertBySession",value:function(e,t){var n=new g(this.data).rawFind(t);this.rawFind(e)||(this.validateNew(e,n),e.start_date=void 0===e.start_date?n.start_date:e.start_date,e.end_date=void 0===e.end_date?n.end_date:e.end_date);var a=this.upsert(e);return this.data.positions_by_session[n.id]=this.data.positions_by_session[n.id]||[],this.data.positions_by_session[n.id].push(a.id),a}},{key:"findAssociatedSession",value:function(e){var t=this,n=this.find(e);if(!n)throw new Error("Could not associated session because there is no position matching ".concat(JSON.stringify(e)));var a=Object.keys(this.data.positions_by_session).find((function(e){return t.data.positions_by_session[e].includes(n.id)}));return null!=a?+a:a}}]),n}(_.a),x={get:{"/sessions/:session_id/positions":Object(b.b)({func:function(e,t){if("admin"===t.role)return new D(e).findAllBySession(t.session_id);if("instructor"===t.role){var n=new T(e).getFromActiveUser();return n?new D(e).findAllBySession(t.session_id).filter((function(e){return e.instructor_ids.includes(n.id)})):[]}Object(_.e)(t,"")},summary:"Get positions associated with this session.",returns:b.d.arrayOf(b.a.position)})},post:{"/sessions/:session_id/positions":Object(b.b)({func:function(e,t,n){return new D(e).upsertBySession(n,t.session_id)},summary:"Upsert a position associated with a session. If a new position is created, it will be automatically associated with the given session",posts:b.a.position,returns:b.a.position}),"/positions":Object(b.b)({func:function(e,t,n){Object(_.e)(t,"admin");var a=e.positions,r=Object(_.g)(n,a);if(r)return Object.assign(r,n);throw new Error("Cannot find position with id=".concat(n.id))},summary:"Update a position",posts:b.a.position,returns:b.a.position}),"/positions/delete":Object(b.b)({func:function(e,t,n){return Object(_.e)(t,"admin"),new D(e).delete(n)},summary:"Delete a position",posts:b.a.idOnly,returns:b.a.position})}},N=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.wage_chunks)}return Object(c.a)(n,[{key:"validateNew",value:function(){}},{key:"findAllByAssignment",value:function(e){var t=this,n=new L(this.data).rawFind(e);if(!n)throw new Error("Could not find assignment matching ".concat(JSON.stringify(e)));return Object(_.h)([n.id],this.ownData,"assignment_id").map((function(e){return t.find(e)}))}},{key:"find",value:function(e){var t=this.rawFind(e),n=Object(S.a)({},t);if(null==n.rate){var a=this.getSession(e);if(null==a.rate2)n.rate=a.rate1;else{var r=new Date(e.start_date),i=new Date(e.end_date),s=new Date(a.start_date),o=new Date(s.getFullYear(),11,31);n.rate=r<=o&&i<=o?a.rate1:a.rate2}}return n}},{key:"getSession",value:function(e){var t=this.rawFind(e),n=new L(this.data).rawFind({id:t.assignment_id}),a=new L(this.data).getPosition(n);return new D(this.data).getSession(a)}},{key:"upsertByAssignment",value:function(e,t){var n=new L(this.data).rawFind(t);if(!n)throw new Error("Could not find assignment matching ".concat(JSON.stringify(t)));return this.upsert(Object(S.a)(Object(S.a)({},e),{},{assignment_id:n.id}))}},{key:"setAllByAssignment",value:function(e,t){var n=this,a=new L(this.data).rawFind(t);if(!a)throw new Error("Could not find assignment matching ".concat(JSON.stringify(t)));var r=this.findAllByAssignment(t);e.forEach((function(e){return n.upsertByAssignment(e,a)}));var i,o=Object(s.a)(r);try{for(o.s();!(i=o.n()).done;){var c=i.value;Object(_.g)(c,e)||this.delete(c)}}catch(u){o.e(u)}finally{o.f()}return this.findAllByAssignment(a)}}]),n}(_.a),H={get:{},post:{"/wage_chunks":Object(b.b)({func:function(e,t,n){return new N(e).upsert(n)},posts:b.a.wageChunk,summary:"Upsert a wage_chunk",returns:b.a.wageChunk}),"/wage_chunks/delete":Object(b.b)({func:function(e,t,n){return new N(e).delete(n)},posts:b.a.wageChunk,summary:"Delete a wage_chunk. Must have a valid id specified.",returns:b.a.wageChunk})}},P=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.applications)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=Object(_.j)(e,this.ownData,{session_id:{required:!0},applicant_id:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=new g(this.data).find(e);if(!t)throw new Error("Cannot find applicant by session because session ".concat(JSON.stringify(e)," cannot be found"));return Object(_.h)([t.id],this.ownData,"session_id")}}]),n}(_.a),I={get:{"/sessions/:session_id/applications":Object(b.b)({func:function(e,t){return new P(e).findAllBySession(t.session_id)},summary:"Get all applications associated with the given session",returns:b.d.arrayOf(b.a.application)})},post:{"/applications":Object(b.b)({func:function(e,t,n){return new P(e).upsert(n)},summary:"Upsert an application",posts:b.a.application,returns:b.a.application})}},F=n(124),U=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.applicants)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=Object(_.j)(e,this.ownData,{utorid:{required:!0,unique:!0},first_name:{required:!0},last_name:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=new g(this.data).find(e);if(!t)throw new Error("Cannot find applicant by session because session ".concat(JSON.stringify(e)," cannot be found"));var n=new P(this.data).findAllBySession(t),a=new L(this.data).findAllBySession(t),r=Array.from(new Set(n.map((function(e){return e.applicant_id})).concat(a.map((function(e){return e.applicant_id})))));return Object(_.h)(r,this.ownData)}}]),n}(_.a),R={get:{"/sessions/:session_id/applicants":Object(b.b)({func:function(e,t){if("admin"===t.role)return new U(e).findAllBySession(t.session_id);if("instructor"===t.role){var n=new T(e).getFromActiveUser();if(!n)return[];var a=new L(e).findAllBySessionAndInstructor(t.session_id,n).map((function(e){return e.applicant_id}));return new U(e).findAll().filter((function(e){return a.includes(e.id)}))}Object(_.e)(t,"")},summary:"Get all applicants associated with the given session",returns:b.d.arrayOf(b.a.applicant)}),"/applicants":Object(b.b)({func:function(e){return new U(e).findAll()},summary:"Get all applicants",returns:b.d.arrayOf(b.a.applicant)}),"/applicants/:applicant_id":Object(b.b)({func:function(e,t){return new U(e).find(t.applicant_id)},summary:"Get an applicant",returns:b.a.applicant})},post:{"/applicants":Object(b.b)({func:function(e,t,n){return Object(_.e)(t,"admin"),new U(e).upsert(n)},summary:"Upsert an applicant",posts:b.a.applicant,returns:b.a.applicant}),"/sessions/:session_id/applicants":Object(b.b)({func:function(e,t,n){Object(_.e)(t,"admin");var a=new U(e).findAll().find((function(e){return e.id===n.id||e.utorid===n.utorid}))||{},r=new U(e).upsert(Object(S.a)(Object(S.a)({},a),Object(_.f)(n)));return new P(e).findAllBySession(t.session_id).find((function(e){return e.applicant_id===r.id}))||new P(e).upsert({session_id:Object(F.b)(t.session_id),applicant_id:r.id,comment:"<Autogenerated>"}),r},summary:"Upsert an applicant. If they have no application associated with the current session, an application is created.",posts:b.a.applicant,returns:b.a.applicant}),"/applicants/delete":Object(b.b)({func:function(e,t,n){return Object(_.e)(t,"admin"),new U(e).delete(n)},summary:"Delete an applicant",posts:b.a.idOnly,returns:b.a.applicant})}},L=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.assignments)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=Object(_.j)(e,[],{position_id:{required:!0},applicant_id:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=this,a=new g(this.data).rawFind(e);return Object(_.h)(this.data.assignments_by_session[a.id]||[],this.ownData).map((function(e){return new n(t.data).find(e)}))}},{key:"getPosition",value:function(e){return new D(this.data).find({id:e.position_id})}},{key:"getApplicant",value:function(e){return new U(this.data).find({id:e.applicant_id})}},{key:"getWageChunkInfo",value:function(e){var t=new N(this.data).findAllByAssignment(e);return{hours:_.l.apply(void 0,Object(E.a)(t.map((function(e){return e.hours})))),wageChunks:t}}},{key:"getActiveOffer",value:function(e){return new q(this.data).findByAssignment(e)}},{key:"find",value:function(e){var t=this.rawFind(e);if(!t)return t;var n=Object(S.a)({},t),a=this.getWageChunkInfo(t).hours;Object.assign(n,{hours:a});var r=this.getActiveOffer(t);return r&&Object.assign(n,{active_offer_status:r.status,active_offer_url_token:r.url_token}),n}},{key:"upsert",value:function(e){var t=this.find(Object(p.a)(Object(f.a)(n.prototype),"upsert",this).call(this,e)),a=new D(this.data).findAssociatedSession(t.position_id);if(a&&this.data.assignments_by_session[a].push(t.id),null==e.hours||+t.hours===+e.hours)return t;var r=new N(this.data).findAllByAssignment(t);if(0===r.length){var i,o=Object(_.k)(t.start_date,t.end_date),c=Object(s.a)(o);try{for(c.s();!(i=c.n()).done;){var u=i.value;new N(this.data).upsertByAssignment({hours:0,start_date:u.start_date,end_date:u.end_date},t)}}catch(v){c.e(v)}finally{c.f()}}r=new N(this.data).findAllByAssignment(t);var l,d=(+e.hours-+(this.find(t).hours||0))/r.length,m=Object(s.a)(r);try{for(m.s();!(l=m.n()).done;){var h=l.value;new N(this.data).upsert(Object(S.a)(Object(S.a)({},h),{},{hours:(h.hours||0)+d}))}}catch(v){m.e(v)}finally{m.f()}return this.find(t)}},{key:"findAllBySessionAndInstructor",value:function(e,t){e=new g(this.data).find(e),t=new T(this.data).find(t);var n=new D(this.data).getForInstructor(t),a=this.findAllBySession(e),r=n.map((function(e){return e.id}));return a.filter((function(e){return r.includes(e.position_id)}))}}]),n}(_.a),q=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.offers)}return Object(c.a)(n,[{key:"findByAssignment",value:function(e){var t=this._ensureAssignment(e);if(t&&t._noActiveOffer)return null;var n=Object(_.h)([t.id],this.data.offers,"assignment_id");return n[n.length-1]||null}},{key:"_ensureAssignment",value:function(e){var t=new L(this.data).rawFind(e);if(!t)throw new Error("Could not find assignment matching ".concat(JSON.stringify(e)));return t}},{key:"getAssignment",value:function(e){return new L(this.data).find({id:e.assignment_id})}},{key:"find",value:function(e){var t=this.rawFind(e),n=this.getAssignment(t),a=new L(this.data).getWageChunkInfo(n),r=a.hours,i=a.wageChunks,s=new L(this.data).getPosition(n),o=new L(this.data).getApplicant(n),c=new D(this.data).getInstructors(s),u=new D(this.data).getContractTemplate(s),l=Object(_.n)(i),d=l.start_date,m=l.end_date;return Object(S.a)(Object(S.a)({accepted_date:null,rejected_date:null,withdrawn_date:null,signature:"",nag_count:0},t),{},{contract_template:u.template_file,contract_override_pdf:n.contract_override_pdf,first_name:o.first_name,last_name:o.last_name,email:o.email,position_code:s.position_code,position_title:s.position_title,position_start_date:d,position_end_date:m,first_time_ta:null,instructor_contact_desc:Object(_.i)(c),pay_period_desc:Object(_.m)(i),hours:r,ta_coordinator_name:"Dr. Coordinator",ta_coordinator_email:"coordinator@utoronto.ca",url_token:"mock_api_offer_url_token"})}},{key:"withdrawByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(S.a)(Object(S.a)({},t),{},{status:"withdrawn",withdrawn_date:(new Date).toISOString()})))}},{key:"rejectByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(S.a)(Object(S.a)({},t),{},{status:"rejected",rejected_date:(new Date).toISOString()})))}},{key:"acceptByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(S.a)(Object(S.a)({},t),{},{status:"accepted",accepted_date:(new Date).toISOString()})))}},{key:"emailByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.find(this.upsert(Object(S.a)(Object(S.a)({},t),{},{status:"pending",emailed_date:(new Date).toISOString()})))}},{key:"nagByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));if(!t.emailed_date)throw new Error("The active offer for assignment with id=".concat(e.id," has not been emailed yet, so a nag email cannot be sent"));return this.find(this.upsert(Object(S.a)(Object(S.a)({},t),{},{nag_count:(t.nag_count||0)+1})))}},{key:"createByAssignment",value:function(e){var t=this._ensureAssignment(e),n=this.findByAssignment(t);if(n&&["pending","accepted","rejected","provisional"].includes(n.status))throw new Error("An offer already exists for assignment=".concat(JSON.stringify(e)));return new L(this.data).upsert(Object(S.a)(Object(S.a)({},t),{},{_noActiveOffer:!1})),this.upsert(this.find(this.create({assignment_id:t.id,status:"provisional"})))}}]),n}(_.a),B={get:{"/sessions/:session_id/assignments":Object(b.b)({func:function(e,t){if("admin"===t.role)return new L(e).findAllBySession(t.session_id);if("instructor"===t.role){var n=new T(e).getFromActiveUser();return n?new L(e).findAllBySessionAndInstructor(t.session_id,n):[]}Object(_.e)(t,"")},summary:"Get assignments associated with a session",returns:b.d.arrayOf(b.a.assignment)}),"/assignments/:assignment_id":Object(b.b)({func:function(e,t){return new L(e).find(t.assignment_id)},summary:"Get an assignment",returns:b.a.assignment}),"/assignments/:assignment_id/active_offer":Object(b.b)({func:function(e,t){return new L(e).getActiveOffer(t.assignment_id)},summary:"Get the active offer associated with an assignment",returns:b.a.offer}),"/assignments/:assignment_id/wage_chunks":Object(b.b)({func:function(e,t){return new L(e).getWageChunkInfo(t.assignment_id).wageChunks},summary:"Get the wage_chunks associated with an assignment",returns:b.d.arrayOf(b.a.wageChunk)})},post:{"/assignments":Object(b.b)({func:function(e,t,n){Object(_.e)(t,"admin");var a=new L(e).find(n);if(a){var r=new L(e).getActiveOffer(a);if(!r)return new L(e).upsert(n);if(["withdrawn","provisional"].includes(r.status))return new L(e).upsert(Object(S.a)(Object(S.a)({},n),{},{_noActiveOffer:!0}));throw new Error("Cannot update an assignment that has an active offer with status '".concat(r.status,"'"))}return new L(e).upsert(n)},posts:b.a.assignment,summary:"Upsert an assignment",returns:b.a.assignment}),"/assignments/:assignment_id/wage_chunks":Object(b.b)({func:function(e,t,n){return Object(_.e)(t,"admin"),new N(e).setAllByAssignment(n,t.assignment_id)},summary:"Sets the wage chunks of an assignment to the specified list. The contents of the list are upserted. Omitted wage chunks are deleted.",posts:b.d.arrayOf(b.a.wageChunk),returns:b.d.arrayOf(b.a.wageChunk)}),"/assignments/:assignment_id/active_offer/withdraw":Object(b.b)({func:function(e,t){return Object(_.e)(t,"admin"),new q(e).withdrawByAssignment(t.assignment_id)},summary:"Withdraws the active offer for the specified assignment",returns:b.a.offer}),"/assignments/:assignment_id/active_offer/reject":Object(b.b)({func:function(e,t){return Object(_.e)(t,"admin"),new q(e).rejectByAssignment(t.assignment_id)},summary:"Rejects the active offer for the specified assignment",returns:b.a.offer}),"/assignments/:assignment_id/active_offer/accept":Object(b.b)({func:function(e,t){return Object(_.e)(t,"admin"),new q(e).acceptByAssignment(t.assignment_id)},summary:"Accepts the active offer for the specified assignment",returns:b.a.offer}),"/assignments/:assignment_id/active_offer/create":Object(b.b)({func:function(e,t){return Object(_.e)(t,"admin"),new q(e).createByAssignment(t.assignment_id)},summary:"Creates an offer for the specified assignment, provided there are no active offers for this assignment.",returns:b.a.offer}),"/assignments/:assignment_id/active_offer/email":Object(b.b)({func:function(e,t){return Object(_.e)(t,"admin"),new q(e).emailByAssignment(t.assignment_id)},summary:"Emails the active offer for the specified assignment",returns:b.a.offer}),"/assignments/:assignment_id/active_offer/nag":Object(b.b)({func:function(e,t){return Object(_.e)(t,"admin"),new q(e).nagByAssignment(t.assignment_id)},summary:"Sends a nag email for the active offer for the specified assignment which has already been emailed once",returns:b.a.offer})}},M={},G=function(){function e(t){Object(o.a)(this,e),this.data=t}return Object(c.a)(e,[{key:"getAllData",value:function(){return this.data}},{key:"makeSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"snapshot";return M[e]=JSON.stringify(this.getAllData()),this.getAllData()}},{key:"clearData",value:function(){var e=this;return this.makeSnapshot("beforeclear"),Object.keys(this.data).forEach((function(t){var n;"available_contract_templates"!==t&&"contract_templates_by_filename"!==t&&(e.data[t]="object"===typeof(n=e.data[t])?n instanceof Array?[]:{}:"string"===typeof n?"":n.constructor())})),this.getAllData()}},{key:"restoreSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"snapshot",t=JSON.parse(M[e]||"{}");return this.clearData(),Object.assign(this.data,t),this.getAllData()}}]),e}(),W={get:{"/debug/active_user":Object(b.b)({func:function(e){return new C(e).getActiveUser()},summary:"Gets the active user; in debug mode this is specified by posting to `active_user`.",returns:b.a.user}),"/debug/users":Object(b.b)({func:function(e){return new C(e).findAll()},summary:"Get a list of all users",returns:b.d.arrayOf(b.a.user)})},post:{"/debug/active_user":Object(b.b)({func:function(e,t,n){var a=new C(e),r=a.find(n);if(!r)throw new Error("Could not find user matching ".concat(JSON.stringify(n)));return a.setActiveUser(r),a.getActiveUser()},summary:"Sets the active user; this will override whatever credentials are passed to the server.",returns:b.d.arrayOf(b.a.user),posts:b.a.user}),"/debug/users":Object(b.b)({func:function(e,t,n){return new C(e).upsert(n)},summary:"Adds a user; this is done without any permission checks, so it can be used to bootstrap permissions during debug.",returns:b.d.arrayOf(b.a.user),posts:b.a.user}),"/debug/clear_data":Object(b.b)({func:function(e){return new G(e).clearData()},summary:"Deletes all data in the database"}),"/debug/snapshot":Object(b.b)({func:function(e){return new G(e).makeSnapshot()},summary:"Makes a snapshot of the current state of the database"}),"/debug/restore_snapshot":Object(b.b)({func:function(e){return new G(e).restoreSnapshot()},summary:"Restores the last snapshot of the database"})}};var Z=function(e){Object(h.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e,e.ddahs)}return Object(c.a)(n,[{key:"validateNew",value:function(e){var t=Object(_.j)(e,this.ownData,{assignment_id:{required:!0,unique:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=new g(this.data).find(e);if(!t)throw new Error("Cannot find DDAHs by session because session ".concat(JSON.stringify(e)," cannot be found"));var n=new L(this.data).findAllBySession(t).map((function(e){return e.id}));return this.ownData.filter((function(e){return n.includes(e.assignment_id)}))}}]),n}(_.a),Y={get:{"/sessions/:session_id/ddahs":Object(b.b)({func:function(e,t){if("admin"===t.role)return new Z(e).findAllBySession(t.session_id);Object(_.e)(t,"")},summary:"Get all ddah forms associated with assignments for the given session",returns:b.d.arrayOf(b.a.ddah)}),"/sessions/:session_id/ddahs/accepted_list":Object(b.b)({func:function(e,t){if("admin"===t.role)throw new Error("Not implemented in mock API");Object(_.e)(t,"")},summary:"Get a signature list of all TAs who have acknowledged their DDAH form for this session. Returns a base64 encoded html file.",returns:b.d.shape({file_name:b.d.string,mime_type:b.d.string,content:b.d.string})}),"/sessions/:session_id/ddahs/accepted_list.pdf":Object(b.b)({func:function(e,t){if("admin"===t.role)throw new Error("Not implemented in mock API");Object(_.e)(t,"")},summary:"Get a signature list of all TAs who have acknowledged their DDAH form for this session. Returns a base64 encoded html file.",returns:b.d.shape({file_name:b.d.string,mime_type:b.d.string,content:b.d.string})}),"/ddahs/:ddah_id":Object(b.b)({func:function(e,t){return new Z(e).find(t.ddah_id)},summary:"Get a ddah",returns:b.a.ddah}),"/assignments/:assignment_id/ddah":Object(b.b)({func:function(e,t){if("admin"===t.role||"instructor"===t.role){var n=new L(e).find(t.assignment_id);if(!n)throw new Error("Cannot create a DDAH because an assignment with id '".concat(t.assignment_id,"' cannot be found."));return new Z(e).findAll().find((function(e){return e.assignment_id===n.id}))}Object(_.e)(t,"")},summary:"Find a DDAH associated with a specific assignment.",returns:b.a.ddah})},post:{"/ddahs":Object(b.b)({func:function(e,t,n){Object(_.e)(t,"admin");var a=new Z(e).find({id:n.id});if(!a||!n.duties)return new Z(e).upsert(n);var r={accepted_date:null,approved_date:null,signature:null};function i(e,t){return e.order-t.order}return JSON.stringify(Object(E.a)(n.duties).sort(i))!==JSON.stringify(Object(E.a)(a.duties).sort(i))?((a.accepted_date||a.emailed_date)&&(r.revised_date=new Date),new Z(e).upsert(Object(S.a)(Object(S.a)({},n),r))):new Z(e).upsert(n)},summary:"Upsert a ddah",posts:b.a.ddah,returns:b.a.ddah}),"/ddahs/:ddah_id/approve":Object(b.b)({func:function(e,t){Object(_.e)(t,"admin");var n=new Z(e).find({id:t.ddah_id});if(!n)throw new Error("Could not find DDAH with id '".concat(t.ddah_id,"'"));return new Z(e).upsert(Object(S.a)(Object(S.a)({},n),{},{approved_date:(new Date).toISOString()}))},summary:"Approve a DDAH",returns:b.a.ddah}),"/ddahs/:ddah_id/email":Object(b.b)({func:function(e,t){if("admin"===t.role||"instructor"===t.role){var n=new Z(e).find({id:t.ddah_id});if(!n)throw new Error("Could not find DDAH with id '".concat(t.ddah_id,"'"));return new Z(e).upsert(Object(S.a)(Object(S.a)({},n),{},{emailed_date:(new Date).toISOString()}))}Object(_.e)(t,"")},summary:"Email a DDAH",returns:b.a.ddah}),"/assignments/:assignment_id/ddah":Object(b.b)({func:function(e,t,n){if("admin"===t.role||"instructor"===t.role){if(!new L(e).find(t.assignment_id))throw new Error("Cannot create a DDAH because an assignment with id '".concat(t.assignment_id,"' cannot be found."));return new Z(e).upsert(Object(S.a)(Object(S.a)({},n),{},{assignment_id:Object(F.b)(t.assignment_id)}))}Object(_.e)(t,"")},summary:"Create a DDAH associated with a specific assignment. You may specify the details of the DDAH in th body of this request.",posts:b.a.ddah,returns:b.a.ddah})}};n.d(t,"MockAPI",(function(){return J})),n.d(t,"mockAPI",(function(){return z})),n.d(t,"mockData",(function(){return m}));var J=function(){function e(t){var n=this;Object(o.a)(this,e),this.routePrefix="/api/v1",this.getRoutes=Object.assign({},y.get,O.get,x.get,k.get,B.get,R.get,I.get,H.get,Y.get,W.get,A.get,{"/all_data":Object(b.b)({func:function(e){return e},exclude:!0})}),this.postRoutes=Object.assign({},y.post,O.post,x.post,k.post,B.post,R.post,I.post,H.post,Y.post,W.post,A.post),this.apiGET=function(e){var t,a=Object(s.a)(n._getRoutesParsers);try{for(a.s();!(t=a.n()).done;){var r=t.value,i=r.match(e);if(i)try{return n.authenticateActiveUserBasedOnRole(i.role),{status:"success",message:"",payload:n.getRoutes[r.spec](n.data,i)}}catch(o){return{status:"error",message:o.toString()}}}}catch(c){a.e(c)}finally{a.f()}return{status:"error",message:"could not find route matching ".concat(e)}},this.apiPOST=function(e,t){var a,r=Object(s.a)(n._postRoutesParsers);try{for(r.s();!(a=r.n()).done;){var i=a.value,o=i.match(e);if(o)try{return n.authenticateActiveUserBasedOnRole(o.role),{status:"success",message:"",payload:n.postRoutes[i.spec](n.data,o,t)}}catch(c){return{status:"error",message:c.toString()}}}}catch(u){r.e(u)}finally{r.f()}return{status:"error",message:"could not find route matching ".concat(e)}},this.active=!1,this.data=t,this._getRoutesParsers=Object.keys(this.getRoutes).map((function(e){var t=new l.a("(/:role)"+e);return t.spec=e,t})),this._postRoutesParsers=Object.keys(this.postRoutes).map((function(e){var t=new l.a("(/:role)"+e);return t.spec=e,t}))}return Object(c.a)(e,[{key:"authenticateActiveUserBasedOnRole",value:function(e){if(null!=e){var t=new C(this.data).getActiveUser();if(null!=t&&!t.roles.includes(e))throw new Error("Not authenticated for accessing routes with prefix /".concat(e))}}},{key:"replaceGlobalFetch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.active||(this.active=!0,this._origFetch=fetch,window.fetch=function(){var n=Object(i.a)(r.a.mark((function n(a){var i,s,o,c,u,l=arguments;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=l.length>1&&void 0!==l[1]?l[1]:{},s=new URL(a,"http://dummy.com"),a=(a=s.pathname).startsWith(e.routePrefix)?a.replace(e.routePrefix,""):a,"GET"===i.method?o=e.apiGET(a):("string"===typeof(c=i.body)&&(c=JSON.parse(c)),o=e.apiPOST(a,c)),console.log("MockAPI ".concat(i.method," Request."),a,i,"Responding with",o),u=new Response(new Blob([JSON.stringify(o)],{type:"application/json"}),{status:200,statusText:"OK"}),n.abrupt("return",new Promise((function(e){window.setTimeout((function(){return e(u)}),t)})));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"restoreGlobalFetch",value:function(){this.active=!1,window.fetch=this._origFetch||fetch}}]),e}(),z=new J(m)},4:function(e,t,n){"use strict";n.d(t,"d",(function(){return _})),n.d(t,"c",(function(){return S})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return b}));var a=n(2),r=n(37),i=n(12),s=n(6),o=n(25),c=n(32),u=n(36),l=n(3),d=n.n(l),m=n(223),p=n.n(m),f=n(263),h=function(){function e(t,n){Object(c.a)(this,e),this.name=t,this.args=n}return Object(u.a)(e,[{key:"toString",value:function(){return null==this.args?""+this.name:this.name+"("+this.args.join(", ")+")"}}]),e}();function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.concat([new h(t,n)])}var _=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={get:function(t,a,r){if("callChain"===a)return n;if("toJSON"===a)return function(){return n};var i=Reflect.get(t,a,r);return i instanceof Object?e(i,v(n,a)):i},apply:function(t,a,r){var i=n.pop()||{name:"<root>"},s=Reflect.apply(t,a,r);return s instanceof Object?e(s,v(n,i.name,r)):s},ownKeys:function(e){return[].concat(Object(o.a)(Reflect.ownKeys(e)),["callChain","toJSON"])}};return new Proxy(t,a)}(d.a),b=Object(f.a)(_),g={string:"string",number:"number",bool:"boolean",object:"object",array:"array",any:{}};function y(e){var t={};if(e.callChain){var n=Object(s.a)(e.callChain,2),a=n[0],r=[];if(n[1]&&(t.required=!0),a.args)switch(a.name){case"shape":t.type="object",t.properties={};for(var i=0,o=Object.entries(a.args[0]);i<o.length;i++){var c=Object(s.a)(o[i],2),u=c[0],l=y(c[1]);l.required&&(r.push(u),delete l.required),t.properties[u]=l}r.length>0&&(t.required=r);break;case"arrayOf":t.type="array",t.items=y(a.args[0]);break;case"oneOf":t.type="string",t.enum=a.args[0];break;case"oneOfType":t.oneOf=a.args[0].map(y)}else g[a.name]&&(t.type=g[a.name])}else console.warn("Attempting to compute swagger values for non-wrapped object",e);return t}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"object"};return{type:"object",properties:{status:{type:"string",enum:["success","error"]},message:{type:"string"},payload:e},required:["status"]}}function w(e){for(var t=p()(e),n=Object.keys(t.match(t.spec)),a={},r=0,i=n;r<i.length;r++){var s=i[r];a[s]="{"+s+"}"}return{url:decodeURI(t.reverse(a)),templateVars:n}}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={responses:{default:{}}};if(!e)return n;var a=["admin"].concat(Object(o.a)(e.roles||[]));return n.summary="(prefixes: ".concat(a.map((function(e){return"/"+e})).join(", "),") ")+e.summary,t.length>0&&(n.parameters=t.map((function(e){return{name:e,in:"path",description:e,required:!0}}))),e.returns&&(n.responses.default={content:{"application/json":{schema:E(y(e.returns))}}}),e.posts&&(n.requestBody={content:{"application/json":{schema:y(e.posts)}}}),n}function S(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getRoutes,n=void 0===t?{}:t,a=e.postRoutes,r=void 0===a?{}:a,o={},c=0,u=Object.entries(n);c<u.length;c++){var l=Object(s.a)(u[c],2),d=l[0],m=l[1],p=w(d),f=p.url,h=p.templateVars;m.docs&&m.docs.exclude||(o[f]=Object.assign(o[f]||{},{get:O(m.docs,h)}))}for(var v=0,_=Object.entries(r);v<_.length;v++){var b=Object(s.a)(_[v],2),g=b[0],y=b[1],E=w(g),S=E.url,j=E.templateVars;y.docs&&y.docs.exclude||(o[S]=Object.assign(o[S]||{},{post:O(y.docs,j)}))}for(var C=Array.from(new Set(Object.keys(o).map((function(e){return e.split("/")[1]})).filter((function(e){return e})))),A=function(){var e=Object(s.a)(k[T],2),t=e[0],n=e[1],a=C.filter((function(e){return t.includes(e)}));n.get&&a.length>0&&(n.get.tags=a),n.post&&a.length>0&&(n.post.tags=a)},T=0,k=Object.entries(o);T<k.length;T++)A();var D,x={},N=Object(i.a)(Object.keys(o).sort());try{for(N.s();!(D=N.n()).done;){var H=D.value;x[H]=o[H]}}catch(P){N.e(P)}finally{N.f()}return x}function j(e){var t=e.func,n=e.exclude,i=void 0!==n&&n,s=Object(r.a)(e,["func","exclude"]),o=function(){return t.apply(void 0,arguments)};return o.docs=Object(a.a)({exclude:i},s),o}},486:function(e,t){},538:function(e,t,n){e.exports=n(1211)},547:function(e,t,n){},556:function(e,t){}},[[538,1,2]]]);
//# sourceMappingURL=main.e50b04c9.chunk.js.map